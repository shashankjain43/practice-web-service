<div class="container">
    <div class="adduser-bg"></div>
    <div class="row">
        <div class="row haeding-area">
            <div class="col-sm-12 sandbox-datepicker">
                <div id="sandbox-container">
                    <input type="text" readonly="readonly" name="fromDate" required
                           id="{{vm.filters.fromDateFilter.value}}"
                           ng-model="vm.filters.fromDateFilter.value"
                           date-lower-than="{{vm.filters.toDateFilter.value}}"
                           placeholder="{{vm.filters.fromDateFilter.value}}" class="fromDate">
                  <span>-</span>

                    <input type="text" readonly="readonly" name="toDate" ng-disabled="true"
                           date-greater-than="{{vm.filters.fromDateFilter.value}}"
                           id="{{vm.filters.toDateFilter.value}}" required min="{{vm.filters.fromDateFilter.value}}"
                           ng-model="vm.filters.toDateFilter.value" placeholder="{{vm.filters.toDateFilter.value}}"
                           class="toDate">
                </div>

                <div id="errorMsg" class="error"
                     ng-if="vm.filters.fromDateFilter.value != 'From Date' && vm.filters.fromDateFilter.value != 'To Date'">
                    <div ng-if="vm.checkDateValidation(transactionForm.fromDate.$error.dateLowerThan)">
                        {{vm.dateMessage}}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row wrapper">
        <div class="col-xs-12">

            <div class="login-error" ng-if="vm.settlementPageData.length < 1">
                <div id="errorMessage" class="error-msz-box" id="successDiv">{{vm.errorMessage}}</div>
            </div>
            <div class="row" ng-if="vm.settlementPageData.length > 0">
                <div class="col-xs-12 downloadhistory-table">
                    <a id='downloadFileTag' ng-hide='true'></a>
                    <table id="historyTable" class="table  table-hover  table-responsive">
                        <thead>
                        <tr id="headingRow" class="active table-heading">
                            <td id="{{headers.displayValue}}" nowrap ng-repeat="headers in vm.allSettlementHeader">
                                {{headers.displayValue}}
                            </td>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="settlementData in vm.settlementPageData">
                            <td ng-repeat="header in vm.allSettlementHeader" nowrap>
                                <span ng-if="header.key =='reportName'">{{settlementData[header.key]}}</span>
                                <span nowrap align="left" ng-if="header.displayValue=='Download'">
                                <input nowrap alt="download" type="image" width="26px"
                                       height="26px" ng-click="vm.downloadFiles(settlementData)"
                                       src="assets/images/downloadImage.png">
                            </span>
                                <span ng-if="header.key === 'startTime'||header.key === 'endTime'">
                                    {{settlementData[header.key] | date:'dd MMM yy, h:mm a'}}</span>
                            </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
        <div class="col-xs-12" ng-if="vm.settlementPageData.length >0">
            <ul class="pagination pull-right">
                <li ng-class="(vm.filters.page.displayValue == 1)? 'disabled':''"
                    ng-click="vm.getReportOfPage(vm.filters.page.displayValue-1)">
                    <a id="previous" href="javascript:void(0)">Previous</a></li>
                <li class="active"><a id="{{vm.filters.page.displayValue}}" href="javascript:void(0)">{{vm.filters.page.displayValue}}</a>
                </li>
                <li ng-click="vm.settlementPageData.length<3?'':vm.getReportOfPage(vm.filters.page.displayValue+1)"
                    ng-class="vm.settlementPageData.length<3 ?'disabled':''">
                    <a id="next" href="javascript:void(0)">Next</a></li>
            </ul>
        </div>
    </div>


</div>
<div id="loadMask" style="display:block" ng-if="vm.isLoading">
    <div class="f-bolt"></div>
</div>

<script>
    $('.fromDate').datepicker({
        autoclose: true,
        startDate: '',
        format: 'dd/mm/yyyy',
        endDate: '+0d',
    }).on('changeDate', function (selected) {
        startDate = new Date(selected.date.valueOf());
        startDate.setDate(startDate.getDate(new Date(selected.date.valueOf())));
        $('.toDate').datepicker('setStartDate', startDate);
    });

    $.material.init();
</script>

