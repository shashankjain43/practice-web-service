Snapdeal.Cookie={};Snapdeal.Cookie.data="data";Snapdeal.Cookie.set=function(E,C,A,G,F){var B=new Date();B.setTime(B.getTime()+(A*24*3600*1000));var D=E+"="+escape(C)+((A)?"; expires="+B.toGMTString():"")+((G)?";path="+G:";path=/")+((F)?";domain="+F:";domain=.snapdeal.com");document.cookie=D};Snapdeal.Cookie.get=function(A){if(document.cookie.length>0){begin=document.cookie.indexOf(" "+A+"=");if(begin!=-1){begin+=A.length+2;end=document.cookie.indexOf(";",begin);if(end==-1){end=document.cookie.length}return unescape(document.cookie.substring(begin,end))}else{begin=document.cookie.indexOf(A+"=");if(begin!=-1){begin+=A.length+1;end=document.cookie.indexOf(";",begin);if(end==-1){end=document.cookie.length}return unescape(document.cookie.substring(begin,end))}}}return null};Snapdeal.Cookie.remove=function(B){var A=B+"=;expires=Thu, 01-Jan-1970 00:00:01 GMT";document.cookie=A};Snapdeal.StateList={};Snapdeal.StateList.get=function(){var A=["Andaman and Nicobar Islands","Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Delhi","Goa","Gujarat","Haryana","Himachal Pradesh","Jammu and Kashmir","Jharkhand","Karnataka","Kerala","Lakshadweep","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Orissa","Punjab","Rajasthan","Sikkim","Tamil Nadu","Tripura","Uttar Pradesh","Uttarakhand","West Bengal"];return A};Snapdeal.CommonUtils={};Snapdeal.CommonUtils.getQueryStringParameter=function(B){B=B.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var A="[\\?&]"+B+"=([^&#]*)";var D=new RegExp(A);var C=D.exec(unescape(window.location.href));if(C==null){return null}else{return C[1]}};(function(){$.fn.field=function(B,C){if(typeof B!="string"){return false}var D=$(this).find("[name="+B+"]");if(typeof C==="undefined"){if(D.length>=1){switch(D.attr("type")){case"checkbox":return D.is(":checked");break;case"radio":var A;D.each(function(E,F){if($(this).is(":checked")){A=$(this).val()}});return A;break;default:return D.val();break}}else{return null}}else{switch(D.attr("type")){case"checkbox":D.attr({checked:C});break;case"radio":D.each(function(E){if($(this).val()==C){$(this).attr({checked:true})}});break;case undefined:$(this).append('<input type="hidden" name="'+B+'" value="'+C+'" />');break;default:D.val(C);break}return D}}})();Snapdeal.Utils=function(){return{fixArray:function(A){if($.isArray(A)){return A}else{return[A]}}}}();
jQuery.fn.timer=function(A){$(this).each(function(C,D){var B=$(D).find('input.[name="startTime"]').val();var E=new Snapdeal.DealTimer();E.init($(D),B-A)})};Snapdeal.HomePage=function(){var A=this;this.init=function(){$('div.[type="sd.ImageLoader"]').each(function(D,E){A.loadImage(E)});A.startSlider();$("#refermerchantsideForm").mouseup(function(){return false});$("#feedbackForm").mouseup(function(){return false});$(".feedback").click(function(D){return A.feedbackClick(D)});$(".refermerchantside").click(function(D){return A.refermerchantsideClick(D)});$("#citydropdown").change(function(D){return A.handleCityChange(D)});$("#system_message .close").click(function(D){A.closeSystemMessage(D)});$("#system_message .firstsubscribe-skip").click(function(D){A.closeSystemMessage(D)});$(".signin").click(function(D){A.showLogin(D)});$(".signup").click(function(D){A.showSignUp(D)});$("#emailSubsForm").ajaxForm({dataType:"json",success:function(D){A.handleEmailSubs(D)}});$(".myaccount").click(function(D){A.showMyAccount(D)});$(document).mouseup(function(D){A.handleMouseUp(D)});$("#forgotPasswordNavigation").ajaxForm({dataType:"json",success:function(D){A.handleForgotPassword(D)}});$(".toggle_container").hide();$(".trigger").click(function(){$(this).toggleClass("").next().slideToggle("fast")});$(".toggle_container2").hide();$(".trigger2").click(function(){$(this).toggleClass("").next().slideToggle("fast")});$(".rpx").click(function(D){A.handleRPXClick(D)});$(".back_city").click(function(){$("#outer, .firstsubscribe-city_wrap").hide();$("#firstselectcity").show()});$(".myaccount-drop").click(function(){$(".myaccount-drop").addClass("active-drop-tab");$(".myaccount-list-outer").show();return false});$("fieldset#signin_menu").mouseup(function(){return false});var C=Snapdeal.Cookie.get("locality");if(C!=null){var B=C.split("|");$("#localityAutocomplete").val(B[0]);$("#selectedLocality").val(B[1])}$("#localityAutocomplete").autocomplete("/json/localities/get/search/city/"+$("#selectCityId").val(),{dataType:"json",parse:function(F){var E=[];for(var D=0;D<F.length;D++){E[D]={data:F[D].localityDTO,value:F[D].localityDTO.name,result:F[D].localityDTO.name}}return E},formatItem:function(D){return D.name},minChars:2}).result(function(E,D){$("#selectedLocality").val(D.id);$("#submitDealsNearMeExplore").click()});$("#submitDealsNearMeExplore").click(function(){var D=$("#selectedLocality").val();if(D==""){$(".error_tooltip").show();return false}else{return true}});highlights=new Snapdeal.DealHighlights();highlights.init(this);$.ajax({url:"/json/deals/getCurrentTime",type:"GET",dataType:"json",success:function(D){$('div.[type="sd.DealTimer"]').timer(D.d.t)}})};this.loadScript=function(C){var B=$("<script/>");B.attr("type","text/javascript");B.attr("src",C);B.appendTo($("head"))};this.showSignUp=function(){$.ajax({url:"/ajaxSignup",type:"POST",dataType:"json",success:function(B){A.handleSignUp(B)}})};this.handleSignUp=function(B){window.widget=new Snapdeal.signupWidget();window.widget.init(B);$("#signin_box").html(window.widget.getHtml());$("fieldset#signin_menu").toggle("fast");$(".signin").removeClass("menu-open");$(".signup").toggleClass("menu-open")};this.handleRPXClick=function(C){var B=$(C).attr("data").split("-");loginWindow=window.open(B[0],"OAuthLogin","menubar=yes,resizable=yes,scrollbars=yes,width=850,height=550,left=100,top=100")};this.handleForgotPassword=function(B){$("#forgotPasswordNavigationResponse").html(data.message)};this.handleMouseUp=function(B){$("#subsResponse").hide();$("#subsResponse2").hide();$(".morecity").hide();$(".RetypePassword").hide();$(".servicesdropped").hide();$(".msg_arrow").hide();$(".morezone").hide();$(".us").hide();$(".myaccount-drop").removeClass("active-drop-tab");$(".myaccount-list-outer").hide();if($(B.target).parents(".sign_right").length==0){$(".signin").removeClass("menu-open");$(".signup").removeClass("menu-open");$("fieldset#signin_menu").hide();$(".myaccount").removeClass("menu-open");$("fieldset#signout_menu").hide()}if($(B.target).parents(".feedback").length==0&&$(B.target)!=$(".feedback")){$(".feedback").removeClass("off");$(".refermerchantside").removeClass("refer-feedback-hide");$("#feedbackForm").hide()}if($(B.target).parents(".refermerchantside").length==0&&$(B.target)!=$(".refermerchantside")){$(".refermerchantside").removeClass("referoff");$(".feedback").removeClass("refer-feedback-hide");$("#refermerchantsideForm").hide()}};this.showMyAccount=function(B){B.preventDefault();$("fieldset#signout_menu").toggle();$(".myaccount").toggleClass("menu-open")};this.handleEmailSubs=function(C){$("#emailSubsForm").clearForm();$("#subsResponse").css("display","block");$(".msg_arrow").css("display","block");$("#subsResponse span").html(C.message);if(C.items["newSubscriber"]){var B='<iframe src="http://www.vizury.com/analyze/analyze.php?account_id=VIZ-VRM-1330&param=1300" scrolling="no" width="1" height="1" marginheight="0" marginwidth="0" frameborder="0"></iframe>';$("#newSubscriber").html(B)}};this.showLogin=function(B){$.ajax({url:"/ajaxLogin",type:"POST",dataType:"json",success:function(C){A.handleLogin(C)}})};this.handleLogin=function(B){window.widget=new Snapdeal.signupWidget();window.widget.init(B);$("#signin_box").html(window.widget.getHtml());$("fieldset#signin_menu").toggle("fast");$(".signin").toggleClass("menu-open")};this.loadImage=function(E){var C=$(E);var B='<img src="'+C.attr("src")+'" width="'+C.attr("width")+'" alt="'+C.attr("alt")+'"/>';var D=$(E.parentNode);C.remove();D.append(B)};this.handleCityChange=function(C){var B=$("#citydropdown").val();$("#citydropdown").val(B);window.location.href="/deals-"+B;return false};this.closeSystemMessage=function(B){$("#system_message").slideToggle("slow")};this.feedbackClick=function(C){C.preventDefault();if($(C.target).parents(".feedback").length!=0&&$(".feedback").hasClass("off")){$(".feedback").removeClass("off");$(".refermerchantside").removeClass("refer-feedback-hide");$("#feedbackForm").hide()}else{var D=Snapdeal.getStaticPath("/info/feedback");var B='<iframe src="'+D+'" class="feedback_wrap" scrolling="no" frameborder="0" width="340" height="455" allowtransparency="true">';$("#feedbackForm").html(B);$("#feedbackForm").css("display","none");$("#feedbackForm").toggle();$(".feedback").toggleClass("off");$(".refermerchantside").addClass("refer-feedback-hide")}};this.refermerchantsideClick=function(C){C.preventDefault();if($(C.target).parents(".refermerchantside").length!=0&&$(".refermerchantside").hasClass("referoff")){$(".refermerchantside").removeClass("referoff");$(".feedback").removeClass("refer-feedback-hide");$("#refermerchantsideForm").hide()}else{var D=Snapdeal.getStaticPath("/info/refermerchant-side");var B='<iframe src="'+D+'" class="refermerchantside_wrap" scrolling="no" frameborder="0" width="340" height="550">';$("#refermerchantsideForm").html(B);$("#refermerchantsideForm").css("display","none");$("#refermerchantsideForm").toggle();$(".refermerchantside").toggleClass("referoff");$(".feedback").addClass("refer-feedback-hide")}};this.startSlider=function(){$(".slides").bxSlider({wrapper_class:"slider-wrap",controls:false,auto:true,pager:true,auto_controls:false})};this.showLoader=function(B){var C='<div type="sd.AjaxLoader" style="padding:0 20px 0 20px;text-align:center;"><img src="'+Snapdeal.getResourcePath("img/ajax-loader.gif")+'"/></div>';B.append(C)};this.hideLoader=function(B){B.find('div.[type="sd.AjaxLoader"]').each(function(C,D){$(D).remove()})}};Snapdeal.DealLocation=function(){var D=this;var H;var F;var A;var E;var G;var C;var B;this.init=function(J,K){D.m_count=0;var L='<div class="nomap"><div class="black-shadow mapMsg">Map not available for this outlet.</div></div>';D.msgDiv=$(L);var I="";if(J.v!=null){if(J.v.vo!=null){if($.isArray(J.v.vo)){$.each(J.v.vo,function(M,N){D.addVendorOutlet(N,K)})}else{D.addVendorOutlet(J.v.vo,K)}}}if(D.map==undefined){K.find(".main_map").remove()}};this.addVendorOutlet=function(L,J,Q){var M="";var P=$("<div/>");P.attr("style","padding:2px 5px;border-bottom:1px solid #28BAE3");P.appendTo(J.find("div.loc"));if(L.n!=null&&L.n!=""){M=M+"<strong>"+L.n+" outlet</strong><br>"}if(L.a1!=null&&L.a1!=""){M=M+"<strong>Address: </strong><span>"+L.a1+"</span><br>"}if(L.a2!=null&&L.a2!=""){M=M+"<span>"+L.a2+"</span><br>"}if(L.p!=null&&L.p!=""){M=M+"<strong>Pin: </strong><span>"+L.p+"</span><br>"}if(L.o!=null&&L.o!=""){M=M+"<strong>Phone: </strong><span>"+L.o+"</span><br>"}if(L.f!=null&&L.f!=""){M=M+"<strong>Fax: </strong><span>"+L.f+"</span><br>"}if(L.t!=null&&L.t!=""){M=M+"<strong>Timing: </strong><span>"+L.t+"</span><br>"}P.append(M);if(L.l&&L.l!=""&&L.g&&L.g!=""){D.m_count++;if(D.m_count==2){D.map.setZoom(10)}var I=new google.maps.LatLng(L.l,L.g);if(D.map==undefined){J.find("div.nomap").remove();var R={zoom:14,center:I,mapTypeControl:false,streetViewControl:false,zoomControl:true,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},mapTypeId:google.maps.MapTypeId.ROADMAP};D.map=new google.maps.Map(J.find("div.map")[0],R);var N=$('<img id="4" class="dock black-shadow expand_img" src="img/max.png"/>');var O='<div><div class="ovr top h1 o1"></div><div class="ovr top h2 o2"></div><div class="ovr top h3 o3"></div><div class="ovr top h4 o4"></div><div class="ovr top h5 o5"></div></div>';O=O+'<div><div class="ovr left w1 o1"></div><div class="ovr left w2 o2"></div><div class="ovr left w3 o3"></div><div class="ovr left w4 o4"></div><div class="ovr left w5 o5"></div></div>';N.appendTo(J.find("div.main_map"));$(O).appendTo(J.find("div.main_map"));N.click(function(){var X=J.find("div.scrollbar1");var S=J.find("div.main_map");var V=$(this);if(X.css("marginLeft")!="0px"){X.css("display","inline")}var U=J.find(".loc_c");var T=U.width();var W=S.height();X.animate({marginLeft:parseInt(X.css("marginLeft"),10)==0?-X.outerWidth():0},{duration:600,easing:"myEasing",step:function(Y,Z){S.width(T-X.width()-Y);if(Z.end<Z.start){S.height(W-Y/2)}else{S.height(W+(Z.start-Y)/2)}},complete:function(){if(X.css("marginLeft")=="0px"){V.attr("src",Snapdeal.getResourcePath("img/max.png"))}else{V.attr("src",Snapdeal.getResourcePath("img/min.png"));X.css("display","none")}google.maps.event.trigger(D.map,"resize")}})})}var K=new google.maps.Marker({position:I,clickable:true});K.setMap(D.map);P.mouseenter(function(S){D.addressMouseOver(S,K)});P.mouseleave(function(S){D.addressMouseOut(S,K)});P.click(function(S){D.addressClicked(S,K)})}else{P.mouseenter(function(S){D.addressMouseOver(S)});P.mouseleave(function(S){D.addressMouseOut(S)})}};this.addressMouseOver=function(J,I){if(I!=undefined){I.setAnimation(google.maps.Animation.BOUNCE)}else{if(D.map!=undefined){D.msgDiv.appendTo($(D.map.getDiv()))}}$(J.currentTarget).css("background-color","#DDEEF6")};this.addressMouseOut=function(J,I){if(I!=undefined){I.setAnimation(null)}else{if(D.map!=undefined){D.msgDiv.remove()}}$(J.currentTarget).css("background-color","#F9FAFA")};this.addressClicked=function(K,I){var J=I.getPosition();if(!D.map.getBounds().contains(I.getPosition())){D.map.setCenter(J)}}};Snapdeal.DealHighlights=function(){var F;var E=this;var G;var D;var B;var A;var C=false;this.init=function(H){E.page=H;$("ul#tabs li").click(function(I){E.tabsClicked(I)});$(".merchant-skip").click(function(I){E.closeDealDetail(I)})};this.closeDealDetail=function(H){$(".tab-content").hide();$("a.current").removeClass("current")};this.googleScriptLoaded=function(){$.ajax({url:"/json/dealbypageurl/vendoroutlets/"+E.dealUrl+"/"+E.zoneId,type:"GET",dataType:"json",success:function(H){E.ajaxResponse([H,E.block],E.a,E.updateLocationTab)}})};this.tabsClicked=function(I){var J=$(I.currentTarget).parents("ul#tabs").attr("class");var H=$(I.currentTarget).attr("class");E.block=$("#"+H+J+"Out");E.block.show();E.dealUrl=$('input.[name="pageUrl'+J+'"]').val();E.zoneId=$('input.[name="zoneId'+J+'"]').val();E.a=$(I.currentTarget).find("a");E.a.addClass("current");$(".tab-content").not(E.block).hide();$("ul#tabs a").not(E.a).removeClass("current");if(!E.a.hasClass("loaded")){E.page.showLoader(E.block);switch(H){case"d_h":$.ajax({url:"/json/dealbypageurl/highlight/"+E.dealUrl,type:"GET",dataType:"json",success:function(K){E.ajaxResponse([K,E.block],E.a,E.updateHighlightTab)}});break;case"d_l":if(!E.scriptLoaded){E.page.loadScript("http://maps.google.com/maps/api/js?sensor=false&callback=googleScriptLoaded")}else{E.googleScriptLoaded()}break;case"d_m":$.ajax({url:"/json/dealbypageurl/vendordetail/"+E.dealUrl,type:"GET",dataType:"json",success:function(K){E.ajaxResponse([K,E.block],E.a,E.updateVendorDetailTab)}});break;case"d_r":$.ajax({url:"/json/dealbypageurl/vendorreview/"+E.dealUrl,type:"GET",dataType:"json",success:function(K){E.ajaxResponse([K,E.block],E.a,E.updateVendorReviewTab)}});break;case"d_w":$.ajax({url:"/json/dealbypageurl/howitworks/"+E.dealUrl,type:"GET",dataType:"json",success:function(K){E.ajaxResponse([K,E.block],E.a,E.updateHowItWorksTab)}});break;case"d_c":$.ajax({url:"/json/dealbypageurl/menu/"+E.dealUrl,type:"GET",dataType:"json",success:function(K){E.ajaxResponse([K,E.block,E.dealUrl],E.a,E.updateMenuTab)}});break}}};this.ajaxResponse=function(I,H,J){if(!H.hasClass("loaded")){H.addClass("loaded");E.page.hideLoader(I[1]);J.apply(E,I)}};this.updateHighlightTab=function(J,K){var H="";if(J.d.f!=null){var I=K.find(".content-hightlight-area");var H='<div class="title-tab">The Fine Print</div>';if($.isArray(J.d.f)){$.each(J.d.f,function(L,M){H+=E.addHighlight(M)})}else{H+=E.addHighlight(J.d.f,H)}I.append(H)}if(J.d.h!=null){var I=K.find(".fineprint-area");var H='<div class="title-tab">Highlights</div>';if($.isArray(J.d.h)){$.each(J.d.h,function(L,M){H+=E.addHighlight(M)})}else{H+=E.addHighlight(J.d.h)}I.append(H)}};this.updateLocationTab=function(I,J){var H=new Snapdeal.DealLocation();H.init(I,J);$(".scrollbar1").tinyscrollbar()};this.updateVendorDetailTab=function(I,J){var H="";if(I.v!=null){H=H+'<h2 class="title-tab">'+I.v.n+"</h2>";if(I.v.w!=null&&I.v.w!=""){H=H+'<div class="clear"><a href="'+I.v.w+'" target="_blank">'+I.v.w+"</a></div>"}if(I.v.d!=null&&I.v.d!=""){H=H+'<div class="myContent">'+I.v.d+"</div>"}}J.append(H)};this.updateVendorReviewTab=function(I,J){var H="";if(I!=null&&$(I).length>0){H='<div class="title-tab">Reviews</div>';$.each(I,function(K,L){H=H+"<p></p>";if(L.vr.r!=null&&L.vr.r!=""){H=H+"<strong>"+L.vr.r+"</strong>";if(L.vr.s!=null&&L.vr.s!=""){H=H+"<i> - "+L.vr.s+"</i>"}}})}J.append(H)};this.updateHowItWorksTab=function(I,J){var H="";if(I.h.c!=null){H='<div class="title-tab">How it works</div>';if($.isArray(I.h.c)){$.each(I.h.c,function(K,L){if(L!=""){H=H+"<p>"+(K+1)+". "+L+"</p>"}})}else{if(I.h.c!=""){H=H+"<p>1. "+I.h.c+"</p>"}}}J.append(H)};this.updateMenuTab=function(J,K,H){var I="";if(J.m.c!=null){I='<div class="title-tab">Menu</div>';K.append(I);if($.isArray(J.m.c)){$.each(J.m.c,function(L,M){E.addMenucard(M,K,H)})}else{E.addMenucard(J.m.c,K,H)}}};this.addHighlight=function(I){var H="";if(I!=null&&I!=""){H=H+'<div class="fine-print png_bg">'+I+"</div>"}return H};this.addMenucard=function(J,K,H){if(J!=null&&J!=""){var L=$("<div/>").addClass("thumb");L.appendTo(K);var I=$("<img/>").attr("style","cursor:pointer;width:400px;height:260px;").attr("src",Snapdeal.getResourcePath(J));I.click(function(){E.openMenuPopup(Snapdeal.getStaticPath("/menuPopup/"+H))});I.appendTo(L)}};this.openMenuPopup=function(H){window.open(H,"_blank","toolbar=0,scrollbars=1,location=0,toolbar=0,status=0,menubar=0,resizable=1,width=750,height=430")}};Snapdeal.CountdownTimer=function(){var B=this;var D;var C;var A;this.init=function(F,G,H,E){B.timeout=G;B.timerCallback=H;B.callbackScope=E;B.countBack(F)};this.calcage=function(H,G,F){var E=((Math.floor(H/G))%F).toString();if(E.length<2){E="0"+E}return""+E+""};this.getHours=function(E){return B.calcage(E,3600000,10000)};this.getMinutes=function(E){return B.calcage(E,60000,60)};this.getSeconds=function(E){return B.calcage(E,1000,60)};this.countBack=function(E){if(E<0){return }if(B.callbackScope==null){B.timerCallback(E)}else{B.timerCallback.call(B.callbackScope,E)}setTimeout(function(){B.countBack((E-B.timeout))},B.timeout)}};Snapdeal.DealTimer=function(){var A=this;var B;var C;this.init=function(D,E){A.clock=D;A.timer=new Snapdeal.CountdownTimer();A.timer.init(E,1000,A.updateDealTimer,A)};this.updateDealTimer=function(D){if(D<0){A.clock.html(" --  :  --  : --")}A.clock.html(A.timer.getHours(D)+"&nbsp;:&nbsp;"+A.timer.getMinutes(D)+"&nbsp;:&nbsp;"+A.timer.getSeconds(D))}};function onRPXSuccess(){var A=window.location.href;if(A.indexOf("?")!=-1){window.location.href=A.substring(0,A.indexOf("?"))}else{window.location.reload()}}function onRPXFail(){var A=window.location.href;if(A.indexOf("?")!=-1){window.location.href=A.substring(0,A.indexOf("?"))+"?systemcode=503"}else{window.location.href=window.location.href+"?systemcode=503"}}jQuery.easing.myEasing=function(B,C,A,E,D){return E*Math.sqrt(1-(C=C/D-1)*C)+A};var page;var highlights;function googleScriptLoaded(){highlights.scriptLoaded=true;highlights.googleScriptLoaded()}$(document).ready(function(){page=new Snapdeal.HomePage();page.init()});
Snapdeal.signupWidget=function(){var C=null;var B=Snapdeal.getStaticPath("/login_security_check?");var E=Snapdeal.getStaticPath("/signupAjax");var A=Snapdeal.getStaticPath("/info/terms");var D=null;this.init=function(F){C=F;if(C.targetUrl){B+="spring-security-redirect="+C.targetUrl+"&"}D=encodeURI(B)};this.getHtml=function(){var F='<fieldset id="signin_menu"><h2>Login with</h2><ul class="network-login"><li><a onClick="return window.widget.fbLogin(\'https://www.facebook.com/dialog/oauth?client_id='+C.fbAppId+"&redirect_uri="+Snapdeal.getStaticPath("/")+'j_spring_facebook_security_check&scope=email,user_location,user_birthday,user_likes,publish_stream\');" href="javascript: void(0);"><div class="facebook"></div>Facebook</a></li><li><a onClick="return window.widget.rpxLogin(\'https://snapdeal.rpxnow.com/openid/start?openid_identifier=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid&#38;token_url='+D+'source=google\');" href="javascript: void(0);"><div class="google"></div>Gmail</a></li><li><a onClick="return window.widget.rpxLogin(\'https://snapdeal.rpxnow.com/openid/start?openid_identifier=http%3A%2F%2Fme.yahoo.com%2F&#38;force_reauth=true&#38;display=popup&#38;token_url='+D+'source=yahoo\');" href="javascript: void(0);"><div class="yahoo"></div>Yahoo Mail</a></li></ul><div class="assured">Be assured, we do not store your passwords.</div>';if(C.targetUrl){F+='<div id="targetUrl" style="display:none">'+C.targetUrl+"</div>"}if(C.showLoginWidget){F+=this.getLoginHtml()}else{F+=this.getSignupHtml()}this.getCSRFToken();F+="</fieldset>";return F};this.getLoginHtml=function(){var F='<div id="login"><div class="or">Or</div><h2>Sign in</h2><div class="popup-form"><div id="ajaxSigninResponse" class="error"></div><div id="prevSource" class="error" style="display:none">You have signed up through <strong><span id="pSource"></span></strong>. Please click the same icon to login again. </div><form method="post" id="ajaxSignin" action=""><div class="popup-form-row"><div class="leftside"><label for="username">E-mail *</label></div><input id="j_username" name="j_username" value="" title="username" tabindex="4" type="text" class="popup-form-textbox" onmouseout="return window.widget.checkPrevSource();"/></div><div class="popup-form-row"><div class="leftside"><label for="password">Password *</label></div><input id="j_password" name="j_password" value="" title="password" tabindex="5" type="password" class="popup-form-textbox" /></div><div class="popup-form-row"><input id="remember" name="_spring_security_remember_me" value="1" tabindex="7" type="checkbox" checked="checked"/><input type="hidden" name="ajax" value="true"/><input type="hidden" id="CSRFToken" name="CSRFToken" value=""/><label for="remember" class="remember">Remember me on this computer.</label></div><div class="popup-form-row" align="center"><input id="signin_submit" value="Sign In" tabindex="6" type="submit" onClick="return window.widget.loginFormValidate(); "></div></form></div><p class="forgot trigger" align="right""> <a id="resend_password_link" onClick="return window.widget.loadForgotPass();">Forgot your password?</a> </p><div class="toggle_container" style="display:none"><div id="forgotPasswordNavigationResponse" class="error"></div><form  id="forgotPasswordNavigation" name="forgotPasswordNavigation" method="post" action=""><input type="text" value="Enter email to reset it" name="fp_email" id="fp_email"onblur="if(this.value==\'\') { this.value=\'Enter email to reset it\'; }"onfocus="if(this.value==\'Enter email to reset it\') { this.value=\'\'; }" style="width: 65%;" /><input type="submit" value="Submit" class="button" style="width: 30%;" onClick="return window.widget.forgotPassword();"/></form></div></div>';return F};this.getSignupHtml=function(){var F='<div id="signup"><div class="or">Or</div><h2>Sign up</h2><div class="popup-form"><div id="ajaxSignupResponse" class="error"></div><form method="post" id="ajaxSignup" action=""><div class="popup-form-row"><div class="leftside"><label for="username">E-mail *</label></div><input id="j_username" name="j_username" value="" title="username" tabindex="4" type="text" class="popup-form-textbox"/></div><div class="popup-form-row"><div class="leftside"><label for="password">Password *</label></div><input id="j_password" name="j_password" value="" title="password" tabindex="5" type="password" class="popup-form-textbox" /></div><div class="popup-form-row"><div class="leftside"><label for="password">Confirm Password *</label></div><input id="j_confpassword" name="j_confpassword" value="" title="password" tabindex="5" type="password" class="popup-form-textbox" /></div><div class="popup-form-row"><input type="hidden" name="ajax" value="true"/> <input type="hidden" id="CSRFToken" name="CSRFToken" value=""/><input  type="checkbox" class="checkbox" id="agree" name="agree" />';if(C.source){F+='<input type="hidden" id="j_source" name="j_source" value="'+C.source+'"/>'}if(C.targetUrl){F+='<input type="hidden" id="j_targetUrl" name="j_targetUrl" value="'+C.targetUrl+'"/>'}F+='<label for="agree" class="remember">I have read and I agree to the <a href="'+A+'" target="_blank">Terms of use.</a></label><br/><label for="agree" generated="true" class="error" style="display: none;">Please accept our policy</label></div><div class="popup-form-row" align="center"><input id="signup_submit" value="Sign Up" tabindex="6" type="submit" onClick="return window.widget.signupFormValidate();"></div></form></div></div>';return F};this.loginFormValidate=function(){$("#ajaxSignin").validate({rules:{j_username:{required:true,email:true},j_password:{required:true}},messages:{j_username:"Please enter a valid email address",j_password:{required:"Please provide a password"}},submitHandler:function(F){$.ajax({type:"POST",dataType:"json",url:B,data:$(F).serialize(),success:function(G){return window.widget.loginCallback(G)}})}})};this.loginCallback=function(G){if(G.status=="success"){var F=window.location.href;if(G.items!=undefined&&G.items.targetUrl!=null&&G.items.targetUrl!=""){F=G.items.targetUrl}$("#ajaxSignin").clearForm();$("#signin_menu").hide();if(F.indexOf("?")==-1){F+="?"}else{F+="&"}window.location.href=F+"loginSuccess=success"}else{$("#ajaxSigninResponse").html(G.message)}};this.signupFormValidate=function(){$("#ajaxSignup").validate({rules:{j_username:{required:true,email:true},j_password:{required:true,minlength:6},j_confpassword:{required:true,minlength:6,equalTo:"#j_password"},agree:"required"},messages:{j_username:"Please enter a valid email address",j_password:{required:"Please provide a password",minlength:"Your password must be at least 6 characters long"},j_confpassword:{required:"Please provide a confirm password",minlength:"Your confirm password must be at least 6 characters long",equalTo:"Please enter the same password as above"},agree:"Please accept our policy"},submitHandler:function(F){$.ajax({type:"POST",dataType:"json",data:$(F).serialize(),url:E,success:function(G){return window.widget.signupCallback(G)}})}})};this.signupCallback=function(H){var G=window.location.href;if(H.status=="success"){$("#signin_menu").hide();var F=$("#j_username").val();$("#ajaxSignup").clearForm();if(G.indexOf("?")==-1){G+="?"}else{G+="&"}window.location.href=G+"email="+F+"&systemcode=103&msg=signup"}else{$("#ajaxSignupResponse").html(H.message)}};this.rpxLogin=function(F){loginWindow=window.open(F,"OAuthLogin","menubar=yes,resizable=yes,scrollbars=yes,width=600,height=450,left=150,top=150");return false};this.fbLogin=function(F){loginWindow=window.open(F,"OAuthLogin","menubar=yes,resizable=yes,scrollbars=yes,width=850,height=550,left=100,top=100");return false};this.loadLogin=function(){var F=$("#targetUrl").html()?"/ajaxLogin?targetUrl="+$("#targetUrl").html():"/ajaxLogin";$.ajax({url:F,type:"POST",dataType:"json",success:function(G){window.widget.init(G);$("#signin_box").html(window.widget.getHtml());$("fieldset#signin_menu").show("fast");$(".signin").toggleClass("menu-open",true)}});return false};this.loadSignup=function(){var F=$("#targetUrl").html()?"/ajaxSignup?targetUrl="+$("#targetUrl").html():"/ajaxSignup";$.ajax({url:F,type:"POST",dataType:"json",success:function(G){$("fieldset#signin_menu").hide("fast");window.widget.init(G);$("#signin_box").html(window.widget.getHtml());$("fieldset#signin_menu").show("fast");$(".signin").toggleClass("menu-open",true)}});return false};this.loadForgotPass=function(){$(".toggle_container").show();return false};this.forgotPassword=function(){var F="/forgotPassword?";F+="email="+$("#fp_email").val();$.ajax({url:F,type:"POST",dataType:"json",success:function(G){$("#forgotPasswordNavigationResponse").html(G.message)}});return false};this.checkPrevSource=function(){var F="/checkSource?";F+="email="+$("#j_username").val()+"&cs="+$("#CSRFToken").val();$.ajax({url:F,type:"POST",dataType:"json",success:function(G){if(G.status=="success"){$("#pSource").html(G.message);$("#ajaxSigninResponse").hide();$("#prevSource").show()}}});return false};this.getCSRFToken=function(){var F="/checkCSRF";$.ajax({url:F,type:"POST",dataType:"json",success:function(G){if(G.status=="success"){$("#CSRFToken").val(G.message)}}});return false}};
Snapdeal.checkoutPageSignupWidget=function(){var C=null;var B=Snapdeal.getStaticPath("/login_security_check?");var E=Snapdeal.getStaticPath("/signupAjax");var A=Snapdeal.getStaticPath("/info/terms");var D=null;this.init=function(F){C=F;if(C.targetUrl){B+="spring-security-redirect="+C.targetUrl+"&"}D=encodeURI(B)};this.getHtml=function(){var F='<div id="ajaxSigninResponse" class="errorMessage"></div><form method="post" id="ajaxSignin" action=""><label for="username">Username or email</label> <input id="j_username" name="j_username" value="" title="username" tabindex="4" type="text" class="popup_input" onmouseout="return window.widget.checkPrevSource();"><p><label for="password">Password</label> <input id="j_password" name="j_password" autocomplete="off" value="" title="password" tabindex="5" type="password" class="popup_input"></p><div style="overflow:hidden; margin-bottom:5px"><p class="sign-button"><input class="checkout-signin_buy_button" id="signin_submit" value="Sign in" tabindex="6" type="submit" onClick="return window.widget.loginFormValidate();"></p><p class="remember"><input id="remember" name="_spring_security_remember_me" value="1" tabindex="7" type="checkbox"> <input type="hidden" name="ajax" value="true" /> <label for="remember">Remember me</label></p></div><p class="forgot trigger2"><a id="resend_password_link" onClick="return window.widget.loadForgotPass();">Forgot your password?</a></p><div class="toggle_container2" style="display:none"><div id="forgotPasswordNavigationResponse" class="error"></div><input type="text" value="Enter email to reset it" name="email_forget" id="fp_email" onblur="if(this.value==\'\') {this.value=\'Enter email to reset it\'; }"onfocus="if(this.value==\'Enter email to reset it\') {this.value=\'\'; }" /> <input type="button" value="Submit" onClick="return window.widget.forgotPassword();" class="button" /></div></form><div class="wrapper2"><div class="other_log"><label class="black_bold">login with:</label></div><ul class="network-login"><a class="sprite-icon rpx icon-facebook" onClick="return window.widget.fbLogin(\'https://www.facebook.com/dialog/oauth?client_id='+C.fbAppId+"&redirect_uri="+Snapdeal.getStaticPath("/")+'j_spring_facebook_security_check&scope=email,user_location,user_birthday\');" href="javascript: void(0);"><div class="facebook"></div></a><a class="sprite-icon rpx icon-google" onClick="return window.widget.rpxLogin(\'https://snapdeal.rpxnow.com/openid/start?openid_identifier=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid&#38;token_url='+D+'source=google\');" href="javascript: void(0);"><div class="google"></div></a><a class="sprite-icon rpx icon-yahoo" onClick="return window.widget.rpxLogin(\'https://snapdeal.rpxnow.com/openid/start?openid_identifier=http%3A%2F%2Fme.yahoo.com%2F&#38;force_reauth=true&#38;display=popup&#38;token_url='+D+'source=yahoo\');" href="javascript: void(0);"><div class="yahoo"></div></a></ul><div class="assured">Be assured, we do not store your passwords.</div>';if(C.targetUrl){F+='<div id="targetUrl" style="display:none">'+C.targetUrl+"</div>"}return F};this.getLoginHtml=function(){var F='<div id="login"><div class="or">Or</div><h2>Sign in</h2><div class="popup-form"><div id="ajaxSigninResponse" class="error"></div><div id="prevSource" class="error" style="display:none">You have signed up through <strong><span id="pSource"></span></strong>. Please click the same icon to login again. </div><form method="post" id="ajaxSignin" action=""><div class="popup-form-row"><div class="leftside"><label for="username">E-mail *</label></div><input id="j_username" name="j_username" value="" title="username" tabindex="4" type="text" class="popup-form-textbox" onmouseout="return window.widget.checkPrevSource();"/></div><div class="popup-form-row"><div class="leftside"><label for="password">Password *</label></div><input id="j_password" name="j_password" value="" title="password" tabindex="5" type="password" class="popup-form-textbox" /></div><div class="popup-form-row"><input id="remember" name="_spring_security_remember_me" value="1" tabindex="7" type="checkbox" /><input type="hidden" name="ajax" value="true"/><label for="remember" class="remember">Remember me on this computer.</label></div><div class="popup-form-row" align="center"><input id="signin_submit" value="Sign In" tabindex="6" type="submit" onClick="return window.widget.loginFormValidate(); "></div></form></div><p class="forgot trigger" align="right""> <a id="resend_password_link" onClick="return window.widget.loadForgotPass();">Forgot your password?</a> </p><div class="toggle_container" style="display:none"><div id="forgotPasswordNavigationResponse" class="error"></div><form  id="forgotPasswordNavigation" name="forgotPasswordNavigation" method="post" action=""><input type="text" value="Enter email to reset it" name="fp_email" id="fp_email"onblur="if(this.value==\'\') { this.value=\'Enter email to reset it\'; }"onfocus="if(this.value==\'Enter email to reset it\') { this.value=\'\'; }" style="width: 65%;" /><input type="submit" value="Submit" class="button" style="width: 30%;" onClick="return window.widget.forgotPassword();"/></form></div></div>';return F};this.getSignupHtml=function(){var F='<div id="signup"><div class="or">Or</div><h2>Sign up</h2><div class="popup-form"><div id="ajaxSignupResponse" class="error"></div><form method="post" id="ajaxSignup" action=""><div class="popup-form-row"><div class="leftside"><label for="username">E-mail *</label></div><input id="j_username" name="j_username" value="" title="username" tabindex="4" type="text" class="popup-form-textbox"/></div><div class="popup-form-row"><div class="leftside"><label for="password">Password *</label></div><input id="j_password" name="j_password" value="" title="password" tabindex="5" type="password" class="popup-form-textbox" /></div><div class="popup-form-row"><div class="leftside"><label for="password">Confirm Password *</label></div><input id="j_confpassword" name="j_confpassword" value="" title="password" tabindex="5" type="password" class="popup-form-textbox" /></div><div class="popup-form-row"><input type="hidden" name="ajax" value="true"/><input  type="checkbox" class="checkbox" id="agree" name="agree" />';if(C.source){F+='<input type="hidden" id="j_source" name="j_source" value="'+C.source+'"/>'}if(C.targetUrl){F+='<input type="hidden" id="j_targetUrl" name="j_targetUrl" value="'+C.targetUrl+'"/>'}F+='<label for="agree" class="remember">I have read and I agree to the <a href="'+A+'" target="_blank">Terms of use.</a></label><br/><label for="agree" generated="true" class="error" style="display: none;">Please accept our policy</label></div><div class="popup-form-row" align="center"><input id="signup_submit" value="Sign Up" tabindex="6" type="submit" onClick="return window.widget.signupFormValidate();"></div></form></div></div>';return F};this.loginFormValidate=function(){$("#ajaxSignin").validate({rules:{j_username:{required:true,email:true},j_password:{required:true}},messages:{j_username:"Please enter a valid email address",j_password:{required:"Please provide a password"}},submitHandler:function(F){$.ajax({type:"POST",dataType:"json",url:B,data:$(F).serialize(),success:function(G){return window.widget.loginCallback(G)}})}})};this.loginCallback=function(G){if(G.status=="success"){var F=window.location.href;if(G.items!=undefined&&G.items.targetUrl!=null&&G.items.targetUrl!=""){F=G.items.targetUrl}$("#ajaxSignin").clearForm();$("#signin_menu").hide();if(F.indexOf("?")==-1){F+="?"}else{F+="&"}window.location.href=F+"loginSuccess=success"}else{$("#ajaxSigninResponse").html(G.message)}};this.rpxLogin=function(F){loginWindow=window.open(F,"OAuthLogin","menubar=yes,resizable=yes,scrollbars=yes,width=600,height=450,left=150,top=150");return false};this.fbLogin=function(F){loginWindow=window.open(F,"OAuthLogin","menubar=yes,resizable=yes,scrollbars=yes,width=850,height=550,left=100,top=100");return false};this.loadLogin=function(){var F=$("#targetUrl").html()?"/ajaxLogin?targetUrl="+$("#targetUrl").html():"/ajaxLogin";$.ajax({url:F,type:"POST",dataType:"json",success:function(G){window.widget.init(G);$("#signin_box").html(window.widget.getHtml());$("fieldset#signin_menu").show("fast");$(".signin").toggleClass("menu-open",true)}});return false};this.loadForgotPass=function(){$(".toggle_container2").show();return false};this.forgotPassword=function(){var F="/forgotPassword?";F+="email="+$("#fp_email").val();$.ajax({url:F,type:"POST",dataType:"json",success:function(G){$("#forgotPasswordNavigationResponse").html(G.message)}});return false};this.checkPrevSource=function(){var F="/checkSource?";F+="email="+$("#j_username").val();$.ajax({url:F,type:"POST",dataType:"json",success:function(G){if(G.status=="success"){$("#pSource").html(G.message);$("#ajaxSigninResponse").hide();$("#prevSource").show()}}});return false}};
