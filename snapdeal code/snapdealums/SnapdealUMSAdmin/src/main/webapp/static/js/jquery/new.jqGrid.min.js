eval(function(J,G,H,L,K,I){K=function(A){return(A<G?"":K(parseInt(A/G)))+((A=A%G)>35?String.fromCharCode(A+29):A.toString(36))};if(!"".replace(/^/,String)){while(H--){I[K(H)]=L[H]||K(H)}L=[function(A){return I[A]}];K=function(){return"\\w+"};H=1}while(H--){if(L[H]){J=J.replace(new RegExp("\\b"+K(H)+"\\b","g"),L[H])}}return J}('D=(6($){6 D(2A,w){j(1T(w)!="2D")w={};$.2C(5,D.1Y,w);5.n=$(2A);5.1Q("1l","L","11","10","E");5.1P();5.E();5.L()};D.1Y={1G:["2V","2M","2S","2Q","2g","2N","2O","2P","2R","2L","2G","2F"],1v:["2H","2I","2K","2J","2g","2T","2U","36","35","3a","3b","3d"],1F:["3c","32","31","2W","2E","2X","2Y"],N:1};D.30={1P:6(){b R=$(\'<p h="2Z">\'+\'<m h="P 17" Y="[1g-1U]">&#2u;</m>\'+\' <m h="K"></m> \'+\'<m h="P 1a" Y="[1g-2h]">&#2n;</m>\'+\'</p>\');5.2v=$(".K",R);$(".17",R).F(5.u(6(){5.Q(-1)}));$(".1a",R).F(5.u(6(){5.Q(1)}));b V=$(\'<p h="3e">\'+\'<m h="P 17" Y="[2x+1g-1U]">&#2u;</m>\'+\' <m h="2t"></m> \'+\'<m h="P 1a" Y="[2x+1g-2h]">&#2n;</m>\'+\'</p>\');5.2q=$(".2t",V);$(".17",V).F(5.u(6(){5.Q(-12)}));$(".1a",V).F(5.u(6(){5.Q(12)}));b T=$(\'<Z h="T"></Z>\').S(R,V);b 15="<26><1W><1b>";$(5.1S(5.1F)).2k(6(){15+="<2l>"+5+"</2l>"});15+="</1b></1W><o></o></26>";5.x=5.O=$(\'<Z h="3m"></Z>\').S(T,15).3I(5.n);j($.2B.3K&&$.2B.3L<7){5.19=$(\'<2m h="3H" 3y="0" 3B="#"></2m>\').3F(5.x);5.O=5.O.3E(5.19);$(".P",T).23(6(){$(5).1d("1h")});$(".P",T).2f(6(){$(5).1t("1h")})};5.o=$("o",5.x);5.n.25(5.u(6(){5.E()}));5.E()},1D:6(8){b J=l g(8.f(),8.c(),1);j(!5.v||!(5.v.f()==J.f()&&5.v.c()==J.c())){5.v=J;b C=5.C(8),1e=5.1e(8);b 2o=5.29(C,1e);b M="";1f(b i=0;i<=2o;i++){b A=l g(C.f(),C.c(),C.q()+i,12,2i);j(5.2e(A))M+="<1b>";j(A.c()==8.c()){M+=\'<y h="1j" 8="\'+5.U(A)+\'">\'+A.q()+\'</y>\'}2j{M+=\'<y h="3J" 8="\'+5.U(A)+\'">\'+A.q()+\'</y>\'};j(5.2p(A))M+="</1b>"};5.o.1y().S(M);5.2v.1y().S(5.1J(8));5.2q.1y().S(5.v.f());$(".1j",5.o).F(5.u(6(e){5.1x($(e.1R).3D("8"))}));$("y[8="+5.U(l g())+"]",5.o).1d("3z");$("y.1j",5.o).23(6(){$(5).1d("1h")});$("y.1j",5.o).2f(6(){$(5).1t("1h")})};$(\'.1s\',5.o).1t("1s");$(\'y[8=\'+5.1w+\']\',5.o).1d("1s")},E:6(8){j(1T(8)=="3A"){8=5.2d(5.n.1Z())};j(!8)8=l g();5.r=8;5.1w=5.U(5.r);5.1D(5.r)},1x:6(20){5.n.1Z(20).25();5.L()},1l:6(){5.O.18("24","3G");$([21,1k.1c]).F(5.11);5.n.1r("28",5.1l);$(1k.1c).1K(5.10);5.2b()},L:6(){5.O.18("24","3M");$([21,1k.1c]).1r("F",5.11);5.n.28(5.1l);$(1k.1c).1r("1K",5.10)},11:6(e){j(e.1R!=5.n[0]&&!5.1L(e)){5.L()}},1L:6(e){b k=5.x.3C();k.1N=k.16+5.x.2y();k.1O=k.14+5.x.1H();a e.1M<k.1O&&e.1M>k.14&&e.22<k.1N&&e.22>k.16},10:6(e){3w(e.3f){t 9:t 27:5.L();a;z;t 13:5.1x(5.1w);z;t 33:5.1B(e.2w?-12:-1);z;t 34:5.1B(e.2w?12:1);z;t 38:5.W(-7);z;t 3x:5.W(7);z;t 37:5.W(-1);z;t 39:5.W(1);z;3k:a}e.3j()},2d:6(2c){b X;j(X=2c.3g(/^(\\d{1,2}) ([^\\s]+) (\\d{4,4})$/)){a l g(X[3],5.1X(X[2]),X[1],12,2i)}2j{a 3h}},U:6(8){a 8.q()+" "+5.1v[8.c()]+" "+8.f()},2b:6(){b k=5.n.k();5.O.18({14:k.14+5.n.1H(),16:k.16});j(5.19){5.19.18({3i:5.x.2y(),3n:5.x.1H()})}},W:6(B){b I=l g(5.r.f(),5.r.c(),5.r.q()+B);5.E(I)},1B:6(B){b I=l g(5.r.f(),5.r.c()+B,5.r.q());j(I.c()==5.r.c()+B+1){I.3o(0)};5.E(I)},Q:6(B){b J=l g(5.v.f(),5.v.c()+B,5.v.q());5.1D(J)},1J:6(8){a 5.1G[8.c()]},u:6(1p){b 1I=5;a 6(){a 1p.3u(1I,1n)}},1Q:6(){1f(b i=0;i<1n.1q;i++){5[1n[i]]=5.u(5[1n[i]])}},1m:6(1E,1V){1f(b i=0;i<1E.1q;i++){j(1V==1E[i])a i}},3v:6(K){a 5.1m(5.1G,K)},1X:6(K){a 5.1m(5.1v,K)},3t:6(2z){a 5.1m(5.1F,2z)},29:6(H,G){H=g.2s(H.f(),H.c(),H.q());G=g.2s(G.f(),G.c(),G.q());a(G-H)/3s},1u:6(2r,8,1C){b 2a=1C*(3p.3q(8.1o()-2r-(1C*7))%7);a l g(8.f(),8.c(),8.q()+2a)},C:6(8){a 5.1u(5.N,l g(8.f(),8.c()),-1)},1e:6(8){a 5.1u((5.N-1)%7,l g(8.f(),8.c()+1,0),1)},2e:6(8){a 8.1o()==5.N},2p:6(8){a 8.1o()==(5.N-1)%7},1S:6(1z){b 1A=[];1f(b i=0;i<1z.1q;i++){1A[i]=1z[(i+5.N)%7]};a 1A}};$.1p.1i=6(w){a 5.2k(6(){l D(5,w)})};$.1i={3r:6(w){$("n.1i").1i(w)}};a D})(3l);',62,235,"|||||this|function||date||return|var|getMonth||event|getFullYear|Date|class||if|offset|new|span|input|tbody||getDate|selectedDate||case|bindToObj|currentMonth|opts|dateSelector|td|break|currentDay|amount|rangeStart|DateInput|selectDate|click|end|start|newDate|newMonth|month_name|hide|dayCells|start_of_week|rootLayers|button|moveMonthBy|monthNav|append|nav|dateToString|yearNav|moveDateBy|matches|title|div|keydownHandler|hideIfClickOutside|||top|tableShell|left|prev|css|ieframe|next|tr|body|addClass|rangeEnd|for|Page|hover|date_input|selectable_day|document|show|indexFor|arguments|getDay|fn|length|unbind|selected|removeClass|changeDayTo|short_month_names|selectedDateString|changeInput|empty|days|newDays|moveDateMonthBy|direction|selectMonth|array|short_day_names|month_names|outerHeight|self|monthName|keydown|insideSelector|pageY|right|bottom|build|bindMethodsToObj|target|adjustDays|typeof|Up|value|thead|shortMonthNum|DEFAULT_OPTS|val|dateString|window|pageX|mouseover|display|change|table||focus|daysBetween|difference|setPosition|string|stringToDate|isFirstDayOfWeek|mouseout|May|Down|00|else|each|th|iframe|187|numDays|isLastDayOfWeek|yearNameSpan|dayOfWeek|UTC|year_name|171|monthNameSpan|ctrlKey|Ctrl|outerWidth|day_name|el|browser|extend|object|Thu|December|November|Jan|Feb|Apr|Mar|October|February|June|July|August|April|September|March|Jun|Jul|January|Wed|Fri|Sat|month_nav|prototype|Tue|Mon|||Sep|Aug||||Oct|Nov|Sun|Dec|year_nav|keyCode|match|null|width|preventDefault|default|jQuery|date_selector|height|setDate|Math|abs|initialize|86400000|shortDayNum|apply|monthNum|switch|40|frameborder|today|undefined|src|position|attr|add|insertBefore|block|date_selector_ieframe|insertAfter|unselected_month|msie|version|none".split("|"),0,{}));
(function(A){A.jgrid={defaults:{recordtext:"View {0} - {1} of {2}",emptyrecords:"No records to view",loadtext:"Loading...",pgtext:"Page {0} of {1}"},search:{caption:"Search...",Find:"Find",Reset:"Reset",odata:["equal","not equal","less","less or equal","greater","greater or equal","begins with","does not begin with","is in","is not in","ends with","does not end with","contains","does not contain"],groupOps:[{op:"AND",text:"all"},{op:"OR",text:"any"}],matchText:" match",rulesText:" rules"},edit:{addCaption:"Add Record",editCaption:"Edit Record",bSubmit:"Submit",bCancel:"Cancel",bClose:"Close",saveData:"Data has been changed! Save changes?",bYes:"Yes",bNo:"No",bExit:"Cancel",msg:{required:"Field is required",number:"Please, enter valid number",minValue:"value must be greater than or equal to ",maxValue:"value must be less than or equal to",email:"is not a valid e-mail",integer:"Please, enter valid integer value",date:"Please, enter valid date value",url:"is not a valid URL. Prefix required ('http://' or 'https://')",nodefined:" is not defined!",novalue:" return value is required!",customarray:"Custom function should return array!",customfcheck:"Custom function should be present in case of custom checking!"}},view:{caption:"View Record",bClose:"Close"},del:{caption:"Delete",msg:"Delete selected record(s)?",bSubmit:"Delete",bCancel:"Cancel"},nav:{edittext:"",edittitle:"Edit selected row",addtext:"",addtitle:"Add new row",deltext:"",deltitle:"Delete selected row",searchtext:"",searchtitle:"Find records",refreshtext:"",refreshtitle:"Reload Grid",alertcap:"Warning",alerttext:"Please, select row",viewtext:"",viewtitle:"View selected row"},col:{caption:"Select columns",bSubmit:"Ok",bCancel:"Cancel"},errors:{errcap:"Error",nourl:"No url is set",norecords:"No records to process",model:"Length of colNames <> colModel!"},formatter:{integer:{thousandsSeparator:" ",defaultValue:"0"},number:{decimalSeparator:".",thousandsSeparator:" ",decimalPlaces:2,defaultValue:"0.00"},currency:{decimalSeparator:".",thousandsSeparator:" ",decimalPlaces:2,prefix:"",suffix:"",defaultValue:"0.00"},date:{dayNames:["Sun","Mon","Tue","Wed","Thr","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],AmPm:["am","pm","AM","PM"],S:function(B){return B<11||B>13?["st","nd","rd","th"][Math.min((B-1)%10,3)]:"th"},srcformat:"Y-m-d",newformat:"d/m/Y",masks:{ISO8601Long:"Y-m-d H:i:s",ISO8601Short:"Y-m-d",ShortDate:"n/j/Y",LongDate:"l, F d, Y",FullDateTime:"l, F d, Y g:i:s A",MonthDay:"F d",ShortTime:"g:i A",LongTime:"g:i:s A",SortableDateTime:"Y-m-d\\TH:i:s",UniversalSortableDateTime:"Y-m-d H:i:sO",YearMonth:"F, Y"},reformatAfterEdit:false},baseLinkUrl:"",showAction:"",target:"",checkbox:{disabled:true},idName:"id"}}})(jQuery);
(function(b){b.jgrid=b.jgrid||{};b.extend(b.jgrid,{htmlDecode:function(f){if(f&&(f=="&nbsp;"||f=="&#160;"||f.length==1&&f.charCodeAt(0)==160)){return""}return !f?f:String(f).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},htmlEncode:function(f){return !f?f:String(f).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},format:function(f){var i=b.makeArray(arguments).slice(1);if(f===undefined){f=""}return f.replace(/\{(\d+)\}/g,function(h,c){return i[c]})},getCellIndex:function(f){f=b(f);if(f.is("tr")){return -1}f=(!f.is("td")&&!f.is("th")?f.closest("td,th"):f)[0];if(b.browser.msie){return b.inArray(f,f.parentNode.cells)}return f.cellIndex},stripHtml:function(f){f+="";var i=/<("[^"]*"|'[^']*'|[^'">])*>/gi;if(f){return(f=f.replace(i,""))&&f!=="&nbsp;"&&f!=="&#160;"?f.replace(/\"/g,"'"):""}else{return f}},stripPref:function(f,i){var h=Object.prototype.toString.call(f).slice(8,-1);if(h=="String"||h=="Number"){f=String(f);i=f!=""?String(i).replace(String(f),""):i}return i},stringToDoc:function(f){var i;if(typeof f!=="string"){return f}try{i=(new DOMParser).parseFromString(f,"text/xml")}catch(h){i=new ActiveXObject("Microsoft.XMLDOM");i.async=false;i.loadXML(f)}return i&&i.documentElement&&i.documentElement.tagName!="parsererror"?i:null},parse:function(f){if(f.substr(0,9)=="while(1);"){f=f.substr(9)}if(f.substr(0,2)=="/*"){f=f.substr(2,f.length-4)}f||(f="{}");return b.jgrid.useJSON===true&&typeof JSON==="object"&&typeof JSON.parse==="function"?JSON.parse(f):eval("("+f+")")},parseDate:function(f,i){var h={m:1,d:1,y:1970,h:0,i:0,s:0},c,g,k;c=/[\\\/:_;.,\t\T\s-]/;if(i&&i!==null&&i!==undefined){i=b.trim(i);i=i.split(c);f=f.split(c);var l=b.jgrid.formatter.date.monthNames,a=b.jgrid.formatter.date.AmPm,r=function(x,y){if(x===0){if(y==12){y=0}}else{if(y!=12){y+=12}}return y};c=0;for(g=f.length;c<g;c++){if(f[c]=="M"){k=b.inArray(i[c],l);if(k!==-1&&k<12){i[c]=k+1}}if(f[c]=="F"){k=b.inArray(i[c],l);if(k!==-1&&k>11){i[c]=k+1-12}}if(f[c]=="a"){k=b.inArray(i[c],a);if(k!==-1&&k<2&&i[c]==a[k]){i[c]=k;h.h=r(i[c],h.h)}}if(f[c]=="A"){k=b.inArray(i[c],a);if(k!==-1&&k>1&&i[c]==a[k]){i[c]=k-2;h.h=r(i[c],h.h)}}if(i[c]!==undefined){h[f[c].toLowerCase()]=parseInt(i[c],10)}}h.m=parseInt(h.m,10)-1;c=h.y;if(c>=70&&c<=99){h.y=1900+h.y}else{if(c>=0&&c<=69){h.y=2000+h.y}}}return new Date(h.y,h.m,h.d,h.h,h.i,h.s,0)},jqID:function(f){return String(f).replace(/[!"#$%&'()*+,.\/:;<=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(f){return(f?f:b.jgrid.uidPref)+b.jgrid.guid++},getAccessor:function(f,i){var h,c,g=[],k;if(typeof i==="function"){return i(f)}h=f[i];if(h===undefined){try{if(typeof i==="string"){g=i.split(".")}if(k=g.length){for(h=f;h&&k--;){c=g.shift();h=h[c]}}}catch(l){}}return h},ajaxOptions:{},from:function(f){return new function(i,h){if(typeof i=="string"){i=b.data(i)}var c=this,g=i,k=true,l=false,a=h,r=/[\$,%]/g,x=null,y=null,H=0,L=false,M="",P=[],U=true;if(typeof i=="object"&&i.push){if(i.length>0){U=typeof i[0]!="object"?false:true}}else{throw"data provides is not an array"}this._hasData=function(){return g===null?false:g.length===0?false:true};this._getStr=function(o){var n=[];l&&n.push("jQuery.trim(");n.push("String("+o+")");l&&n.push(")");k||n.push(".toLowerCase()");return n.join("")};this._strComp=function(o){return typeof o=="string"?".toString()":""};this._group=function(o,n){return{field:o.toString(),unique:n,items:[]}};this._toStr=function(o){if(l){o=b.trim(o)}k||(o=o.toLowerCase());return o=o.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"')};this._funcLoop=function(o){var n=[];b.each(g,function(s,D){n.push(o(D))});return n};this._append=function(o){var n;if(a===null){a=""}else{a+=M===""?" && ":M}for(n=0;n<H;n++){a+="("}if(L){a+="!"}a+="("+o+")";L=false;M="";H=0};this._setCommand=function(o,n){x=o;y=n};this._resetNegate=function(){L=false};this._repeatCommand=function(o,n){if(x===null){return c}if(o!==null&&n!==null){return x(o,n)}if(y===null){return x(o)}if(!U){return x(o)}return x(y,o)};this._equals=function(o,n){return c._compare(o,n,1)===0};this._compare=function(o,n,s){if(s===undefined){s=1}if(o===undefined){o=null}if(n===undefined){n=null}if(o===null&&n===null){return 0}if(o===null&&n!==null){return 1}if(o!==null&&n===null){return -1}if(!k&&typeof o!=="number"&&typeof n!=="number"){o=String(o).toLowerCase();n=String(n).toLowerCase()}if(o<n){return -s}if(o>n){return s}return 0};this._performSort=function(){if(P.length!==0){g=c._doSort(g,0)}};this._doSort=function(o,n){var s=P[n].by,D=P[n].dir,T=P[n].type,J=P[n].datefmt;if(n==P.length-1){return c._getOrder(o,s,D,T,J)}n++;s=c._getGroup(o,s,D,T,J);D=[];for(T=0;T<s.length;T++){J=c._doSort(s[T].items,n);for(var C=0;C<J.length;C++){D.push(J[C])}}return D};this._getOrder=function(o,n,s,D,T){var J=[],C=[],ca=s=="a"?1:-1,V,fa;if(D===undefined){D="text"}fa=D=="float"||D=="number"||D=="currency"||D=="numeric"?function(R){R=parseFloat(String(R).replace(r,""));return isNaN(R)?0:R}:D=="int"||D=="integer"?function(R){return R?parseFloat(String(R).replace(r,"")):0}:D=="date"||D=="datetime"?function(R){return b.jgrid.parseDate(T,R).getTime()}:b.isFunction(D)?D:function(R){R||(R="");return b.trim(String(R).toUpperCase())};b.each(o,function(R,$){V=n!==""?b.jgrid.getAccessor($,n):$;if(V===undefined){V=""}V=fa(V,$);C.push({vSort:V,index:R})});C.sort(function(R,$){R=R.vSort;$=$.vSort;return c._compare(R,$,ca)});D=0;for(var oa=o.length;D<oa;){s=C[D].index;J.push(o[s]);D++}return J};this._getGroup=function(o,n,s,D,T){var J=[],C=null,ca=null,V;b.each(c._getOrder(o,n,s,D,T),function(fa,oa){V=b.jgrid.getAccessor(oa,n);if(V===undefined){V=""}if(!c._equals(ca,V)){ca=V;C!==null&&J.push(C);C=c._group(n,V)}C.items.push(oa)});C!==null&&J.push(C);return J};this.ignoreCase=function(){k=false;return c};this.useCase=function(){k=true;return c};this.trim=function(){l=true;return c};this.noTrim=function(){l=false;return c};this.execute=function(){var o=a,n=[];if(o===null){return c}b.each(g,function(){eval(o)&&n.push(this)});g=n;return c};this.data=function(){return g};this.select=function(o){c._performSort();if(!c._hasData()){return[]}c.execute();if(b.isFunction(o)){var n=[];b.each(g,function(s,D){n.push(o(D))});return n}return g};this.hasMatch=function(){if(!c._hasData()){return false}c.execute();return g.length>0};this.andNot=function(o,n,s){L=!L;return c.and(o,n,s)};this.orNot=function(o,n,s){L=!L;return c.or(o,n,s)};this.not=function(o,n,s){return c.andNot(o,n,s)};this.and=function(o,n,s){M=" && ";if(o===undefined){return c}return c._repeatCommand(o,n,s)};this.or=function(o,n,s){M=" || ";if(o===undefined){return c}return c._repeatCommand(o,n,s)};this.orBegin=function(){H++;return c};this.orEnd=function(){if(a!==null){a+=")"}return c};this.isNot=function(o){L=!L;return c.is(o)};this.is=function(o){c._append("this."+o);c._resetNegate();return c};this._compareValues=function(o,n,s,D,T){var J;J=U?"jQuery.jgrid.getAccessor(this,'"+n+"')":"this";if(s===undefined){s=null}var C=s,ca=T.stype===undefined?"text":T.stype;if(s!==null){switch(ca){case"int":case"integer":C=isNaN(Number(C))||C===""?"0":C;J="parseInt("+J+",10)";C="parseInt("+C+",10)";break;case"float":case"number":case"numeric":C=String(C).replace(r,"");C=isNaN(Number(C))||C===""?"0":C;J="parseFloat("+J+")";C="parseFloat("+C+")";break;case"date":case"datetime":C=String(b.jgrid.parseDate(T.newfmt||"Y-m-d",C).getTime());J='jQuery.jgrid.parseDate("'+T.srcfmt+'",'+J+").getTime()";break;default:J=c._getStr(J);C=c._getStr('"'+c._toStr(C)+'"')}}c._append(J+" "+D+" "+C);c._setCommand(o,n);c._resetNegate();return c};this.equals=function(o,n,s){return c._compareValues(c.equals,o,n,"==",s)};this.notEquals=function(o,n,s){return c._compareValues(c.equals,o,n,"!==",s)};this.isNull=function(o,n,s){return c._compareValues(c.equals,o,null,"===",s)};this.greater=function(o,n,s){return c._compareValues(c.greater,o,n,">",s)};this.less=function(o,n,s){return c._compareValues(c.less,o,n,"<",s)};this.greaterOrEquals=function(o,n,s){return c._compareValues(c.greaterOrEquals,o,n,">=",s)};this.lessOrEquals=function(o,n,s){return c._compareValues(c.lessOrEquals,o,n,"<=",s)};this.startsWith=function(o,n){var s=n===undefined||n===null?o:n;s=l?b.trim(s.toString()).length:s.toString().length;if(U){c._append(c._getStr("jQuery.jgrid.getAccessor(this,'"+o+"')")+".substr(0,"+s+") == "+c._getStr('"'+c._toStr(n)+'"'))}else{s=l?b.trim(n.toString()).length:n.toString().length;c._append(c._getStr("this")+".substr(0,"+s+") == "+c._getStr('"'+c._toStr(o)+'"'))}c._setCommand(c.startsWith,o);c._resetNegate();return c};this.endsWith=function(o,n){var s=n===undefined||n===null?o:n;s=l?b.trim(s.toString()).length:s.toString().length;U?c._append(c._getStr("jQuery.jgrid.getAccessor(this,'"+o+"')")+".substr("+c._getStr("jQuery.jgrid.getAccessor(this,'"+o+"')")+".length-"+s+","+s+') == "'+c._toStr(n)+'"'):c._append(c._getStr("this")+".substr("+c._getStr("this")+'.length-"'+c._toStr(o)+'".length,"'+c._toStr(o)+'".length) == "'+c._toStr(o)+'"');c._setCommand(c.endsWith,o);c._resetNegate();return c};this.contains=function(o,n){U?c._append(c._getStr("jQuery.jgrid.getAccessor(this,'"+o+"')")+'.indexOf("'+c._toStr(n)+'",0) > -1'):c._append(c._getStr("this")+'.indexOf("'+c._toStr(o)+'",0) > -1');c._setCommand(c.contains,o);c._resetNegate();return c};this.groupBy=function(o,n,s,D){if(!c._hasData()){return null}return c._getGroup(g,o,n,s,D)};this.orderBy=function(o,n,s,D){n=n===undefined||n===null?"a":b.trim(n.toString().toLowerCase());if(s===null||s===undefined){s="text"}if(D===null||D===undefined){D="Y-m-d"}if(n=="desc"||n=="descending"){n="d"}if(n=="asc"||n=="ascending"){n="a"}P.push({by:o,dir:n,type:s,datefmt:D});return c};return c}(f,null)},extend:function(f){b.extend(b.fn.jqGrid,f);this.no_legacy_api||b.fn.extend(f)}});b.fn.jqGrid=function(f){if(typeof f=="string"){var i=b.jgrid.getAccessor(b.fn.jqGrid,f);if(!i){throw"jqGrid - No gtuusuch method: "+f}var h=b.makeArray(arguments).slice(1);return i.apply(this,h)}return this.each(function(){if(!this.grid){var c=b.extend(true,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:true,pginput:true,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:false,selarrrow:[],savedRow:[],shrinkToFit:true,xmlReader:{},jsonReader:{},subGrid:false,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:false,loadonce:false,multiselect:false,multikey:false,editurl:null,search:false,caption:"",hidegrid:true,hiddengrid:false,postData:{},userData:{},treeGrid:false,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:false,gridstate:"visible",cellEdit:false,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[false,""],scroll:false,multiboxonly:false,deselectAfterSort:true,scrollrows:false,autowidth:false,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:false,rownumWidth:25,rownumbers:false,pagerpos:"center",recordpos:"right",footerrow:false,userDataOnFooter:false,hoverrows:true,altclass:"ui-priority-secondary",viewsortcols:[false,"vertical",true],resizeclass:"",autoencode:false,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:false,headertitles:false,scrollTimeout:40,data:[],_index:{},grouping:false,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:false,sortitems:[],sortnames:[],groupDataSorted:false,summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus"},ignoreCase:false,cmTemplate:{},idPrefix:""},b.jgrid.defaults,f||{}),g={headers:[],cols:[],footers:[],dragStart:function(d,e,j){this.resizing={idx:d,startX:e.clientX,sOL:j[0]};this.hDiv.style.cursor="col-resize";this.curGbox=b("#rs_m"+b.jgrid.jqID(c.id),"#gbox_"+b.jgrid.jqID(c.id));this.curGbox.css({display:"block",left:j[0],top:j[1],height:j[2]});b.isFunction(c.resizeStart)&&c.resizeStart.call(this,e,d);document.onselectstart=function(){return false}},dragMove:function(d){if(this.resizing){var e=d.clientX-this.resizing.startX;d=this.headers[this.resizing.idx];var j=c.direction==="ltr"?d.width+e:d.width-e,m;if(j>33){this.curGbox.css({left:this.resizing.sOL+e});if(c.forceFit===true){m=this.headers[this.resizing.idx+c.nv];e=c.direction==="ltr"?m.width-e:m.width+e;if(e>33){d.newWidth=j;m.newWidth=e}}else{this.newWidth=c.direction==="ltr"?c.tblwidth+e:c.tblwidth-e;d.newWidth=j}}}},dragEnd:function(){this.hDiv.style.cursor="default";if(this.resizing){var d=this.resizing.idx,e=this.headers[d].newWidth||this.headers[d].width;e=parseInt(e,10);this.resizing=false;b("#rs_m"+b.jgrid.jqID(c.id)).css("display","none");c.colModel[d].width=e;this.headers[d].width=e;this.headers[d].el.style.width=e+"px";this.cols[d].style.width=e+"px";if(this.footers.length>0){this.footers[d].style.width=e+"px"}if(c.forceFit===true){e=this.headers[d+c.nv].newWidth||this.headers[d+c.nv].width;this.headers[d+c.nv].width=e;this.headers[d+c.nv].el.style.width=e+"px";this.cols[d+c.nv].style.width=e+"px";if(this.footers.length>0){this.footers[d+c.nv].style.width=e+"px"}c.colModel[d+c.nv].width=e}else{c.tblwidth=this.newWidth||c.tblwidth;b("table:first",this.bDiv).css("width",c.tblwidth+"px");b("table:first",this.hDiv).css("width",c.tblwidth+"px");this.hDiv.scrollLeft=this.bDiv.scrollLeft;if(c.footerrow){b("table:first",this.sDiv).css("width",c.tblwidth+"px");this.sDiv.scrollLeft=this.bDiv.scrollLeft}}b.isFunction(c.resizeStop)&&c.resizeStop.call(this,e,d)}this.curGbox=null;document.onselectstart=function(){return true}},populateVisible:function(){g.timer&&clearTimeout(g.timer);g.timer=null;var d=b(g.bDiv).height();if(d){var e=b("table:first",g.bDiv),j,m;if(e[0].rows.length){try{m=(j=e[0].rows[1])?b(j).outerHeight()||g.prevRowHeight:g.prevRowHeight}catch(p){m=g.prevRowHeight}}if(m){g.prevRowHeight=m;var B=c.rowNum;j=g.scrollTop=g.bDiv.scrollTop;var t=Math.round(e.position().top)-j,E=t+e.height();m*=B;var v,z,u;if(E<d&&t<=0&&(c.lastpage===undefined||parseInt((E+j+m-1)/m,10)<=c.lastpage)){z=parseInt((d-E+m-1)/m,10);if(E>=0||z<2||c.scroll===true){v=Math.round((E+j)/m)+1;t=-1}else{t=1}}if(t>0){v=parseInt(j/m,10)+1;z=parseInt((j+d)/m,10)+2-v;u=true}if(z){if(!(c.lastpage&&v>c.lastpage||c.lastpage==1||v===c.page&&v===c.lastpage)){if(g.hDiv.loading){g.timer=setTimeout(g.populateVisible,c.scrollTimeout)}else{c.page=v;if(u){g.selectionPreserver(e[0]);g.emptyRows(g.bDiv,false,false)}g.populate(z)}}}}}},scrollGrid:function(d){if(c.scroll){var e=g.bDiv.scrollTop;if(g.scrollTop===undefined){g.scrollTop=0}if(e!=g.scrollTop){g.scrollTop=e;g.timer&&clearTimeout(g.timer);g.timer=setTimeout(g.populateVisible,c.scrollTimeout)}}g.hDiv.scrollLeft=g.bDiv.scrollLeft;if(c.footerrow){g.sDiv.scrollLeft=g.bDiv.scrollLeft}d&&d.stopPropagation()},selectionPreserver:function(d){var e=d.p,j=e.selrow,m=e.selarrrow?b.makeArray(e.selarrrow):null,p=d.grid.bDiv.scrollLeft,B=e.gridComplete;e.gridComplete=function(){e.selrow=null;e.selarrrow=[];if(e.multiselect&&m&&m.length>0){for(var t=0;t<m.length;t++){m[t]!=j&&b(d).jqGrid("setSelection",m[t],false)}}j&&b(d).jqGrid("setSelection",j,false);d.grid.bDiv.scrollLeft=p;e.gridComplete=B;e.gridComplete&&B()}}};if(this.tagName.toUpperCase()!="TABLE"){alert("Element is not a table")}else{b(this).empty().attr("tabindex","1");this.p=c;this.p.useProp=!!b.fn.prop;var k,l,a;if(this.p.colNames.length===0){for(k=0;k<this.p.colModel.length;k++){this.p.colNames[k]=this.p.colModel[k].label||this.p.colModel[k].name}}if(this.p.colNames.length!==this.p.colModel.length){alert(b.jgrid.errors.model)}else{var r=b("<div class='ui-jqgrid-view'></div>"),x,y=b.browser.msie?true:false,H=b.browser.webkit||b.browser.safari?true:false;a=this;a.p.direction=b.trim(a.p.direction.toLowerCase());if(b.inArray(a.p.direction,["ltr","rtl"])==-1){a.p.direction="ltr"}l=a.p.direction;b(r).insertBefore(this);b(this).appendTo(r).removeClass("scroll");var L=b("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");b(L).insertBefore(r).attr({id:"gbox_"+this.id,dir:l});b(r).appendTo(L).attr("id","gview_"+this.id);x=y&&b.browser.version<=6?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>':"";b("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").append(x).insertBefore(r);b("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(r);b(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var M=function(d,e){d=parseInt(d,10);return isNaN(d)?e?e:0:d},P=function(d,e,j,m,p,B){var t=a.p.colModel[d],E=t.align,v='style="',z=t.classes,u=t.name,q=[];if(E){v+="text-align:"+E+";"}if(t.hidden===true){v+="display:none;"}if(e===0){v+="width: "+g.headers[d].width+"px;"}else{if(t.cellattr&&b.isFunction(t.cellattr)){if((d=t.cellattr.call(a,p,j,m,t,B))&&typeof d==="string"){d=d.replace(/style/i,"style").replace(/title/i,"title");if(d.indexOf("title")>-1){t.title=false}if(d.indexOf("class")>-1){z=undefined}q=d.split("style");if(q.length===2){q[1]=b.trim(q[1].replace("=",""));if(q[1].indexOf("'")===0||q[1].indexOf('"')===0){q[1]=q[1].substring(1)}v+=q[1].replace(/'/gi,'"')}else{v+='"'}}}}if(!q.length){q[0]="";v+='"'}v+=(z!==undefined?' class="'+z+'"':"")+(t.title&&j?' title="'+b.jgrid.stripHtml(j)+'"':"");v+=' aria-describedby="'+a.p.id+"_"+u+'"';return v+q[0]},U=function(d){return d===undefined||d===null||d===""?"&#160;":a.p.autoencode?b.jgrid.htmlEncode(d):d+""},o=function(d,e,j,m,p){var B=a.p.colModel[j];if(typeof B.formatter!=="undefined"){d={rowId:d,colModel:B,gid:a.p.id,pos:j};e=b.isFunction(B.formatter)?B.formatter.call(a,e,d,m,p):b.fmatter?b.fn.fmatter(B.formatter,e,d,m,p):U(e)}else{e=U(e)}return e},n=function(d,e,j,m,p){e=o(d,e,j,p,"add");return'<td role="gridcell" '+P(j,m,e,p,d,true)+">"+e+"</td>"},s=function(d,e,j){var m='<input role="checkbox" type="checkbox" id="jqg_'+a.p.id+"_"+d+'" class="cbox" name="jqg_'+a.p.id+"_"+d+'"/>';return'<td role="gridcell" '+P(e,j,"",null,d,true)+">"+m+"</td>"},D=function(d,e,j,m){j=(parseInt(j,10)-1)*parseInt(m,10)+1+e;return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+P(d,e,j,null,e,true)+">"+j+"</td>"},T=function(d){var e,j=[],m=0,p;for(p=0;p<a.p.colModel.length;p++){e=a.p.colModel[p];if(e.name!=="cb"&&e.name!=="subgrid"&&e.name!=="rn"){j[m]=d=="local"?e.name:d=="xml"?e.xmlmap||e.name:e.jsonmap||e.name;m++}}return j},J=function(d){var e=a.p.remapColumns;if(!e||!e.length){e=b.map(a.p.colModel,function(j,m){return m})}if(d){e=b.map(e,function(j){return j<d?null:j-d})}return e},C=function(d,e,j){if(a.p.deepempty){b("#"+b.jgrid.jqID(a.p.id)+" tbody:first tr:gt(0)").remove()}else{var m=b("#"+b.jgrid.jqID(a.p.id)+" tbody:first tr:first")[0];b("#"+b.jgrid.jqID(a.p.id)+" tbody:first").empty().append(m)}if(e&&a.p.scroll){b(">div:first",d).css({height:"auto"}).children("div:first").css({height:0,display:"none"});d.scrollTop=0}if(j===true){if(a.p.treeGrid===true){a.p.data=[];a.p._index={}}}},ca=function(){var d=a.p.data.length,e,j,m;e=a.p.rownumbers===true?1:0;j=a.p.multiselect===true?1:0;m=a.p.subGrid===true?1:0;e=a.p.keyIndex===false||a.p.loadonce===true?a.p.localReader.id:a.p.colModel[a.p.keyIndex+j+m+e].name;for(j=0;j<d;j++){m=b.jgrid.getAccessor(a.p.data[j],e);a.p._index[m]=j}},V=function(d,e,j,m,p){var B=new Date,t=a.p.datatype!="local"&&a.p.loadonce||a.p.datatype=="xmlstring",E=a.p.datatype=="local"?"local":"xml";if(t){a.p.data=[];a.p._index={};a.p.localReader.id="_id_"}a.p.reccount=0;if(b.isXMLDoc(d)){if(a.p.treeANode===-1&&!a.p.scroll){C(e,false,true);j=1}else{j=j>1?j:1}var v,z,u=0,q,F=0,S=0,N=0,K,O=[],Y,I={},w,A,G=[],ia=a.p.altRows===true?" "+a.p.altclass:"";a.p.xmlReader.repeatitems||(O=T(E));K=a.p.keyIndex===false?a.p.xmlReader.id:a.p.keyIndex;if(O.length>0&&!isNaN(K)){if(a.p.remapColumns&&a.p.remapColumns.length){K=b.inArray(K,a.p.remapColumns)}K=O[K]}E=(K+"").indexOf("[")===-1?O.length?function(ga,aa){return b(K,ga).text()||aa}:function(ga,aa){return b(a.p.xmlReader.cell,ga).eq(K).text()||aa}:function(ga,aa){return ga.getAttribute(K.replace(/[\[\]]/g,""))||aa};a.p.userData={};b(a.p.xmlReader.page,d).each(function(){a.p.page=this.textContent||this.text||0});b(a.p.xmlReader.total,d).each(function(){a.p.lastpage=this.textContent||this.text;if(a.p.lastpage===undefined){a.p.lastpage=1}});b(a.p.xmlReader.records,d).each(function(){a.p.records=this.textContent||this.text||0});b(a.p.xmlReader.userdata,d).each(function(){a.p.userData[this.getAttribute("name")]=b(this).text()});(d=b(a.p.xmlReader.root+" "+a.p.xmlReader.row,d))||(d=[]);var ba=d.length,W=0,Z={},ha;if(d&&ba){ha=parseInt(a.p.rowNum,10);var pa=a.p.scroll?b.jgrid.randId():1;if(p){ha*=p+1}p=b.isFunction(a.p.afterInsertRow);var qa="";if(a.p.grouping&&a.p.groupingView.groupCollapse===true){qa=' style="display:none;"'}for(;W<ba;){w=d[W];A=E(w,pa+W);A=a.p.idPrefix+A;v=j===0?0:j+1;v=(v+W)%2==1?ia:"";G.push("<tr"+qa+' id="'+A+'" tabindex="-1" role="row" class ="ui-widget-content jqgrow ui-row-'+a.p.direction+""+v+'">');if(a.p.rownumbers===true){G.push(D(0,W,a.p.page,a.p.rowNum));N=1}if(a.p.multiselect===true){G.push(s(A,N,W));F=1}if(a.p.subGrid===true){G.push(b(a).jqGrid("addSubGridCell",F+N,W+j));S=1}if(a.p.xmlReader.repeatitems){Y||(Y=J(F+S+N));var Ba=b(a.p.xmlReader.cell,w);b.each(Y,function(ga){var aa=Ba[this];if(!aa){return false}q=aa.textContent||aa.text;I[a.p.colModel[ga+F+S+N].name]=q;G.push(n(A,q,ga+F+S+N,W+j,w))})}else{for(v=0;v<O.length;v++){q=b(O[v],w).text();I[a.p.colModel[v+F+S+N].name]=q;G.push(n(A,q,v+F+S+N,W+j,w))}}G.push("</tr>");if(a.p.grouping){v=a.p.groupingView.groupField.length;for(var xa=[],ya=0;ya<v;ya++){xa.push(I[a.p.groupingView.groupField[ya]])}Z=b(a).jqGrid("groupingPrepare",G,xa,Z,I);G=[]}if(t||a.p.treeGrid===true){I._id_=A;a.p.data.push(I);a.p._index[A]=a.p.data.length-1}if(a.p.gridview===false){b("tbody:first",e).append(G.join(""));p&&a.p.afterInsertRow.call(a,A,I,w);G=[]}I={};u++;W++;if(u==ha){break}}}if(a.p.gridview===true){z=a.p.treeANode>-1?a.p.treeANode:0;if(a.p.grouping){b(a).jqGrid("groupingRender",Z,a.p.colModel.length);Z=null}else{a.p.treeGrid===true&&z>0?b(a.rows[z]).after(G.join("")):b("tbody:first",e).append(G.join(""))}}if(a.p.subGrid===true){try{b(a).jqGrid("addSubGrid",F+N)}catch(Ia){}}a.p.totaltime=new Date-B;if(u>0){if(a.p.records===0){a.p.records=ba}}G=null;if(a.p.treeGrid===true){try{b(a).jqGrid("setTreeNode",z+1,u+z+1)}catch(Ja){}}if(!a.p.treeGrid&&!a.p.scroll){a.grid.bDiv.scrollTop=0}a.p.reccount=u;a.p.treeANode=-1;a.p.userDataOnFooter&&b(a).jqGrid("footerData","set",a.p.userData,true);if(t){a.p.records=ba;a.p.lastpage=Math.ceil(ba/ha)}m||a.updatepager(false,true);if(t){for(;u<ba;){w=d[u];A=E(w,u);A=a.p.idPrefix+A;if(a.p.xmlReader.repeatitems){Y||(Y=J(F+S+N));var Fa=b(a.p.xmlReader.cell,w);b.each(Y,function(ga){var aa=Fa[this];if(!aa){return false}q=aa.textContent||aa.text;I[a.p.colModel[ga+F+S+N].name]=q})}else{for(v=0;v<O.length;v++){q=b(O[v],w).text();I[a.p.colModel[v+F+S+N].name]=q}}I._id_=A;a.p.data.push(I);a.p._index[A]=a.p.data.length-1;I={};u++}}}},fa=function(d,e,j,m,p){var B=new Date;if(d){if(a.p.treeANode===-1&&!a.p.scroll){C(e,false,true);j=1}else{j=j>1?j:1}var t,E=a.p.datatype!="local"&&a.p.loadonce||a.p.datatype=="jsonstring";if(E){a.p.data=[];a.p._index={};a.p.localReader.id="_id_"}a.p.reccount=0;if(a.p.datatype=="local"){e=a.p.localReader;t="local"}else{e=a.p.jsonReader;t="json"}var v=0,z,u,q=[],F,S=0,N=0,K=0,O,Y,I={},w,A,G=[],ia=a.p.altRows===true?" "+a.p.altclass:"";a.p.page=b.jgrid.getAccessor(d,e.page)||0;O=b.jgrid.getAccessor(d,e.total);a.p.lastpage=O===undefined?1:O;a.p.records=b.jgrid.getAccessor(d,e.records)||0;a.p.userData=b.jgrid.getAccessor(d,e.userdata)||{};e.repeatitems||(F=q=T(t));t=a.p.keyIndex===false?e.id:a.p.keyIndex;if(q.length>0&&!isNaN(t)){if(a.p.remapColumns&&a.p.remapColumns.length){t=b.inArray(t,a.p.remapColumns)}t=q[t]}(Y=b.jgrid.getAccessor(d,e.root))||(Y=[]);O=Y.length;d=0;var ba=parseInt(a.p.rowNum,10),W=a.p.scroll?b.jgrid.randId():1;if(p){ba*=p+1}var Z=b.isFunction(a.p.afterInsertRow),ha={},pa="";if(a.p.grouping&&a.p.groupingView.groupCollapse===true){pa=' style="display:none;"'}for(;d<O;){p=Y[d];A=b.jgrid.getAccessor(p,t);if(A===undefined){A=W+d;if(q.length===0){if(e.cell){A=b.jgrid.getAccessor(p,e.cell)[t]||A}}}A=a.p.idPrefix+A;z=j===1?0:j;z=(z+d)%2==1?ia:"";G.push("<tr"+pa+' id="'+A+'" tabindex="-1" role="row" class= "ui-widget-content jqgrow ui-row-'+a.p.direction+""+z+'">');if(a.p.rownumbers===true){G.push(D(0,d,a.p.page,a.p.rowNum));K=1}if(a.p.multiselect){G.push(s(A,K,d));S=1}if(a.p.subGrid){G.push(b(a).jqGrid("addSubGridCell",S+K,d+j));N=1}if(e.repeatitems){if(e.cell){p=b.jgrid.getAccessor(p,e.cell)}F||(F=J(S+N+K))}for(u=0;u<F.length;u++){z=b.jgrid.getAccessor(p,F[u]);G.push(n(A,z,u+S+N+K,d+j,p));I[a.p.colModel[u+S+N+K].name]=z}G.push("</tr>");if(a.p.grouping){z=a.p.groupingView.groupField.length;u=[];for(var qa=0;qa<z;qa++){u.push(I[a.p.groupingView.groupField[qa]])}ha=b(a).jqGrid("groupingPrepare",G,u,ha,I);G=[]}if(E||a.p.treeGrid===true){I._id_=A;a.p.data.push(I);a.p._index[A]=a.p.data.length-1}if(a.p.gridview===false){b("#"+b.jgrid.jqID(a.p.id)+" tbody:first").append(G.join(""));Z&&a.p.afterInsertRow.call(a,A,I,p);G=[]}I={};v++;d++;if(v==ba){break}}if(a.p.gridview===true){w=a.p.treeANode>-1?a.p.treeANode:0;if(a.p.grouping){b(a).jqGrid("groupingRender",ha,a.p.colModel.length)}else{a.p.treeGrid===true&&w>0?b(a.rows[w]).after(G.join("")):b("#"+b.jgrid.jqID(a.p.id)+" tbody:first").append(G.join(""))}}if(a.p.subGrid===true){try{b(a).jqGrid("addSubGrid",S+K)}catch(Ba){}}a.p.totaltime=new Date-B;if(v>0){if(a.p.records===0){a.p.records=O}}if(a.p.treeGrid===true){try{b(a).jqGrid("setTreeNode",w+1,v+w+1)}catch(xa){}}if(!a.p.treeGrid&&!a.p.scroll){a.grid.bDiv.scrollTop=0}a.p.reccount=v;a.p.treeANode=-1;a.p.userDataOnFooter&&b(a).jqGrid("footerData","set",a.p.userData,true);if(E){a.p.records=O;a.p.lastpage=Math.ceil(O/ba)}m||a.updatepager(false,true);if(E){for(;v<O&&Y[v];){p=Y[v];A=b.jgrid.getAccessor(p,t);if(A===undefined){A=W+v;if(q.length===0){if(e.cell){A=b.jgrid.getAccessor(p,e.cell)[t]||A}}}if(p){A=a.p.idPrefix+A;if(e.repeatitems){if(e.cell){p=b.jgrid.getAccessor(p,e.cell)}F||(F=J(S+N+K))}for(u=0;u<F.length;u++){z=b.jgrid.getAccessor(p,F[u]);I[a.p.colModel[u+S+N+K].name]=z}I._id_=A;a.p.data.push(I);a.p._index[A]=a.p.data.length-1;I={}}v++}}}},oa=function(){function d(w){var A=0,G,ia,ba,W,Z;if(w.groups!==undefined){(ia=w.groups.length&&w.groupOp.toString().toUpperCase()==="OR")&&q.orBegin();for(G=0;G<w.groups.length;G++){A>0&&ia&&q.or();try{d(w.groups[G])}catch(ha){alert(ha)}A++}ia&&q.orEnd()}if(w.rules!==undefined){if(A>0){ia=q.select();q=b.jgrid.from(ia);if(a.p.ignoreCase){q=q.ignoreCase()}}try{(ba=w.rules.length&&w.groupOp.toString().toUpperCase()==="OR")&&q.orBegin();for(G=0;G<w.rules.length;G++){Z=w.rules[G];W=w.groupOp.toString().toUpperCase();if(u[Z.op]&&Z.field){if(A>0&&W&&W==="OR"){q=q.or()}q=u[Z.op](q,W)(Z.field,Z.data,m[Z.field])}A++}ba&&q.orEnd()}catch(pa){alert(pa)}}}var e,j=false,m={},p=[],B=[],t,E,v;if(b.isArray(a.p.data)){var z=a.p.grouping?a.p.groupingView:false;b.each(a.p.colModel,function(){E=this.sorttype||"text";if(E=="date"||E=="datetime"){if(this.formatter&&typeof this.formatter==="string"&&this.formatter=="date"){t=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:b.jgrid.formatter.date.srcformat;v=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:b.jgrid.formatter.date.newformat}else{t=v=this.datefmt||"Y-m-d"}m[this.name]={stype:E,srcfmt:t,newfmt:v}}else{m[this.name]={stype:E,srcfmt:"",newfmt:""}}if(a.p.grouping&&this.name==z.groupField[0]){var w=this.name;if(typeof this.index!="undefined"){w=this.index}p[0]=m[w];B.push(w)}if(!j&&(this.index==a.p.sortname||this.name==a.p.sortname)){e=this.name;j=true}});if(a.p.treeGrid){b(a).jqGrid("SortTree",e,a.p.sortorder,m[e].stype,m[e].srcfmt)}else{var u={eq:function(w){return w.equals},ne:function(w){return w.notEquals},lt:function(w){return w.less},le:function(w){return w.lessOrEquals},gt:function(w){return w.greater},ge:function(w){return w.greaterOrEquals},cn:function(w){return w.contains},nc:function(w,A){return A==="OR"?w.orNot().contains:w.andNot().contains},bw:function(w){return w.startsWith},bn:function(w,A){return A==="OR"?w.orNot().startsWith:w.andNot().startsWith},en:function(w,A){return A==="OR"?w.orNot().endsWith:w.andNot().endsWith},ew:function(w){return w.endsWith},ni:function(w,A){return A==="OR"?w.orNot().equals:w.andNot().equals},"in":function(w){return w.equals},nu:function(w){return w.isNull},nn:function(w,A){return A==="OR"?w.orNot().isNull:w.andNot().isNull}},q=b.jgrid.from(a.p.data);if(a.p.ignoreCase){q=q.ignoreCase()}if(a.p.search===true){var F=a.p.postData.filters;if(F){if(typeof F=="string"){F=b.jgrid.parse(F)}d(F)}else{try{q=u[a.p.postData.searchOper](q)(a.p.postData.searchField,a.p.postData.searchString,m[a.p.postData.searchField])}catch(S){}}}if(a.p.grouping){q.orderBy(B,z.groupOrder[0],p[0].stype,p[0].srcfmt);z.groupDataSorted=true}if(e&&a.p.sortorder&&j){a.p.sortorder.toUpperCase()=="DESC"?q.orderBy(a.p.sortname,"d",m[e].stype,m[e].srcfmt):q.orderBy(a.p.sortname,"a",m[e].stype,m[e].srcfmt)}F=q.select();var N=parseInt(a.p.rowNum,10),K=F.length,O=parseInt(a.p.page,10),Y=Math.ceil(K/N),I={};F=F.slice((O-1)*N,O*N);m=q=null;I[a.p.localReader.total]=Y;I[a.p.localReader.page]=O;I[a.p.localReader.records]=K;I[a.p.localReader.root]=F;I[a.p.localReader.userdata]=a.p.userData;F=null;return I}}},R=function(){a.grid.hDiv.loading=true;if(!a.p.hiddengrid){switch(a.p.loadui){case"enable":b("#load_"+b.jgrid.jqID(a.p.id)).show();break;case"block":b("#lui_"+b.jgrid.jqID(a.p.id)).show();b("#load_"+b.jgrid.jqID(a.p.id)).show()}}},$=function(){a.grid.hDiv.loading=false;switch(a.p.loadui){case"enable":b("#load_"+b.jgrid.jqID(a.p.id)).hide();break;case"block":b("#lui_"+b.jgrid.jqID(a.p.id)).hide();b("#load_"+b.jgrid.jqID(a.p.id)).hide()}},ja=function(d){if(!a.grid.hDiv.loading){var e=a.p.scroll&&d===false,j={},m,p=a.p.prmNames;if(a.p.page<=0){a.p.page=1}if(p.search!==null){j[p.search]=a.p.search}if(p.nd!==null){j[p.nd]=(new Date).getTime()}if(p.rows!==null){j[p.rows]=a.p.rowNum}if(p.page!==null){j[p.page]=a.p.page}if(p.sort!==null){j[p.sort]=a.p.sortname}if(p.order!==null){j[p.order]=a.p.sortorder}if(a.p.rowTotal!==null&&p.totalrows!==null){j[p.totalrows]=a.p.rowTotal}var B=a.p.loadComplete,t=b.isFunction(B);t||(B=null);var E=0;d=d||1;if(d>1){if(p.npage!==null){j[p.npage]=d;E=d-1;d=1}else{B=function(z){a.p.page++;a.grid.hDiv.loading=false;t&&a.p.loadComplete.call(a,z);ja(d-1)}}}else{p.npage!==null&&delete a.p.postData[p.npage]}if(a.p.grouping){b(a).jqGrid("groupingSetup");if(a.p.groupingView.groupDataSorted===true){j[p.sort]=a.p.groupingView.groupField[0]+" "+a.p.groupingView.groupOrder[0]+", "+j[p.sort]}}b.extend(a.p.postData,j);var v=!a.p.scroll?1:a.rows.length-1;if(b.isFunction(a.p.datatype)){a.p.datatype.call(a,a.p.postData,"load_"+a.p.id)}else{if(b.isFunction(a.p.beforeRequest)){j=a.p.beforeRequest.call(a);if(j===undefined){j=true}if(j===false){return }}m=a.p.datatype.toLowerCase();switch(m){case"json":case"jsonp":case"xml":case"script":b.ajax(b.extend({url:a.p.url,type:a.p.mtype,dataType:m,data:b.isFunction(a.p.serializeGridData)?a.p.serializeGridData.call(a,a.p.postData):a.p.postData,success:function(z,u,q){b.isFunction(a.p.beforeProcessing)&&a.p.beforeProcessing.call(a,z,u,q);m==="xml"?V(z,a.grid.bDiv,v,d>1,E):fa(z,a.grid.bDiv,v,d>1,E);B&&B.call(a,z);e&&a.grid.populateVisible();if(a.p.loadonce||a.p.treeGrid){a.p.datatype="local"}d===1&&$()},error:function(z,u,q){b.isFunction(a.p.loadError)&&a.p.loadError.call(a,z,u,q);d===1&&$()},beforeSend:function(z,u){var q=true;if(b.isFunction(a.p.loadBeforeSend)){q=a.p.loadBeforeSend.call(a,z,u)}if(q===undefined){q=true}if(q===false){return false}else{R()}}},b.jgrid.ajaxOptions,a.p.ajaxGridOptions));break;case"xmlstring":R();j=b.jgrid.stringToDoc(a.p.datastr);V(j,a.grid.bDiv);t&&a.p.loadComplete.call(a,j);a.p.datatype="local";a.p.datastr=null;$();break;case"jsonstring":R();j=typeof a.p.datastr=="string"?b.jgrid.parse(a.p.datastr):a.p.datastr;fa(j,a.grid.bDiv);t&&a.p.loadComplete.call(a,j);a.p.datatype="local";a.p.datastr=null;$();break;case"local":case"clientside":R();a.p.datatype="local";j=oa();fa(j,a.grid.bDiv,v,d>1,E);B&&B.call(a,j);e&&a.grid.populateVisible();$()}}}};x=function(d,e){var j="",m="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",p="",B,t,E,v,z=function(u){var q;if(b.isFunction(a.p.onPaging)){q=a.p.onPaging.call(a,u)}a.p.selrow=null;if(a.p.multiselect){a.p.selarrrow=[];b("#cb_"+b.jgrid.jqID(a.p.id),a.grid.hDiv)[a.p.useProp?"prop":"attr"]("checked",false)}a.p.savedRow=[];if(q=="stop"){return false}return true};d=d.substr(1);e+="_"+d;B="pg_"+d;t=d+"_left";E=d+"_center";v=d+"_right";b("#"+b.jgrid.jqID(d)).append("<div id='"+B+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+t+"' align='left'></td><td id='"+E+"' align='center' style='white-space:pre;'></td><td id='"+v+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr");if(a.p.rowList.length>0){p="<td dir='"+l+"'>";p+="<select class='ui-pg-selbox' role='listbox'>";for(t=0;t<a.p.rowList.length;t++){p+='<option role="option" value="'+a.p.rowList[t]+'"'+(a.p.rowNum==a.p.rowList[t]?' selected="selected"':"")+">"+a.p.rowList[t]+"</option>"}p+="</select></td>"}if(l=="rtl"){m+=p}if(a.p.pginput===true){j="<td dir='"+l+"'>"+b.jgrid.format(a.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+b.jgrid.jqID(d)+"'></span>")+"</td>"}if(a.p.pgbuttons===true){t=["first"+e,"prev"+e,"next"+e,"last"+e];l=="rtl"&&t.reverse();m+="<td id='"+t[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'></span></td>";m+="<td id='"+t[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'></span></td>";m+=j!==""?"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>"+j+"<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>":"";m+="<td id='"+t[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'></span></td>";m+="<td id='"+t[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'></span></td>"}else{if(j!==""){m+=j}}if(l=="ltr"){m+=p}m+="</tr></tbody></table>";a.p.viewrecords===true&&b("td#"+d+"_"+a.p.recordpos,"#"+B).append("<div dir='"+l+"' style='text-align:"+a.p.recordpos+"' class='ui-paging-info'></div>");b("td#"+d+"_"+a.p.pagerpos,"#"+B).append(m);p=b(".ui-jqgrid").css("font-size")||"11px";b(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+p+";visibility:hidden;' ></div>");m=b(m).clone().appendTo("#testpg").width();b("#testpg").remove();if(m>0){if(j!==""){m+=50}b("td#"+d+"_"+a.p.pagerpos,"#"+B).width(m)}a.p._nvtd=[];a.p._nvtd[0]=m?Math.floor((a.p.width-m)/2):Math.floor(a.p.width/3);a.p._nvtd[1]=0;m=null;b(".ui-pg-selbox","#"+B).bind("change",function(){a.p.page=Math.round(a.p.rowNum*(a.p.page-1)/this.value-0.5)+1;a.p.rowNum=this.value;if(e){b(".ui-pg-selbox",a.p.pager).val(this.value)}else{a.p.toppager&&b(".ui-pg-selbox",a.p.toppager).val(this.value)}if(!z("records")){return false}ja();return false});if(a.p.pgbuttons===true){b(".ui-pg-button","#"+B).hover(function(){if(b(this).hasClass("ui-state-disabled")){this.style.cursor="default"}else{b(this).addClass("ui-state-hover");this.style.cursor="pointer"}},function(){if(!b(this).hasClass("ui-state-disabled")){b(this).removeClass("ui-state-hover");this.style.cursor="default"}});b("#first"+b.jgrid.jqID(e)+", #prev"+b.jgrid.jqID(e)+", #next"+b.jgrid.jqID(e)+", #last"+b.jgrid.jqID(e)).click(function(){var u=M(a.p.page,1),q=M(a.p.lastpage,1),F=false,S=true,N=true,K=true,O=true;if(q===0||q===1){O=K=N=S=false}else{if(q>1&&u>=1){if(u===1){N=S=false}else{if(!(u>1&&u<q)){if(u===q){O=K=false}}}}else{if(q>1&&u===0){O=K=false;u=q-1}}}if(this.id==="first"+e&&S){a.p.page=1;F=true}if(this.id==="prev"+e&&N){a.p.page=u-1;F=true}if(this.id==="next"+e&&K){a.p.page=u+1;F=true}if(this.id==="last"+e&&O){a.p.page=q;F=true}if(F){if(!z(this.id)){return false}ja()}return false})}a.p.pginput===true&&b("input.ui-pg-input","#"+B).keypress(function(u){if((u.charCode?u.charCode:u.keyCode?u.keyCode:0)==13){a.p.page=b(this).val()>0?b(this).val():a.p.page;if(!z("user")){return false}ja();return false}return this})};var Ca=function(d,e,j,m){if(a.p.colModel[e].sortable){if(!(a.p.savedRow.length>0)){if(!j){if(a.p.lastsort==e){if(a.p.sortorder=="asc"){a.p.sortorder="desc"}else{if(a.p.sortorder=="desc"){a.p.sortorder="asc"}}}else{a.p.sortorder=a.p.colModel[e].firstsortorder||"asc"}a.p.page=1}if(m){if(a.p.lastsort==e&&a.p.sortorder==m&&!j){return }else{a.p.sortorder=m}}j=a.grid.headers[a.p.lastsort].el;m=a.grid.headers[e].el;b("span.ui-grid-ico-sort",j).addClass("ui-state-disabled");b(j).attr("aria-selected","false");b("span.ui-icon-"+a.p.sortorder,m).removeClass("ui-state-disabled");b(m).attr("aria-selected","true");if(!a.p.viewsortcols[0]){if(a.p.lastsort!=e){b("span.s-ico",j).hide();b("span.s-ico",m).show()}}d=d.substring(5+a.p.id.length+1);a.p.sortname=a.p.colModel[e].index||d;j=a.p.sortorder;if(b.isFunction(a.p.onSortCol)){if(a.p.onSortCol.call(a,d,e,j)=="stop"){a.p.lastsort=e;return }}if(a.p.datatype=="local"){a.p.deselectAfterSort&&b(a).jqGrid("resetSelection")}else{a.p.selrow=null;if(a.p.multiselect){b("#cb_"+b.jgrid.jqID(a.p.id),a.grid.hDiv)[a.p.useProp?"prop":"attr"]("checked",false)}a.p.selarrrow=[];a.p.savedRow=[]}if(a.p.scroll){j=a.grid.bDiv.scrollLeft;C(a.grid.bDiv,true,false);a.grid.hDiv.scrollLeft=j}a.p.subGrid&&a.p.datatype=="local"&&b("td.sgexpanded","#"+b.jgrid.jqID(a.p.id)).each(function(){b(this).trigger("click")});ja();a.p.lastsort=e;if(a.p.sortname!=d&&e){a.p.lastsort=e}}}},Ga=function(d){var e,j={},m=H?0:a.p.cellLayout;for(e=j[0]=j[1]=j[2]=0;e<=d;e++){if(a.p.colModel[e].hidden===false){j[0]+=a.p.colModel[e].width+m}}if(a.p.direction=="rtl"){j[0]=a.p.width-j[0]}j[0]-=a.grid.bDiv.scrollLeft;if(b(a.grid.cDiv).is(":visible")){j[1]+=b(a.grid.cDiv).height()+parseInt(b(a.grid.cDiv).css("padding-top"),10)+parseInt(b(a.grid.cDiv).css("padding-bottom"),10)}if(a.p.toolbar[0]===true&&(a.p.toolbar[1]=="top"||a.p.toolbar[1]=="both")){j[1]+=b(a.grid.uDiv).height()+parseInt(b(a.grid.uDiv).css("border-top-width"),10)+parseInt(b(a.grid.uDiv).css("border-bottom-width"),10)}if(a.p.toppager){j[1]+=b(a.grid.topDiv).height()+parseInt(b(a.grid.topDiv).css("border-bottom-width"),10)}j[2]+=b(a.grid.bDiv).height()+b(a.grid.hDiv).height();return j},Da=function(d){var e,j=a.grid.headers,m=b.jgrid.getCellIndex(d);for(e=0;e<j.length;e++){if(d===j[e].el){m=e;break}}return m};this.p.id=this.id;if(b.inArray(a.p.multikey,["shiftKey","altKey","ctrlKey"])==-1){a.p.multikey=false}a.p.keyIndex=false;for(k=0;k<a.p.colModel.length;k++){a.p.colModel[k]=b.extend(true,{},a.p.cmTemplate,a.p.colModel[k].template||{},a.p.colModel[k]);if(a.p.keyIndex===false&&a.p.colModel[k].key===true){a.p.keyIndex=k}}a.p.sortorder=a.p.sortorder.toLowerCase();if(a.p.grouping===true){a.p.scroll=false;a.p.rownumbers=false;a.p.subGrid=false;a.p.treeGrid=false;a.p.gridview=true}if(this.p.treeGrid===true){try{b(this).jqGrid("setTreeGrid")}catch(Ka){}if(a.p.datatype!="local"){a.p.localReader={id:"_id_"}}}if(this.p.subGrid){try{b(a).jqGrid("setSubGrid")}catch(La){}}if(this.p.multiselect){this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>");this.p.colModel.unshift({name:"cb",width:H?a.p.multiselectWidth+a.p.cellLayout:a.p.multiselectWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true})}if(this.p.rownumbers){this.p.colNames.unshift("");this.p.colModel.unshift({name:"rn",width:a.p.rownumWidth,sortable:false,resizable:false,hidedlg:true,search:false,align:"center",fixed:true})}a.p.xmlReader=b.extend(true,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:true,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:true,cell:"cell"}},a.p.xmlReader);a.p.jsonReader=b.extend(true,{root:"rows",page:"page",total:"total",records:"records",repeatitems:true,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:true,cell:"cell"}},a.p.jsonReader);a.p.localReader=b.extend(true,{root:"rows",page:"page",total:"total",records:"records",repeatitems:false,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:true,cell:"cell"}},a.p.localReader);if(a.p.scroll){a.p.pgbuttons=false;a.p.pginput=false;a.p.rowList=[]}a.p.data.length&&ca();var da="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",Ea,ma,sa,ra,ta,X,Q,na;ma=na="";if(a.p.shrinkToFit===true&&a.p.forceFit===true){for(k=a.p.colModel.length-1;k>=0;k--){if(!a.p.colModel[k].hidden){a.p.colModel[k].resizable=false;break}}}if(a.p.viewsortcols[1]=="horizontal"){na=" ui-i-asc";ma=" ui-i-desc"}Ea=y?"class='ui-th-div-ie'":"";na="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+na+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+l+"'></span>";na+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+ma+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+l+"'></span></span>";for(k=0;k<this.p.colNames.length;k++){ma=a.p.headertitles?' title="'+b.jgrid.stripHtml(a.p.colNames[k])+'"':"";da+="<th id='"+a.p.id+"_"+a.p.colModel[k].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+l+"'"+ma+">";ma=a.p.colModel[k].index||a.p.colModel[k].name;da+="<div id='jqgh_"+a.p.id+"_"+a.p.colModel[k].name+"' "+Ea+">"+a.p.colNames[k];a.p.colModel[k].width=a.p.colModel[k].width?parseInt(a.p.colModel[k].width,10):150;if(typeof a.p.colModel[k].title!=="boolean"){a.p.colModel[k].title=true}if(ma==a.p.sortname){a.p.lastsort=k}da+=na+"</div></th>"}da+="</tr></thead>";na=null;b(this).append(da);b("thead tr:first th",this).hover(function(){b(this).addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover")});if(this.p.multiselect){var za=[],ua;b("#cb_"+b.jgrid.jqID(a.p.id),this).bind("click",function(){a.p.selarrrow=[];if(this.checked){b(a.rows).each(function(d){if(d>0){if(!b(this).hasClass("ui-subgrid")&&!b(this).hasClass("jqgroup")&&!b(this).hasClass("ui-state-disabled")){b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(this.id))[a.p.useProp?"prop":"attr"]("checked",true);b(this).addClass("ui-state-highlight").attr("aria-selected","true");a.p.selarrrow.push(this.id);a.p.selrow=this.id}}});ua=true;za=[]}else{b(a.rows).each(function(d){if(d>0){if(!b(this).hasClass("ui-subgrid")&&!b(this).hasClass("ui-state-disabled")){b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(this.id))[a.p.useProp?"prop":"attr"]("checked",false);b(this).removeClass("ui-state-highlight").attr("aria-selected","false");za.push(this.id)}}});a.p.selrow=null;ua=false}if(b.isFunction(a.p.onSelectAll)){a.p.onSelectAll.call(a,ua?a.p.selarrrow:za,ua)}})}if(a.p.autowidth===true){da=b(L).innerWidth();a.p.width=da>0?da:"nw"}(function(){var d=0,e=H?0:a.p.cellLayout,j=0,m,p=a.p.scrollOffset,B,t=false,E,v=0,z=0,u;b.each(a.p.colModel,function(){if(typeof this.hidden==="undefined"){this.hidden=false}this.widthOrg=B=M(this.width,0);if(this.hidden===false){d+=B+e;if(this.fixed){v+=B+e}else{j++}z++}});if(isNaN(a.p.width)){a.p.width=g.width=d}else{g.width=a.p.width}a.p.tblwidth=d;if(a.p.shrinkToFit===false&&a.p.forceFit===true){a.p.forceFit=false}if(a.p.shrinkToFit===true&&j>0){E=g.width-e*j-v;if(!isNaN(a.p.height)){E-=p;t=true}d=0;b.each(a.p.colModel,function(q){if(this.hidden===false&&!this.fixed){this.width=B=Math.round(E*this.width/(a.p.tblwidth-e*j-v));d+=B;m=q}});u=0;if(t){if(g.width-v-(d+e*j)!==p){u=g.width-v-(d+e*j)-p}}else{if(!t&&Math.abs(g.width-v-(d+e*j))!==1){u=g.width-v-(d+e*j)}}a.p.colModel[m].width+=u;a.p.tblwidth=d+u+e*j+v;if(a.p.tblwidth>a.p.width){a.p.colModel[m].width-=a.p.tblwidth-parseInt(a.p.width,10);a.p.tblwidth=a.p.width}}})();b(L).css("width",g.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+a.p.id+"'>&#160;</div>");b(r).css("width",g.width+"px");da=b("thead:first",a).get(0);var va="";if(a.p.footerrow){va+="<table role='grid' style='width:"+a.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+l+"'>"}r=b("tr:first",da);var wa="<tr class='jqgfirstrow' role='row' style='height:auto'>";a.p.disableClick=false;b("th",r).each(function(d){sa=a.p.colModel[d].width;if(typeof a.p.colModel[d].resizable==="undefined"){a.p.colModel[d].resizable=true}if(a.p.colModel[d].resizable){ra=document.createElement("span");b(ra).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+l);b.browser.opera||b(ra).css("cursor","col-resize");b(this).addClass(a.p.resizeclass)}else{ra=""}b(this).css("width",sa+"px").prepend(ra);var e="";if(a.p.colModel[d].hidden){b(this).css("display","none");e="display:none;"}wa+="<td role='gridcell' style='height:0px;width:"+sa+"px;"+e+"'></td>";g.headers[d]={width:sa,el:this};ta=a.p.colModel[d].sortable;if(typeof ta!=="boolean"){ta=a.p.colModel[d].sortable=true}e=a.p.colModel[d].name;e=="cb"||e=="subgrid"||e=="rn"||a.p.viewsortcols[2]&&b("div",this).addClass("ui-jqgrid-sortable");if(ta){if(a.p.viewsortcols[0]){b("div span.s-ico",this).show();d==a.p.lastsort&&b("div span.ui-icon-"+a.p.sortorder,this).removeClass("ui-state-disabled")}else{if(d==a.p.lastsort){b("div span.s-ico",this).show();b("div span.ui-icon-"+a.p.sortorder,this).removeClass("ui-state-disabled")}}}if(a.p.footerrow){va+="<td role='gridcell' "+P(d,0,"",null,"",false)+">&#160;</td>"}}).mousedown(function(d){if(b(d.target).closest("th>span.ui-jqgrid-resize").length==1){var e=Da(this);if(a.p.forceFit===true){var j=a.p,m=e,p;for(p=e+1;p<a.p.colModel.length;p++){if(a.p.colModel[p].hidden!==true){m=p;break}}j.nv=m-e}g.dragStart(e,d,Ga(e));return false}}).click(function(d){if(a.p.disableClick){return a.p.disableClick=false}var e="th>div.ui-jqgrid-sortable",j,m;a.p.viewsortcols[2]||(e="th>div>span>span.ui-grid-ico-sort");d=b(d.target).closest(e);if(d.length==1){e=Da(this);if(!a.p.viewsortcols[2]){j=true;m=d.attr("sort")}Ca(b("div",this)[0].id,e,j,m);return false}});if(a.p.sortable&&b.fn.sortable){try{b(a).jqGrid("sortableColumns",r)}catch(Ma){}}if(a.p.footerrow){va+="</tr></tbody></table>"}wa+="</tr>";this.appendChild(document.createElement("tbody"));b(this).addClass("ui-jqgrid-btable").append(wa);wa=null;r=b("<table class='ui-jqgrid-htable' style='width:"+a.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(da);var ea=a.p.caption&&a.p.hiddengrid===true?true:false;k=b("<div class='ui-jqgrid-hbox"+(l=="rtl"?"-rtl":"")+"'></div>");da=null;g.hDiv=document.createElement("div");b(g.hDiv).css({width:g.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(k);b(k).append(r);r=null;ea&&b(g.hDiv).hide();if(a.p.pager){if(typeof a.p.pager=="string"){if(a.p.pager.substr(0,1)!="#"){a.p.pager="#"+a.p.pager}}else{a.p.pager="#"+b(a.p.pager).attr("id")}b(a.p.pager).css({width:g.width+"px"}).appendTo(L).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom");ea&&b(a.p.pager).hide();x(a.p.pager,"")}a.p.cellEdit===false&&a.p.hoverrows===true&&b(a).bind("mouseover",function(d){Q=b(d.target).closest("tr.jqgrow");b(Q).attr("class")!=="ui-subgrid"&&b(Q).addClass("ui-state-hover")}).bind("mouseout",function(d){Q=b(d.target).closest("tr.jqgrow");b(Q).removeClass("ui-state-hover")});var ka,la;b(a).before(g.hDiv).click(function(d){X=d.target;Q=b(X,a.rows).closest("tr.jqgrow");if(b(Q).length===0||Q[0].className.indexOf("ui-state-disabled")>-1){return this}var e=b(X).hasClass("cbox"),j=true;if(b.isFunction(a.p.beforeSelectRow)){j=a.p.beforeSelectRow.call(a,Q[0].id,d)}if(X.tagName=="A"||(X.tagName=="INPUT"||X.tagName=="TEXTAREA"||X.tagName=="OPTION"||X.tagName=="SELECT")&&!e){return this}if(j===true){if(a.p.cellEdit===true){if(a.p.multiselect&&e){b(a).jqGrid("setSelection",Q[0].id,true)}else{ka=Q[0].rowIndex;la=b.jgrid.getCellIndex(X);try{b(a).jqGrid("editCell",ka,la,true)}catch(m){}}}else{if(a.p.multikey){if(d[a.p.multikey]){b(a).jqGrid("setSelection",Q[0].id,true)}else{if(a.p.multiselect&&e){e=b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+Q[0].id).is(":checked");b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+Q[0].id)[a.p.useProp?"prop":"attr"]("checked",e)}}}else{if(a.p.multiselect&&a.p.multiboxonly){if(!e){b(a.p.selarrrow).each(function(p,B){var t=a.rows.namedItem(B);b(t).removeClass("ui-state-highlight");b("#jqg_"+b.jgrid.jqID(a.p.id)+"_"+b.jgrid.jqID(B))[a.p.useProp?"prop":"attr"]("checked",false)});a.p.selarrrow=[];b("#cb_"+b.jgrid.jqID(a.p.id),a.grid.hDiv)[a.p.useProp?"prop":"attr"]("checked",false)}}b(a).jqGrid("setSelection",Q[0].id,true)}}if(b.isFunction(a.p.onCellSelect)){ka=Q[0].id;la=b.jgrid.getCellIndex(X);a.p.onCellSelect.call(a,ka,la,b(X).html(),d)}}return this}).bind("reloadGrid",function(d,e){if(a.p.treeGrid===true){a.p.datatype=a.p.treedatatype}e&&e.current&&a.grid.selectionPreserver(a);if(a.p.datatype=="local"){b(a).jqGrid("resetSelection");a.p.data.length&&ca()}else{if(!a.p.treeGrid){a.p.selrow=null;if(a.p.multiselect){a.p.selarrrow=[];b("#cb_"+b.jgrid.jqID(a.p.id),a.grid.hDiv)[a.p.useProp?"prop":"attr"]("checked",false)}a.p.savedRow=[]}}a.p.scroll&&C(a.grid.bDiv,true,false);if(e&&e.page){var j=e.page;if(j>a.p.lastpage){j=a.p.lastpage}if(j<1){j=1}a.p.page=j;a.grid.bDiv.scrollTop=a.grid.prevRowHeight?(j-1)*a.grid.prevRowHeight*a.p.rowNum:0}if(a.grid.prevRowHeight&&a.p.scroll){delete a.p.lastpage;a.grid.populateVisible()}else{a.grid.populate()}return false});b.isFunction(this.p.ondblClickRow)&&b(this).dblclick(function(d){X=d.target;Q=b(X,a.rows).closest("tr.jqgrow");if(b(Q).length===0){return false}ka=Q[0].rowIndex;la=b.jgrid.getCellIndex(X);a.p.ondblClickRow.call(a,b(Q).attr("id"),ka,la,d);return false});b.isFunction(this.p.onRightClickRow)&&b(this).bind("contextmenu",function(d){X=d.target;Q=b(X,a.rows).closest("tr.jqgrow");if(b(Q).length===0){return false}a.p.multiselect||b(a).jqGrid("setSelection",Q[0].id,true);ka=Q[0].rowIndex;la=b.jgrid.getCellIndex(X);a.p.onRightClickRow.call(a,b(Q).attr("id"),ka,la,d);return false});g.bDiv=document.createElement("div");if(y){if(String(a.p.height).toLowerCase()==="auto"){a.p.height="100%"}}b(g.bDiv).append(b('<div style="position:relative;'+(y&&b.browser.version<8?"height:0.01%;":"")+'"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:a.p.height+(isNaN(a.p.height)?"":"px"),width:g.width+"px"}).scroll(g.scrollGrid);b("table:first",g.bDiv).css({width:a.p.tblwidth+"px"});if(y){b("tbody",this).size()==2&&b("tbody:gt(0)",this).remove();a.p.multikey&&b(g.bDiv).bind("selectstart",function(){return false})}else{a.p.multikey&&b(g.bDiv).bind("mousedown",function(){return false})}ea&&b(g.bDiv).hide();g.cDiv=document.createElement("div");var Aa=a.p.hidegrid===true?b("<a role='link' href='javascript:void(0)'/>").addClass("ui-jqgrid-titlebar-close HeaderButton").hover(function(){Aa.addClass("ui-state-hover")},function(){Aa.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css(l=="rtl"?"left":"right","0px"):"";b(g.cDiv).append(Aa).append("<span class='ui-jqgrid-title"+(l=="rtl"?"-rtl":"")+"'>"+a.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix");b(g.cDiv).insertBefore(g.hDiv);if(a.p.toolbar[0]){g.uDiv=document.createElement("div");if(a.p.toolbar[1]=="top"){b(g.uDiv).insertBefore(g.hDiv)}else{a.p.toolbar[1]=="bottom"&&b(g.uDiv).insertAfter(g.hDiv)}if(a.p.toolbar[1]=="both"){g.ubDiv=document.createElement("div");b(g.uDiv).insertBefore(g.hDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id);b(g.ubDiv).insertAfter(g.hDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id);ea&&b(g.ubDiv).hide()}else{b(g.uDiv).width(g.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id)}ea&&b(g.uDiv).hide()}if(a.p.toppager){a.p.toppager=b.jgrid.jqID(a.p.id)+"_toppager";g.topDiv=b("<div id='"+a.p.toppager+"'></div>")[0];a.p.toppager="#"+a.p.toppager;b(g.topDiv).insertBefore(g.hDiv).addClass("ui-state-default ui-jqgrid-toppager").width(g.width);x(a.p.toppager,"_t")}if(a.p.footerrow){g.sDiv=b("<div class='ui-jqgrid-sdiv'></div>")[0];k=b("<div class='ui-jqgrid-hbox"+(l=="rtl"?"-rtl":"")+"'></div>");b(g.sDiv).append(k).insertAfter(g.hDiv).width(g.width);b(k).append(va);g.footers=b(".ui-jqgrid-ftable",g.sDiv)[0].rows[0].cells;if(a.p.rownumbers){g.footers[0].className="ui-state-default jqgrid-rownum"}ea&&b(g.sDiv).hide()}k=null;if(a.p.caption){var Ha=a.p.datatype;if(a.p.hidegrid===true){b(".ui-jqgrid-titlebar-close",g.cDiv).click(function(d){var e=b.isFunction(a.p.onHeaderClick),j=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",m,p=this;if(a.p.toolbar[0]===true){if(a.p.toolbar[1]=="both"){j+=", #"+b(g.ubDiv).attr("id")}j+=", #"+b(g.uDiv).attr("id")}m=b(j,"#gview_"+b.jgrid.jqID(a.p.id)).length;if(a.p.gridstate=="visible"){b(j,"#gbox_"+b.jgrid.jqID(a.p.id)).slideUp("fast",function(){m--;if(m===0){b("span",p).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s");a.p.gridstate="hidden";b("#gbox_"+b.jgrid.jqID(a.p.id)).hasClass("ui-resizable")&&b(".ui-resizable-handle","#gbox_"+b.jgrid.jqID(a.p.id)).hide();if(e){ea||a.p.onHeaderClick.call(a,a.p.gridstate,d)}}})}else{a.p.gridstate=="hidden"&&b(j,"#gbox_"+b.jgrid.jqID(a.p.id)).slideDown("fast",function(){m--;if(m===0){b("span",p).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n");if(ea){a.p.datatype=Ha;ja();ea=false}a.p.gridstate="visible";b("#gbox_"+b.jgrid.jqID(a.p.id)).hasClass("ui-resizable")&&b(".ui-resizable-handle","#gbox_"+b.jgrid.jqID(a.p.id)).show();if(e){ea||a.p.onHeaderClick.call(a,a.p.gridstate,d)}}})}return false});if(ea){a.p.datatype="local";b(".ui-jqgrid-titlebar-close",g.cDiv).trigger("click")}}}else{b(g.cDiv).hide()}b(g.hDiv).after(g.bDiv).mousemove(function(d){if(g.resizing){g.dragMove(d);return false}});b(".ui-jqgrid-labels",g.hDiv).bind("selectstart",function(){return false});b(document).mouseup(function(){if(g.resizing){g.dragEnd();return false}return true});a.formatCol=P;a.sortData=Ca;a.updatepager=function(d,e){var j,m,p,B,t,E,v,z="",u=a.p.pager?"_"+b.jgrid.jqID(a.p.pager.substr(1)):"",q=a.p.toppager?"_"+a.p.toppager.substr(1):"";p=parseInt(a.p.page,10)-1;if(p<0){p=0}p*=parseInt(a.p.rowNum,10);t=p+a.p.reccount;if(a.p.scroll){j=b("tbody:first > tr:gt(0)",a.grid.bDiv);p=t-j.length;a.p.reccount=j.length;if(m=j.outerHeight()||a.grid.prevRowHeight){j=p*m;m*=parseInt(a.p.records,10);b(">div:first",a.grid.bDiv).css({height:m}).children("div:first").css({height:j,display:j?"":"none"})}a.grid.bDiv.scrollLeft=a.grid.hDiv.scrollLeft}z=a.p.pager?a.p.pager:"";z+=a.p.toppager?z?","+a.p.toppager:a.p.toppager:"";if(z){v=b.jgrid.formatter.integer||{};j=M(a.p.page);m=M(a.p.lastpage);b(".selbox",z)[this.p.useProp?"prop":"attr"]("disabled",false);if(a.p.pginput===true){b(".ui-pg-input",z).val(a.p.page);B=a.p.toppager?"#sp_1"+u+",#sp_1"+q:"#sp_1"+u;b(B).html(b.fmatter?b.fmatter.util.NumberFormat(a.p.lastpage,v):a.p.lastpage)}if(a.p.viewrecords){if(a.p.reccount===0){b(".ui-paging-info",z).html(a.p.emptyrecords)}else{B=p+1;E=a.p.records;if(b.fmatter){B=b.fmatter.util.NumberFormat(B,v);t=b.fmatter.util.NumberFormat(t,v);E=b.fmatter.util.NumberFormat(E,v)}b(".ui-paging-info",z).html(b.jgrid.format(a.p.recordtext,B,t,E))}}if(a.p.pgbuttons===true){if(j<=0){j=m=0}if(j==1||j===0){b("#first"+u+", #prev"+u).addClass("ui-state-disabled").removeClass("ui-state-hover");a.p.toppager&&b("#first_t"+q+", #prev_t"+q).addClass("ui-state-disabled").removeClass("ui-state-hover")}else{b("#first"+u+", #prev"+u).removeClass("ui-state-disabled");a.p.toppager&&b("#first_t"+q+", #prev_t"+q).removeClass("ui-state-disabled")}if(j==m||j===0){b("#next"+u+", #last"+u).addClass("ui-state-disabled").removeClass("ui-state-hover");a.p.toppager&&b("#next_t"+q+", #last_t"+q).addClass("ui-state-disabled").removeClass("ui-state-hover")}else{b("#next"+u+", #last"+u).removeClass("ui-state-disabled");a.p.toppager&&b("#next_t"+q+", #last_t"+q).removeClass("ui-state-disabled")}}}d===true&&a.p.rownumbers===true&&b("td.jqgrid-rownum",a.rows).each(function(F){b(this).html(p+1+F)});e&&a.p.jqgdnd&&b(a).jqGrid("gridDnD","updateDnD");b.isFunction(a.p.gridComplete)&&a.p.gridComplete.call(a)};a.refreshIndex=ca;a.formatter=function(d,e,j,m,p){return o(d,e,j,m,p)};b.extend(g,{populate:ja,emptyRows:C});this.grid=g;a.addXmlData=function(d){V(d,a.grid.bDiv)};a.addJSONData=function(d){fa(d,a.grid.bDiv)};this.grid.cols=this.rows[0].cells;ja();a.p.hiddengrid=false;b(window).unload(function(){a=null})}}}})};b.jgrid.extend({getGridParam:function(f){var i=this[0];if(i&&i.grid){return f?typeof i.p[f]!="undefined"?i.p[f]:null:i.p}},setGridParam:function(f){return this.each(function(){this.grid&&typeof f==="object"&&b.extend(true,this.p,f)})},getDataIDs:function(){var f=[],i=0,h,c=0;this.each(function(){if((h=this.rows.length)&&h>0){for(;i<h;){if(b(this.rows[i]).hasClass("jqgrow")){f[c]=this.rows[i].id;c++}i++}}});return f},setSelection:function(f,i){return this.each(function(){function h(a){var r=b(c.grid.bDiv)[0].clientHeight,x=b(c.grid.bDiv)[0].scrollTop,y=c.rows[a].offsetTop;a=c.rows[a].clientHeight;if(y+a>=r+x){b(c.grid.bDiv)[0].scrollTop=y-(r+x)+a+x}else{if(y<r+x){if(y<x){b(c.grid.bDiv)[0].scrollTop=y}}}}var c=this,g,k,l;if(f!==undefined){i=i===false?false:true;k=c.rows.namedItem(f+"");if(!(!k||k.className.indexOf("ui-state-disabled")>-1)){if(c.p.scrollrows===true){g=c.rows.namedItem(f).rowIndex;g>=0&&h(g)}if(c.p.multiselect){b("#cb_"+b.jgrid.jqID(c.p.id),c.grid.hDiv)[c.p.useProp?"prop":"attr"]("checked",false);c.p.selrow=k.id;l=b.inArray(c.p.selrow,c.p.selarrrow);if(l===-1){k.className!=="ui-subgrid"&&b(k).addClass("ui-state-highlight").attr("aria-selected","true");g=true;b("#jqg_"+b.jgrid.jqID(c.p.id)+"_"+b.jgrid.jqID(c.p.selrow))[c.p.useProp?"prop":"attr"]("checked",g);c.p.selarrrow.push(c.p.selrow)}else{k.className!=="ui-subgrid"&&b(k).removeClass("ui-state-highlight").attr("aria-selected","false");g=false;b("#jqg_"+b.jgrid.jqID(c.p.id)+"_"+b.jgrid.jqID(c.p.selrow))[c.p.useProp?"prop":"attr"]("checked",g);c.p.selarrrow.splice(l,1);l=c.p.selarrrow[0];c.p.selrow=l===undefined?null:l}c.p.onSelectRow&&i&&c.p.onSelectRow.call(c,k.id,g)}else{if(k.className!=="ui-subgrid"){if(c.p.selrow!=k.id){b(c.rows.namedItem(c.p.selrow)).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"});b(k).addClass("ui-state-highlight").attr({"aria-selected":"true",tabindex:"0"});g=true}else{g=false}c.p.selrow=k.id;c.p.onSelectRow&&i&&c.p.onSelectRow.call(c,k.id,g)}}}}})},resetSelection:function(f){return this.each(function(){var i=this,h,c;if(typeof f!=="undefined"){c=f===i.p.selrow?i.p.selrow:f;b("#"+b.jgrid.jqID(i.p.id)+" tbody:first tr#"+b.jgrid.jqID(c)).removeClass("ui-state-highlight").attr("aria-selected","false");if(i.p.multiselect){b("#jqg_"+b.jgrid.jqID(i.p.id)+"_"+b.jgrid.jqID(c))[i.p.useProp?"prop":"attr"]("checked",false);b("#cb_"+b.jgrid.jqID(i.p.id))[i.p.useProp?"prop":"attr"]("checked",false)}c=null}else{if(i.p.multiselect){b(i.p.selarrrow).each(function(g,k){h=i.rows.namedItem(k);b(h).removeClass("ui-state-highlight").attr("aria-selected","false");b("#jqg_"+b.jgrid.jqID(i.p.id)+"_"+b.jgrid.jqID(k))[i.p.useProp?"prop":"attr"]("checked",false)});b("#cb_"+b.jgrid.jqID(i.p.id))[i.p.useProp?"prop":"attr"]("checked",false);i.p.selarrrow=[]}else{if(i.p.selrow){b("#"+b.jgrid.jqID(i.p.id)+" tbody:first tr#"+b.jgrid.jqID(i.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false");i.p.selrow=null}}}if(i.p.cellEdit===true){if(parseInt(i.p.iCol,10)>=0&&parseInt(i.p.iRow,10)>=0){b("td:eq("+i.p.iCol+")",i.rows[i.p.iRow]).removeClass("edit-cell ui-state-highlight");b(i.rows[i.p.iRow]).removeClass("selected-row ui-state-hover")}}i.p.savedRow=[]})},getRowData:function(f){var i={},h,c=false,g,k=0;this.each(function(){var l=this,a,r;if(typeof f=="undefined"){c=true;h=[];g=l.rows.length}else{r=l.rows.namedItem(f);if(!r){return i}g=2}for(;k<g;){if(c){r=l.rows[k]}if(b(r).hasClass("jqgrow")){b("td",r).each(function(x){a=l.p.colModel[x].name;if(a!=="cb"&&a!=="subgrid"&&a!=="rn"){if(l.p.treeGrid===true&&a==l.p.ExpandColumn){i[a]=b.jgrid.htmlDecode(b("span:first",this).html())}else{try{i[a]=b.unformat(this,{rowId:r.id,colModel:l.p.colModel[x]},x)}catch(y){i[a]=b.jgrid.htmlDecode(b(this).html())}}}});if(c){h.push(i);i={}}}k++}});return h?h:i},delRowData:function(f){var i=false,h,c;this.each(function(){if(h=this.rows.namedItem(f)){b(h).remove();this.p.records--;this.p.reccount--;this.updatepager(true,false);i=true;if(this.p.multiselect){c=b.inArray(f,this.p.selarrrow);c!=-1&&this.p.selarrrow.splice(c,1)}if(f==this.p.selrow){this.p.selrow=null}}else{return false}if(this.p.datatype=="local"){var g=this.p._index[f];if(typeof g!="undefined"){this.p.data.splice(g,1);this.refreshIndex()}}if(this.p.altRows===true&&i){var k=this.p.altclass;b(this.rows).each(function(l){l%2==1?b(this).addClass(k):b(this).removeClass(k)})}});return i},setRowData:function(f,i,h){var c,g=true,k;this.each(function(){if(!this.grid){return false}var l=this,a,r,x=typeof h,y={};r=l.rows.namedItem(f);if(!r){return false}if(i){try{b(this.p.colModel).each(function(P){c=this.name;if(i[c]!==undefined){y[c]=this.formatter&&typeof this.formatter==="string"&&this.formatter=="date"?b.unformat.date(i[c],this):i[c];a=l.formatter(f,i[c],P,i,"edit");k=this.title?{title:b.jgrid.stripHtml(a)}:{};l.p.treeGrid===true&&c==l.p.ExpandColumn?b("td:eq("+P+") > span:first",r).html(a).attr(k):b("td:eq("+P+")",r).html(a).attr(k)}});if(l.p.datatype=="local"){var H=l.p._index[f];if(l.p.treeGrid){for(var L in l.p.treeReader){y.hasOwnProperty(l.p.treeReader[L])&&delete y[l.p.treeReader[L]]}}if(typeof H!="undefined"){l.p.data[H]=b.extend(true,l.p.data[H],y)}y=null}}catch(M){g=false}}if(g){if(x==="string"){b(r).addClass(h)}else{x==="object"&&b(r).css(h)}}});return g},addRowData:function(f,i,h,c){h||(h="last");var g=false,k,l,a,r,x,y,H,L,M="",P,U,o,n,s;if(i){if(b.isArray(i)){P=true;h="last";U=f}else{i=[i];P=false}this.each(function(){var D=i.length;x=this.p.rownumbers===true?1:0;a=this.p.multiselect===true?1:0;r=this.p.subGrid===true?1:0;if(!P){if(typeof f!="undefined"){f+=""}else{f=b.jgrid.randId();if(this.p.keyIndex!==false){U=this.p.colModel[this.p.keyIndex+a+r+x].name;if(typeof i[0][U]!="undefined"){f=i[0][U]}}}}o=this.p.altclass;for(var T=0,J="",C={},ca=b.isFunction(this.p.afterInsertRow)?true:false;T<D;){n=i[T];l="";if(P){try{f=n[U]}catch(V){f=b.jgrid.randId()}J=this.p.altRows===true?(this.rows.length-1)%2===0?o:"":""}f=this.p.idPrefix+f;if(x){M=this.formatCol(0,1,"",null,f,true);l+='<td role="gridcell" aria-describedby="'+this.p.id+'_rn" class="ui-state-default jqgrid-rownum" '+M+">0</td>"}if(a){L='<input role="checkbox" type="checkbox" id="jqg_'+this.p.id+"_"+f+'" class="cbox"/>';M=this.formatCol(x,1,"",null,f,true);l+='<td role="gridcell" aria-describedby="'+this.p.id+'_cb" '+M+">"+L+"</td>"}if(r){l+=b(this).jqGrid("addSubGridCell",a+x,1)}for(H=a+r+x;H<this.p.colModel.length;H++){s=this.p.colModel[H];k=s.name;C[k]=s.formatter&&typeof s.formatter==="string"&&s.formatter=="date"?b.unformat.date(n[k],s):n[k];L=this.formatter(f,b.jgrid.getAccessor(n,k),H,n,"edit");M=this.formatCol(H,1,L,n,f,true);l+='<td role="gridcell" aria-describedby="'+this.p.id+"_"+k+'" '+M+">"+L+"</td>"}l='<tr id="'+f+'" role="row" tabindex="-1" class="ui-widget-content jqgrow ui-row-'+this.p.direction+" "+J+'">'+l+"</tr>";if(this.rows.length===0){b("table:first",this.grid.bDiv).append(l)}else{switch(h){case"last":b(this.rows[this.rows.length-1]).after(l);y=this.rows.length-1;break;case"first":b(this.rows[0]).after(l);y=1;break;case"after":if(y=this.rows.namedItem(c)){b(this.rows[y.rowIndex+1]).hasClass("ui-subgrid")?b(this.rows[y.rowIndex+1]).after(l):b(y).after(l)}y++;break;case"before":if(y=this.rows.namedItem(c)){b(y).before(l);y=y.rowIndex}y--}}this.p.subGrid===true&&b(this).jqGrid("addSubGrid",a+x,y);this.p.records++;this.p.reccount++;ca&&this.p.afterInsertRow.call(this,f,n,n);T++;if(this.p.datatype=="local"){C[this.p.localReader.id]=f;this.p._index[f]=this.p.data.length;this.p.data.push(C);C={}}}if(this.p.altRows===true&&!P){if(h=="last"){(this.rows.length-1)%2==1&&b(this.rows[this.rows.length-1]).addClass(o)}else{b(this.rows).each(function(fa){fa%2==1?b(this).addClass(o):b(this).removeClass(o)})}}this.updatepager(true,true);g=true})}return g},footerData:function(f,i,h){function c(r){for(var x in r){if(r.hasOwnProperty(x)){return false}}return true}var g,k=false,l={},a;if(typeof f=="undefined"){f="get"}if(typeof h!="boolean"){h=true}f=f.toLowerCase();this.each(function(){var r=this,x;if(!r.grid||!r.p.footerrow){return false}if(f=="set"){if(c(i)){return false}}k=true;b(this.p.colModel).each(function(y){g=this.name;if(f=="set"){if(i[g]!==undefined){x=h?r.formatter("",i[g],y,i,"edit"):i[g];a=this.title?{title:b.jgrid.stripHtml(x)}:{};b("tr.footrow td:eq("+y+")",r.grid.sDiv).html(x).attr(a);k=true}}else{if(f=="get"){l[g]=b("tr.footrow td:eq("+y+")",r.grid.sDiv).html()}}})});return f=="get"?l:k},showHideCol:function(f,i){return this.each(function(){var h=this,c=false,g=b.browser.webkit||b.browser.safari?0:h.p.cellLayout,k;if(h.grid){if(typeof f==="string"){f=[f]}i=i!="none"?"":"none";var l=i===""?true:false,a=h.p.groupHeader&&(typeof h.p.groupHeader==="object"||b.isFunction(h.p.groupHeader));a&&b(h).jqGrid("destroyGroupHeader",false);b(this.p.colModel).each(function(r){if(b.inArray(this.name,f)!==-1&&this.hidden===l){b("tr",h.grid.hDiv).each(function(){b(this.cells[r]).css("display",i)});b(h.rows).each(function(){b(this.cells[r]).css("display",i)});h.p.footerrow&&b("tr.footrow td:eq("+r+")",h.grid.sDiv).css("display",i);k=this.widthOrg?this.widthOrg:parseInt(this.width,10);if(i==="none"){h.p.tblwidth-=k+g}else{h.p.tblwidth+=k+g}this.hidden=!l;c=true}});if(c===true){b(h).jqGrid("setGridWidth",h.p.shrinkToFit===true?h.p.tblwidth:h.p.width)}a&&b(h).jqGrid("setGroupHeaders",h.p.groupHeader)}})},hideCol:function(f){return this.each(function(){b(this).jqGrid("showHideCol",f,"none")})},showCol:function(f){return this.each(function(){b(this).jqGrid("showHideCol",f,"")})},remapColumns:function(f,i,h){function c(l){var a;a=l.length?b.makeArray(l):b.extend({},l);b.each(f,function(r){l[r]=a[this]})}function g(l,a){b(">tr"+(a||""),l).each(function(){var r=this,x=b.makeArray(r.cells);b.each(f,function(){var y=x[this];y&&r.appendChild(y)})})}var k=this.get(0);c(k.p.colModel);c(k.p.colNames);c(k.grid.headers);g(b("thead:first",k.grid.hDiv),h&&":not(.ui-jqgrid-labels)");i&&g(b("#"+b.jgrid.jqID(k.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot");k.p.footerrow&&g(b("tbody:first",k.grid.sDiv));if(k.p.remapColumns){if(k.p.remapColumns.length){c(k.p.remapColumns)}else{k.p.remapColumns=b.makeArray(f)}}k.p.lastsort=b.inArray(k.p.lastsort,f);if(k.p.treeGrid){k.p.expColInd=b.inArray(k.p.expColInd,f)}},setGridWidth:function(f,i){return this.each(function(){if(this.grid){var h=this,c,g=0,k=b.browser.webkit||b.browser.safari?0:h.p.cellLayout,l,a=0,r=false,x=h.p.scrollOffset,y,H=0,L=0,M;if(typeof i!="boolean"){i=h.p.shrinkToFit}if(!isNaN(f)){f=parseInt(f,10);h.grid.width=h.p.width=f;b("#gbox_"+b.jgrid.jqID(h.p.id)).css("width",f+"px");b("#gview_"+b.jgrid.jqID(h.p.id)).css("width",f+"px");b(h.grid.bDiv).css("width",f+"px");b(h.grid.hDiv).css("width",f+"px");h.p.pager&&b(h.p.pager).css("width",f+"px");h.p.toppager&&b(h.p.toppager).css("width",f+"px");if(h.p.toolbar[0]===true){b(h.grid.uDiv).css("width",f+"px");h.p.toolbar[1]=="both"&&b(h.grid.ubDiv).css("width",f+"px")}h.p.footerrow&&b(h.grid.sDiv).css("width",f+"px");if(i===false&&h.p.forceFit===true){h.p.forceFit=false}if(i===true){b.each(h.p.colModel,function(){if(this.hidden===false){c=this.widthOrg?this.widthOrg:parseInt(this.width,10);g+=c+k;if(this.fixed){H+=c+k}else{a++}L++}});if(a===0){return }h.p.tblwidth=g;y=f-k*a-H;if(!isNaN(h.p.height)){if(b(h.grid.bDiv)[0].clientHeight<b(h.grid.bDiv)[0].scrollHeight||h.rows.length===1){r=true;y-=x}}g=0;var P=h.grid.cols.length>0;b.each(h.p.colModel,function(U){if(this.hidden===false&&!this.fixed){c=this.widthOrg?this.widthOrg:parseInt(this.width,10);c=Math.round(y*c/(h.p.tblwidth-k*a-H));if(!(c<0)){this.width=c;g+=c;h.grid.headers[U].width=c;h.grid.headers[U].el.style.width=c+"px";if(h.p.footerrow){h.grid.footers[U].style.width=c+"px"}if(P){h.grid.cols[U].style.width=c+"px"}l=U}}});if(!l){return }M=0;if(r){if(f-H-(g+k*a)!==x){M=f-H-(g+k*a)-x}}else{if(Math.abs(f-H-(g+k*a))!==1){M=f-H-(g+k*a)}}h.p.colModel[l].width+=M;h.p.tblwidth=g+M+k*a+H;if(h.p.tblwidth>f){r=h.p.tblwidth-parseInt(f,10);h.p.tblwidth=f;c=h.p.colModel[l].width-=r}else{c=h.p.colModel[l].width}h.grid.headers[l].width=c;h.grid.headers[l].el.style.width=c+"px";if(P){h.grid.cols[l].style.width=c+"px"}if(h.p.footerrow){h.grid.footers[l].style.width=c+"px"}}if(h.p.tblwidth){b("table:first",h.grid.bDiv).css("width",h.p.tblwidth+"px");b("table:first",h.grid.hDiv).css("width",h.p.tblwidth+"px");h.grid.hDiv.scrollLeft=h.grid.bDiv.scrollLeft;h.p.footerrow&&b("table:first",h.grid.sDiv).css("width",h.p.tblwidth+"px")}}}})},setGridHeight:function(f){return this.each(function(){if(this.grid){b(this.grid.bDiv).css({height:f+(isNaN(f)?"":"px")});this.p.height=f;this.p.scroll&&this.grid.populateVisible()}})},setCaption:function(f){return this.each(function(){this.p.caption=f;b("span.ui-jqgrid-title",this.grid.cDiv).html(f);b(this.grid.cDiv).show()})},setLabel:function(f,i,h,c){return this.each(function(){var g=-1;if(this.grid){if(typeof f!="undefined"){b(this.p.colModel).each(function(a){if(this.name==f){g=a;return false}});if(g>=0){var k=b("tr.ui-jqgrid-labels th:eq("+g+")",this.grid.hDiv);if(i){var l=b(".s-ico",k);b("[id^=jqgh_]",k).empty().html(i).append(l);this.p.colNames[g]=i}if(h){typeof h==="string"?b(k).addClass(h):b(k).css(h)}typeof c==="object"&&b(k).attr(c)}}}})},setCell:function(f,i,h,c,g,k){return this.each(function(){var l=-1,a,r;if(this.grid){if(isNaN(i)){b(this.p.colModel).each(function(y){if(this.name==i){l=y;return false}})}else{l=parseInt(i,10)}if(l>=0){if(a=this.rows.namedItem(f)){var x=b("td:eq("+l+")",a);if(h!==""||k===true){a=this.formatter(f,h,l,a,"edit");r=this.p.colModel[l].title?{title:b.jgrid.stripHtml(a)}:{};this.p.treeGrid&&b(".tree-wrap",b(x)).length>0?b("span",b(x)).html(a).attr(r):b(x).html(a).attr(r);if(this.p.datatype=="local"){a=this.p.colModel[l];h=a.formatter&&typeof a.formatter==="string"&&a.formatter=="date"?b.unformat.date(h,a):h;r=this.p._index[f];if(typeof r!="undefined"){this.p.data[r][a.name]=h}}}if(typeof c==="string"){b(x).addClass(c)}else{c&&b(x).css(c)}typeof g==="object"&&b(x).attr(g)}}}})},getCell:function(f,i){var h=false;this.each(function(){var c=-1;if(this.grid){if(isNaN(i)){b(this.p.colModel).each(function(l){if(this.name===i){c=l;return false}})}else{c=parseInt(i,10)}if(c>=0){var g=this.rows.namedItem(f);if(g){try{h=b.unformat(b("td:eq("+c+")",g),{rowId:g.id,colModel:this.p.colModel[c]},c)}catch(k){h=b.jgrid.htmlDecode(b("td:eq("+c+")",g).html())}}}}});return h},getCol:function(f,i,h){var c=[],g,k=0,l=0,a=0,r;i=typeof i!="boolean"?false:i;if(typeof h=="undefined"){h=false}this.each(function(){var x=-1;if(this.grid){if(isNaN(f)){b(this.p.colModel).each(function(M){if(this.name===f){x=M;return false}})}else{x=parseInt(f,10)}if(x>=0){var y=this.rows.length,H=0;if(y&&y>0){for(;H<y;){if(b(this.rows[H]).hasClass("jqgrow")){try{g=b.unformat(b(this.rows[H].cells[x]),{rowId:this.rows[H].id,colModel:this.p.colModel[x]},x)}catch(L){g=b.jgrid.htmlDecode(this.rows[H].cells[x].innerHTML)}if(h){r=parseFloat(g);k+=r;l=Math.min(l,r);a=Math.max(a,r)}else{i?c.push({id:this.rows[H].id,value:g}):c.push(g)}}H++}if(h){switch(h.toLowerCase()){case"sum":c=k;break;case"avg":c=k/y;break;case"count":c=y;break;case"min":c=l;break;case"max":c=a}}}}}});return c},clearGridData:function(f){return this.each(function(){if(this.grid){if(typeof f!="boolean"){f=false}if(this.p.deepempty){b("#"+b.jgrid.jqID(this.p.id)+" tbody:first tr:gt(0)").remove()}else{var i=b("#"+b.jgrid.jqID(this.p.id)+" tbody:first tr:first")[0];b("#"+b.jgrid.jqID(this.p.id)+" tbody:first").empty().append(i)}this.p.footerrow&&f&&b(".ui-jqgrid-ftable td",this.grid.sDiv).html("&#160;");this.p.selrow=null;this.p.selarrrow=[];this.p.savedRow=[];this.p.records=0;this.p.page=1;this.p.lastpage=0;this.p.reccount=0;this.p.data=[];this.p._index={};this.updatepager(true,false)}})},getInd:function(f,i){var h=false,c;this.each(function(){if(c=this.rows.namedItem(f)){h=i===true?c:c.rowIndex}});return h},bindKeys:function(f){var i=b.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:true},f||{});return this.each(function(){var h=this;b("body").is("[role]")||b("body").attr("role","application");h.p.scrollrows=i.scrollingRows;b(h).keydown(function(c){var g=b(h).find("tr[tabindex=0]")[0],k,l,a,r=h.p.treeReader.expanded_field;if(g){a=h.p._index[g.id];if(c.keyCode===37||c.keyCode===38||c.keyCode===39||c.keyCode===40){if(c.keyCode===38){l=g.previousSibling;k="";if(l){if(b(l).is(":hidden")){for(;l;){l=l.previousSibling;if(!b(l).is(":hidden")&&b(l).hasClass("jqgrow")){k=l.id;break}}}else{k=l.id}}b(h).jqGrid("setSelection",k)}if(c.keyCode===40){l=g.nextSibling;k="";if(l){if(b(l).is(":hidden")){for(;l;){l=l.nextSibling;if(!b(l).is(":hidden")&&b(l).hasClass("jqgrow")){k=l.id;break}}}else{k=l.id}}b(h).jqGrid("setSelection",k)}if(c.keyCode===37){h.p.treeGrid&&h.p.data[a][r]&&b(g).find("div.treeclick").trigger("click");b.isFunction(i.onLeftKey)&&i.onLeftKey.call(h,h.p.selrow)}if(c.keyCode===39){h.p.treeGrid&&!h.p.data[a][r]&&b(g).find("div.treeclick").trigger("click");b.isFunction(i.onRightKey)&&i.onRightKey.call(h,h.p.selrow)}}else{if(c.keyCode===13){b.isFunction(i.onEnter)&&i.onEnter.call(h,h.p.selrow)}else{c.keyCode===32&&b.isFunction(i.onSpace)&&i.onSpace.call(h,h.p.selrow)}}}})})},unbindKeys:function(){return this.each(function(){b(this).unbind("keydown")})},getLocalRow:function(f){var i=false,h;this.each(function(){if(typeof f!=="undefined"){h=this.p._index[f];if(h>=0){i=this.p.data[h]}}});return i}})})(jQuery);(function(A){A.fmatter={};A.extend(A.fmatter,{isBoolean:function(B){return typeof B==="boolean"},isObject:function(B){return B&&(typeof B==="object"||A.isFunction(B))||false},isString:function(B){return typeof B==="string"},isNumber:function(B){return typeof B==="number"&&isFinite(B)},isNull:function(B){return B===null},isUndefined:function(B){return typeof B==="undefined"},isValue:function(B){return this.isObject(B)||this.isString(B)||this.isNumber(B)||this.isBoolean(B)},isEmpty:function(B){if(!this.isString(B)&&this.isValue(B)){return false}else{if(!this.isValue(B)){return true}}B=A.trim(B).replace(/\&nbsp\;/ig,"").replace(/\&#160\;/ig,"");return B===""}});A.fn.fmatter=function(B,G,F,E,D){var C=G;F=A.extend({},A.jgrid.formatter,F);if(A.fn.fmatter[B]){C=A.fn.fmatter[B](G,F,E,D)}return C};A.fmatter.util={NumberFormat:function(J,I){A.fmatter.isNumber(J)||(J*=1);if(A.fmatter.isNumber(J)){var H=J<0,G=J+"",F=I.decimalSeparator?I.decimalSeparator:".",E;if(A.fmatter.isNumber(I.decimalPlaces)){var D=I.decimalPlaces;G=Math.pow(10,D);G=Math.round(J*G)/G+"";E=G.lastIndexOf(".");if(D>0){if(E<0){G+=F;E=G.length-1}else{if(F!=="."){G=G.replace(".",F)}}for(;G.length-1-E<D;){G+="0"}}}if(I.thousandsSeparator){D=I.thousandsSeparator;E=G.lastIndexOf(F);E=E>-1?E:G.length;F=G.substring(E);for(var C=-1,B=E;B>0;B--){C++;if(C%3===0&&B!==E&&(!H||B>1)){F=D+F}F=G.charAt(B-1)+F}G=F}G=I.prefix?I.prefix+G:G;return G=I.suffix?G+I.suffix:G}else{return J}},DateFormat:function(P,O,N,M){var L=/^\/Date\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\)\/$/,K=typeof O==="string"?O.match(L):null;L=function(S,T){S=String(S);for(T=parseInt(T,10)||2;S.length<T;){S="0"+S}return S};var J={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},I=0,H,G=["i18n"];G.i18n={dayNames:M.dayNames,monthNames:M.monthNames};if(P in M.masks){P=M.masks[P]}if(!isNaN(O-0)&&String(P).toLowerCase()=="u"){I=new Date(parseFloat(O)*1000)}else{if(O.constructor===Date){I=O}else{if(K!==null){I=new Date(parseInt(K[1],10));if(K[3]){P=Number(K[5])*60+Number(K[6]);P*=K[4]=="-"?1:-1;P-=I.getTimezoneOffset();I.setTime(Number(Number(I)+P*60000))}}else{O=String(O).split(/[\\\/:_;.,\t\T\s-]/);P=P.split(/[\\\/:_;.,\t\T\s-]/);K=0;for(H=P.length;K<H;K++){if(P[K]=="M"){I=A.inArray(O[K],G.i18n.monthNames);if(I!==-1&&I<12){O[K]=I+1}}if(P[K]=="F"){I=A.inArray(O[K],G.i18n.monthNames);if(I!==-1&&I>11){O[K]=I+1-12}}if(O[K]){J[P[K].toLowerCase()]=parseInt(O[K],10)}}if(J.f){J.m=J.f}if(J.m===0&&J.y===0&&J.d===0){return"&#160;"}J.m=parseInt(J.m,10)-1;I=J.y;if(I>=70&&I<=99){J.y=1900+J.y}else{if(I>=0&&I<=69){J.y=2000+J.y}}I=new Date(J.y,J.m,J.d,J.h,J.i,J.s,J.u)}}}if(N in M.masks){N=M.masks[N]}else{N||(N="Y-m-d")}P=I.getHours();O=I.getMinutes();J=I.getDate();K=I.getMonth()+1;H=I.getTimezoneOffset();var F=I.getSeconds(),D=I.getMilliseconds(),E=I.getDay(),C=I.getFullYear(),B=(E+6)%7+1,R=(new Date(C,K-1,J)-new Date(C,0,1))/86400000,Q={d:L(J),D:G.i18n.dayNames[E],j:J,l:G.i18n.dayNames[E+7],N:B,S:M.S(J),w:E,z:R,W:B<5?Math.floor((R+B-1)/7)+1:Math.floor((R+B-1)/7)||(((new Date(C-1,0,1)).getDay()+6)%7<4?53:52),F:G.i18n.monthNames[K-1+12],m:L(K),M:G.i18n.monthNames[K-1],n:K,t:"?",L:"?",o:"?",Y:C,y:String(C).substring(2),a:P<12?M.AmPm[0]:M.AmPm[1],A:P<12?M.AmPm[2]:M.AmPm[3],B:"?",g:P%12||12,G:P,h:L(P%12||12),H:L(P),i:L(O),s:L(F),u:D,e:"?",I:"?",O:(H>0?"-":"+")+L(Math.floor(Math.abs(H)/60)*100+Math.abs(H)%60,4),P:"?",T:(String(I).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),Z:"?",c:"?",r:"?",U:Math.floor(I/1000)};return N.replace(/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,function(S){return S in Q?Q[S]:S.substring(1)})}};A.fn.fmatter.defaultFormat=function(B,C){return A.fmatter.isValue(B)&&B!==""?B:C.defaultValue?C.defaultValue:"&#160;"};A.fn.fmatter.email=function(B,C){return A.fmatter.isEmpty(B)?A.fn.fmatter.defaultFormat(B,C):'<a href="mailto:'+B+'">'+B+"</a>"};A.fn.fmatter.checkbox=function(B,E){var D=A.extend({},E.checkbox),C;A.fmatter.isUndefined(E.colModel.formatoptions)||(D=A.extend({},D,E.colModel.formatoptions));C=D.disabled===true?'disabled="disabled"':"";if(A.fmatter.isEmpty(B)||A.fmatter.isUndefined(B)){B=A.fn.fmatter.defaultFormat(B,D)}B+="";B=B.toLowerCase();return'<input type="checkbox" '+(B.search(/(false|0|no|off)/i)<0?" checked='checked' ":"")+' value="'+B+'" offval="no" '+C+"/>"};A.fn.fmatter.link=function(B,E){var D={target:E.target},C="";A.fmatter.isUndefined(E.colModel.formatoptions)||(D=A.extend({},D,E.colModel.formatoptions));if(D.target){C="target="+D.target}return A.fmatter.isEmpty(B)?A.fn.fmatter.defaultFormat(B,E):"<a "+C+' href="'+B+'">'+B+"</a>"};A.fn.fmatter.showlink=function(B,E){var D={baseLinkUrl:E.baseLinkUrl,showAction:E.showAction,addParam:E.addParam||"",target:E.target,idName:E.idName},C="";A.fmatter.isUndefined(E.colModel.formatoptions)||(D=A.extend({},D,E.colModel.formatoptions));if(D.target){C="target="+D.target}D=D.baseLinkUrl+D.showAction+"?"+D.idName+"="+E.rowId+D.addParam;return A.fmatter.isString(B)||A.fmatter.isNumber(B)?"<a "+C+' href="'+D+'">'+B+"</a>":A.fn.fmatter.defaultFormat(B,E)};A.fn.fmatter.integer=function(B,D){var C=A.extend({},D.integer);A.fmatter.isUndefined(D.colModel.formatoptions)||(C=A.extend({},C,D.colModel.formatoptions));if(A.fmatter.isEmpty(B)){return C.defaultValue}return A.fmatter.util.NumberFormat(B,C)};A.fn.fmatter.number=function(B,D){var C=A.extend({},D.number);A.fmatter.isUndefined(D.colModel.formatoptions)||(C=A.extend({},C,D.colModel.formatoptions));if(A.fmatter.isEmpty(B)){return C.defaultValue}return A.fmatter.util.NumberFormat(B,C)};A.fn.fmatter.currency=function(B,D){var C=A.extend({},D.currency);A.fmatter.isUndefined(D.colModel.formatoptions)||(C=A.extend({},C,D.colModel.formatoptions));if(A.fmatter.isEmpty(B)){return C.defaultValue}return A.fmatter.util.NumberFormat(B,C)};A.fn.fmatter.date=function(B,E,D,C){D=A.extend({},E.date);A.fmatter.isUndefined(E.colModel.formatoptions)||(D=A.extend({},D,E.colModel.formatoptions));return !D.reformatAfterEdit&&C=="edit"?A.fn.fmatter.defaultFormat(B,E):A.fmatter.isEmpty(B)?A.fn.fmatter.defaultFormat(B,E):A.fmatter.util.DateFormat(D.srcformat,B,D.newformat,D)};A.fn.fmatter.select=function(K,J){K+="";var I=false,H=[];if(A.fmatter.isUndefined(J.colModel.formatoptions)){if(!A.fmatter.isUndefined(J.colModel.editoptions)){I=J.colModel.editoptions.value}}else{I=J.colModel.formatoptions.value}if(I){var G=J.colModel.editoptions.multiple===true?true:false,F=[],E;if(G){F=K.split(",");F=A.map(F,function(L){return A.trim(L)})}if(A.fmatter.isString(I)){for(var D=I.split(";"),C=0,B=0;B<D.length;B++){E=D[B].split(":");if(E.length>2){E[1]=jQuery.map(E,function(L,M){if(M>0){return L}}).join(":")}if(G){if(jQuery.inArray(E[0],F)>-1){H[C]=E[1];C++}}else{if(A.trim(E[0])==A.trim(K)){H[0]=E[1];break}}}}else{if(A.fmatter.isObject(I)){if(G){H=jQuery.map(F,function(L){return I[L]})}else{H[0]=I[K]||""}}}}K=H.join(", ");return K===""?A.fn.fmatter.defaultFormat(K,J):K};A.fn.fmatter.rowactions=function(B,G,F,E){var D={keys:false,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{oper:"edit"},url:null,delOptions:{},editOptions:{}};B=A.jgrid.jqID(B);G=A.jgrid.jqID(G);E=A("#"+G)[0].p.colModel[E];A.fmatter.isUndefined(E.formatoptions)||(D=A.extend(D,E.formatoptions));if(!A.fmatter.isUndefined(A("#"+G)[0].p.editOptions)){D.editOptions=A("#"+G)[0].p.editOptions}if(!A.fmatter.isUndefined(A("#"+G)[0].p.delOptions)){D.delOptions=A("#"+G)[0].p.delOptions}E=function(H){D.afterSave&&D.afterSave(H);A("tr#"+B+" div.ui-inline-edit, tr#"+B+" div.ui-inline-del","#"+G+".ui-jqgrid-btable:first").show();A("tr#"+B+" div.ui-inline-save, tr#"+B+" div.ui-inline-cancel","#"+G+".ui-jqgrid-btable:first").hide()};var C=function(H){D.afterRestore&&D.afterRestore(H);A("tr#"+B+" div.ui-inline-edit, tr#"+B+" div.ui-inline-del","#"+G+".ui-jqgrid-btable:first").show();A("tr#"+B+" div.ui-inline-save, tr#"+B+" div.ui-inline-cancel","#"+G+".ui-jqgrid-btable:first").hide()};switch(F){case"edit":A("#"+G).jqGrid("editRow",B,D.keys,D.onEdit,D.onSuccess,D.url,D.extraparam,E,D.onError,C);A("tr#"+B+" div.ui-inline-edit, tr#"+B+" div.ui-inline-del","#"+G+".ui-jqgrid-btable:first").hide();A("tr#"+B+" div.ui-inline-save, tr#"+B+" div.ui-inline-cancel","#"+G+".ui-jqgrid-btable:first").show();break;case"save":if(A("#"+G).jqGrid("saveRow",B,D.onSuccess,D.url,D.extraparam,E,D.onError,C)){A("tr#"+B+" div.ui-inline-edit, tr#"+B+" div.ui-inline-del","#"+G+".ui-jqgrid-btable:first").show();A("tr#"+B+" div.ui-inline-save, tr#"+B+" div.ui-inline-cancel","#"+G+".ui-jqgrid-btable:first").hide()}break;case"cancel":A("#"+G).jqGrid("restoreRow",B,C);A("tr#"+B+" div.ui-inline-edit, tr#"+B+" div.ui-inline-del","#"+G+".ui-jqgrid-btable:first").show();A("tr#"+B+" div.ui-inline-save, tr#"+B+" div.ui-inline-cancel","#"+G+".ui-jqgrid-btable:first").hide();break;case"del":A("#"+G).jqGrid("delGridRow",B,D.delOptions);break;case"formedit":A("#"+G).jqGrid("setSelection",B);A("#"+G).jqGrid("editGridRow",B,D.editOptions)}};A.fn.fmatter.actions=function(B,G){var F={keys:false,editbutton:true,delbutton:true,editformbutton:false};A.fmatter.isUndefined(G.colModel.formatoptions)||(F=A.extend(F,G.colModel.formatoptions));var E=G.rowId,D="",C;if(typeof E=="undefined"||A.fmatter.isEmpty(E)){return""}if(F.editformbutton){C="onclick=jQuery.fn.fmatter.rowactions('"+E+"','"+G.gid+"','formedit',"+G.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ";D=D+"<div title='"+A.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+C+"><span class='ui-icon ui-icon-pencil'></span></div>"}else{if(F.editbutton){C="onclick=jQuery.fn.fmatter.rowactions('"+E+"','"+G.gid+"','edit',"+G.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover') ";D=D+"<div title='"+A.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+C+"><span class='ui-icon ui-icon-pencil'></span></div>"}}if(F.delbutton){C="onclick=jQuery.fn.fmatter.rowactions('"+E+"','"+G.gid+"','del',"+G.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ";D=D+"<div title='"+A.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+C+"><span class='ui-icon ui-icon-trash'></span></div>"}C="onclick=jQuery.fn.fmatter.rowactions('"+E+"','"+G.gid+"','save',"+G.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ";D=D+"<div title='"+A.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+C+"><span class='ui-icon ui-icon-disk'></span></div>";C="onclick=jQuery.fn.fmatter.rowactions('"+E+"','"+G.gid+"','cancel',"+G.pos+"); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ";D=D+"<div title='"+A.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel' "+C+"><span class='ui-icon ui-icon-cancel'></span></div>";return"<div style='margin-left:8px;'>"+D+"</div>"};A.unformat=function(J,I,H,G){var F,E=I.colModel.formatter,D=I.colModel.formatoptions||{},C=/([\.\*\_\'\(\)\{\}\+\?\\])/g,B=I.colModel.unformat||A.fn.fmatter[E]&&A.fn.fmatter[E].unformat;if(typeof B!=="undefined"&&A.isFunction(B)){F=B(A(J).text(),I,J)}else{if(!A.fmatter.isUndefined(E)&&A.fmatter.isString(E)){F=A.jgrid.formatter||{};switch(E){case"integer":D=A.extend({},F.integer,D);I=D.thousandsSeparator.replace(C,"\\$1");F=A(J).text().replace(RegExp(I,"g"),"");break;case"number":D=A.extend({},F.number,D);I=D.thousandsSeparator.replace(C,"\\$1");F=A(J).text().replace(RegExp(I,"g"),"").replace(D.decimalSeparator,".");break;case"currency":D=A.extend({},F.currency,D);I=D.thousandsSeparator.replace(C,"\\$1");F=A(J).text().replace(RegExp(I,"g"),"").replace(D.decimalSeparator,".").replace(D.prefix,"").replace(D.suffix,"");break;case"checkbox":D=I.colModel.editoptions?I.colModel.editoptions.value.split(":"):["Yes","No"];F=A("input",J).is(":checked")?D[0]:D[1];break;case"select":F=A.unformat.select(J,I,H,G);break;case"actions":return"";default:F=A(J).text()}}}return F!==undefined?F:G===true?A(J).text():A.jgrid.htmlDecode(A(J).html())};A.unformat.select=function(J,I,H,G){H=[];J=A(J).text();if(G===true){return J}I=A.extend({},I.colModel.editoptions);if(I.value){var F=I.value;I=I.multiple===true?true:false;G=[];var E;if(I){G=J.split(",");G=A.map(G,function(K){return A.trim(K)})}if(A.fmatter.isString(F)){for(var D=F.split(";"),C=0,B=0;B<D.length;B++){E=D[B].split(":");if(E.length>2){E[1]=jQuery.map(E,function(L,K){if(K>0){return L}}).join(":")}if(I){if(jQuery.inArray(E[1],G)>-1){H[C]=E[0];C++}}else{if(A.trim(E[1])==A.trim(J)){H[0]=E[0];break}}}}else{if(A.fmatter.isObject(F)||A.isArray(F)){I||(G[0]=J);H=jQuery.map(G,function(L){var K;A.each(F,function(M,N){if(N==L){K=M;return false}});if(typeof K!="undefined"){return K}})}}return H.join(", ")}else{return J||""}};A.unformat.date=function(B,D){var C=A.jgrid.formatter.date||{};A.fmatter.isUndefined(D.formatoptions)||(C=A.extend({},C,D.formatoptions));return A.fmatter.isEmpty(B)?A.fn.fmatter.defaultFormat(B,D):A.fmatter.util.DateFormat(C.newformat,B,C.srcformat,C)}})(jQuery);(function(A){A.jgrid.extend({getColProp:function(E){var D={},B=this[0];if(!B.grid){return false}B=B.p.colModel;for(var C=0;C<B.length;C++){if(B[C].name==E){D=B[C];break}}return D},setColProp:function(C,B){return this.each(function(){if(this.grid){if(B){for(var D=this.p.colModel,E=0;E<D.length;E++){if(D[E].name==C){A.extend(this.p.colModel[E],B);break}}}}})},sortGrid:function(D,C,B){return this.each(function(){var F=-1;if(this.grid){if(!D){D=this.p.sortname}for(var E=0;E<this.p.colModel.length;E++){if(this.p.colModel[E].index==D||this.p.colModel[E].name==D){F=E;break}}if(F!=-1){E=this.p.colModel[F].sortable;if(typeof E!=="boolean"){E=true}if(typeof C!=="boolean"){C=false}E&&this.sortData("jqgh_"+this.p.id+"_"+D,F,C,B)}}})},GridDestroy:function(){return this.each(function(){if(this.grid){this.p.pager&&A(this.p.pager).remove();var C=this.id;try{A("#gbox_"+C).remove()}catch(B){}}})},GridUnload:function(){return this.each(function(){if(this.grid){var C={id:A(this).attr("id"),cl:A(this).attr("class")};this.p.pager&&A(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager corner-bottom");var B=document.createElement("table");A(B).attr({id:C.id});B.className=C.cl;C=this.id;A(B).removeClass("ui-jqgrid-btable");if(A(this.p.pager).parents("#gbox_"+C).length===1){A(B).insertBefore("#gbox_"+C).show();A(this.p.pager).insertBefore("#gbox_"+C)}else{A(B).insertBefore("#gbox_"+C).show()}A("#gbox_"+C).remove()}})},setGridState:function(B){return this.each(function(){if(this.grid){if(B=="hidden"){A(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+this.p.id).slideUp("fast");this.p.pager&&A(this.p.pager).slideUp("fast");this.p.toppager&&A(this.p.toppager).slideUp("fast");if(this.p.toolbar[0]===true){this.p.toolbar[1]=="both"&&A(this.grid.ubDiv).slideUp("fast");A(this.grid.uDiv).slideUp("fast")}this.p.footerrow&&A(".ui-jqgrid-sdiv","#gbox_"+this.p.id).slideUp("fast");A(".ui-jqgrid-titlebar-close span",this.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s");this.p.gridstate="hidden"}else{if(B=="visible"){A(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+this.p.id).slideDown("fast");this.p.pager&&A(this.p.pager).slideDown("fast");this.p.toppager&&A(this.p.toppager).slideDown("fast");if(this.p.toolbar[0]===true){this.p.toolbar[1]=="both"&&A(this.grid.ubDiv).slideDown("fast");A(this.grid.uDiv).slideDown("fast")}this.p.footerrow&&A(".ui-jqgrid-sdiv","#gbox_"+this.p.id).slideDown("fast");A(".ui-jqgrid-titlebar-close span",this.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n");this.p.gridstate="visible"}}}})},filterToolbar:function(B){B=A.extend({autosearch:true,searchOnEnter:true,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:false,groupOp:"AND",defaultSearch:"bw"},B||{});return this.each(function(){function F(J,I){var H=A(J);H[0]&&jQuery.each(I,function(){this.data!==undefined?H.bind(this.type,this.data,this.fn):H.bind(this.type,this.fn)})}var C=this;if(!this.ftoolbar){var E=function(){var Q={},O=0,M,P,N={},J;A.each(C.p.colModel,function(){P=this.index||this.name;switch(this.stype){case"select":J=this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:"eq";if(M=A("#gs_"+A.jgrid.jqID(this.name),C.grid.hDiv).val()){Q[P]=M;N[P]=J;O++}else{try{delete C.p.postData[P]}catch(T){}}break;case"text":J=this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:B.defaultSearch;if(M=A("#gs_"+A.jgrid.jqID(this.name),C.grid.hDiv).val()){Q[P]=M;N[P]=J;O++}else{try{delete C.p.postData[P]}catch(S){}}}});var I=O>0?true:false;if(B.stringResult===true||C.p.datatype=="local"){var L='{"groupOp":"'+B.groupOp+'","rules":[',R=0;A.each(Q,function(T,S){if(R>0){L+=","}L+='{"field":"'+T+'",';L+='"op":"'+N[T]+'",';S+="";L+='"data":"'+S.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';R++});L+="]}";A.extend(C.p.postData,{filters:L});A.each(["searchField","searchString","searchOper"],function(T,S){C.p.postData.hasOwnProperty(S)&&delete C.p.postData[S]})}else{A.extend(C.p.postData,Q)}var K;if(C.p.searchurl){K=C.p.url;A(C).jqGrid("setGridParam",{url:C.p.searchurl})}var H=false;if(A.isFunction(B.beforeSearch)){H=B.beforeSearch.call(C)}H||A(C).jqGrid("setGridParam",{search:I}).trigger("reloadGrid",[{page:1}]);K&&A(C).jqGrid("setGridParam",{url:K});A.isFunction(B.afterSearch)&&B.afterSearch()},D=A("<tr class='ui-search-toolbar' role='rowheader'></tr>"),G;A.each(C.p.colModel,function(){var O=this,M,K,N,L;K=A("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+C.p.direction+"'></th>");M=A("<div style='width:100%;position:relative;height:100%;padding-right:0.3em;'></div>");this.hidden===true&&A(K).css("display","none");this.search=this.search===false?false:true;if(typeof this.stype=="undefined"){this.stype="text"}N=A.extend({},this.searchoptions||{});if(this.search){switch(this.stype){case"select":if(L=this.surl||N.dataUrl){A.ajax(A.extend({url:L,dataType:"html",success:function(Q){if(N.buildSelect!==undefined){(Q=N.buildSelect(Q))&&A(M).append(Q)}else{A(M).append(Q)}N.defaultValue&&A("select",M).val(N.defaultValue);A("select",M).attr({name:O.index||O.name,id:"gs_"+O.name});N.attr&&A("select",M).attr(N.attr);A("select",M).css({width:"100%"});N.dataInit!==undefined&&N.dataInit(A("select",M)[0]);N.dataEvents!==undefined&&F(A("select",M)[0],N.dataEvents);B.autosearch===true&&A("select",M).change(function(){E();return false});Q=null}},A.jgrid.ajaxOptions,C.p.ajaxSelectOptions||{}))}else{var I;if(O.searchoptions&&O.searchoptions.value){I=O.searchoptions.value}else{if(O.editoptions&&O.editoptions.value){I=O.editoptions.value}}if(I){L=document.createElement("select");L.style.width="100%";A(L).attr({name:O.index||O.name,id:"gs_"+O.name});var H,J;if(typeof I==="string"){I=I.split(";");for(var P=0;P<I.length;P++){H=I[P].split(":");J=document.createElement("option");J.value=H[0];J.innerHTML=H[1];L.appendChild(J)}}else{if(typeof I==="object"){for(H in I){if(I.hasOwnProperty(H)){J=document.createElement("option");J.value=H;J.innerHTML=I[H];L.appendChild(J)}}}}N.defaultValue&&A(L).val(N.defaultValue);N.attr&&A(L).attr(N.attr);N.dataInit!==undefined&&N.dataInit(L);N.dataEvents!==undefined&&F(L,N.dataEvents);A(M).append(L);B.autosearch===true&&A(L).change(function(){E();return false})}}break;case"text":L=N.defaultValue?N.defaultValue:"";A(M).append("<input type='text' style='width:95%;padding:0px;' name='"+(O.index||O.name)+"' id='gs_"+O.name+"' value='"+L+"'/>");N.attr&&A("input",M).attr(N.attr);N.dataInit!==undefined&&N.dataInit(A("input",M)[0]);N.dataEvents!==undefined&&F(A("input",M)[0],N.dataEvents);if(B.autosearch===true){B.searchOnEnter?A("input",M).keypress(function(Q){if((Q.charCode?Q.charCode:Q.keyCode?Q.keyCode:0)==13){E();return false}return this}):A("input",M).keydown(function(Q){switch(Q.which){case 13:return false;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:G&&clearTimeout(G);G=setTimeout(function(){E()},500)}})}}}A(K).append(M);A(D).append(K)});A("table thead",C.grid.hDiv).append(D);this.ftoolbar=true;this.triggerToolbar=E;this.clearToolbar=function(P){var N={},L,O=0,M;P=typeof P!="boolean"?true:P;A.each(C.p.colModel,function(){L=this.searchoptions&&this.searchoptions.defaultValue?this.searchoptions.defaultValue:"";M=this.index||this.name;switch(this.stype){case"select":var T;A("#gs_"+A.jgrid.jqID(M)+" option",C.grid.hDiv).each(function(U){if(U===0){this.selected=true}if(A(this).text()==L){this.selected=true;T=A(this).val();return false}});if(T){N[M]=T;O++}else{try{delete C.p.postData[M]}catch(S){}}break;case"text":A("#gs_"+A.jgrid.jqID(M),C.grid.hDiv).val(L);if(L){N[M]=L;O++}else{try{delete C.p.postData[M]}catch(R){}}}});var I=O>0?true:false;if(B.stringResult===true||C.p.datatype=="local"){var H='{"groupOp":"'+B.groupOp+'","rules":[',K=0;A.each(N,function(S,R){if(K>0){H+=","}H+='{"field":"'+S+'",';H+='"op":"eq",';R+="";H+='"data":"'+R.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}';K++});H+="]}";A.extend(C.p.postData,{filters:H});A.each(["searchField","searchString","searchOper"],function(S,R){C.p.postData.hasOwnProperty(R)&&delete C.p.postData[R]})}else{A.extend(C.p.postData,N)}var Q;if(C.p.searchurl){Q=C.p.url;A(C).jqGrid("setGridParam",{url:C.p.searchurl})}var J=false;if(A.isFunction(B.beforeClear)){J=B.beforeClear.call(C)}J||P&&A(C).jqGrid("setGridParam",{search:I}).trigger("reloadGrid",[{page:1}]);Q&&A(C).jqGrid("setGridParam",{url:Q});A.isFunction(B.afterClear)&&B.afterClear()};this.toggleToolbar=function(){var H=A("tr.ui-search-toolbar",C.grid.hDiv);H.css("display")=="none"?H.show():H.hide()}}})},destroyGroupHeader:function(B){if(typeof B=="undefined"){B=true}return this.each(function(){var G,C,F,D,I,J;C=this.grid;var H=A("table.ui-jqgrid-htable thead",C.hDiv),E=this.p.colModel;if(C){G=A("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels");D=C.headers;C=0;for(F=D.length;C<F;C++){I=E[C].hidden?"none":"";I=A(D[C].el).width(D[C].width).removeAttr("rowSpan").css("display",I);G.append(I);J=I.children("span.ui-jqgrid-resize");if(J.length>0){J[0].style.height=""}I.children("div")[0].style.top=""}A(H).children("tr.ui-jqgrid-labels").remove();A(H).prepend(G);B===true&&A(this).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(B){B=A.extend({useColSpanStyle:false,groupHeaders:[]},B||{});return this.each(function(){this.p.groupHeader=B;var P=this,T,N,K=0,G,S,Q,M,R,O=P.p.colModel,I=O.length,H=P.grid.headers,L=A("table.ui-jqgrid-htable",P.grid.hDiv),D=L.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header");G=L.children("thead");var J,F=L.find(".jqg-first-row-header");if(F.html()===null){F=A("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto")}else{F.empty()}var E,C=function(X,W){for(var V=0,U=W.length;V<U;V++){if(W[V].startColumnName===X){return V}}return -1};A(P).prepend(G);G=A("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels jqg-third-row-header");for(T=0;T<I;T++){Q=H[T].el;M=A(Q);N=O[T];S={height:"0px",width:H[T].width+"px",display:N.hidden?"none":""};A("<th>",{role:"gridcell"}).css(S).addClass("ui-first-th-"+P.p.direction).appendTo(F);Q.style.width="";S=C(N.name,B.groupHeaders);if(S>=0){S=B.groupHeaders[S];K=S.numberOfColumns;R=S.titleText;for(S=N=0;S<K&&T+S<I;S++){O[T+S].hidden||N++}S=A("<th>",{colspan:String(N),role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+P.p.direction).css({height:"22px","border-top":"0px none"}).html(R);P.p.headertitles&&S.attr("title",S.text());N===0&&S.hide();M.before(S);G.append(Q);K-=1}else{if(K===0){if(B.useColSpanStyle){M.attr("rowspan","2")}else{A("<th>",{role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+P.p.direction).css({display:N.hidden?"none":"","border-top":"0px none"}).insertBefore(M);G.append(Q)}}else{G.append(Q);K--}}}O=A(P).children("thead");O.prepend(F);G.insertAfter(D);L.append(O);if(B.useColSpanStyle){L.find("span.ui-jqgrid-resize").each(function(){var U=A(this).parent();if(U.is(":visible")){this.style.cssText="height: "+U.height()+"px !important; cursor: col-resize;"}});L.find("div.ui-jqgrid-sortable").each(function(){var V=A(this),U=V.parent();U.is(":visible")&&V.css("top",(U.height()-V.outerHeight())/2+"px")})}if(A.isFunction(P.p.resizeStop)){J=P.p.resizeStop}E=O.find("tr.jqg-first-row-header");P.p.resizeStop=function(V,U){E.find("th").eq(U).width(V);A.isFunction(J)&&J.call(P,V,U)}})}})})(jQuery);(function(A){A.extend(A.jgrid,{showModal:function(B){B.w.show()},closeModal:function(B){B.w.hide().attr("aria-hidden","true");B.o&&B.o.remove()},hideModal:function(B,E){E=A.extend({jqm:true,gb:""},E||{});if(E.onClose){var D=E.onClose(B);if(typeof D=="boolean"&&!D){return }}if(A.fn.jqm&&E.jqm===true){A(B).attr("aria-hidden","true").jqmHide()}else{if(E.gb!==""){try{A(".jqgrid-overlay:first",E.gb).hide()}catch(C){}}A(B).hide().attr("aria-hidden","true")}},findPos:function(B){var D=0,C=0;if(B.offsetParent){do{D+=B.offsetLeft;C+=B.offsetTop}while(B=B.offsetParent)}return[D,C]},createModal:function(P,O,N,L,K,J,H){var M=document.createElement("div"),G,E=this;H=A.extend({},H||{});G=A(N.gbox).attr("dir")=="rtl"?true:false;M.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog";M.id=P.themodal;var I=document.createElement("div");I.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix";I.id=P.modalhead;A(I).append("<span class='ui-jqdialog-title'>"+N.caption+"</span>");var C=A("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){C.addClass("ui-state-hover")},function(){C.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>");A(I).append(C);if(G){M.dir="rtl";A(".ui-jqdialog-title",I).css("float","right");A(".ui-jqdialog-titlebar-close",I).css("left","0.3em")}else{M.dir="ltr";A(".ui-jqdialog-title",I).css("float","left");A(".ui-jqdialog-titlebar-close",I).css("right","0.3em")}var F=document.createElement("div");A(F).addClass("ui-jqdialog-content ui-widget-content").attr("id",P.modalcontent);A(F).append(O);M.appendChild(F);A(M).prepend(I);if(J===true){A("body").append(M)}else{typeof J=="string"?A(J).append(M):A(M).insertBefore(L)}A(M).css(H);if(typeof N.jqModal==="undefined"){N.jqModal=true}O={};if(A.fn.jqm&&N.jqModal===true){if(N.left===0&&N.top===0&&N.overlay){H=[];H=this.findPos(K);N.left=H[0]+4;N.top=H[1]+4}O.top=N.top+"px";O.left=N.left}else{if(N.left!==0||N.top!==0){O.left=N.left;O.top=N.top+"px"}}A("a.ui-jqdialog-titlebar-close",I).click(function(){var Q=A("#"+P.themodal).data("onClose")||N.onClose,R=A("#"+P.themodal).data("gbox")||N.gbox;E.hideModal("#"+P.themodal,{gb:R,jqm:N.jqModal,onClose:Q});return false});if(N.width===0||!N.width){N.width=300}if(N.height===0||!N.height){N.height=200}if(!N.zIndex){L=A(L).parents("*[role=dialog]").filter(":first").css("z-index");N.zIndex=L?parseInt(L,10)+1:950}L=0;if(G&&O.left&&!J){L=A(N.gbox).width()-(!isNaN(N.width)?parseInt(N.width,10):0)-8;O.left=parseInt(O.left,10)+parseInt(L,10)}if(O.left){O.left+="px"}A(M).css(A.extend({width:isNaN(N.width)?"auto":N.width+"px",height:isNaN(N.height)?"auto":N.height+"px",zIndex:N.zIndex,overflow:"hidden"},O)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":P.modalhead,"aria-hidden":"true"});if(typeof N.drag=="undefined"){N.drag=true}if(typeof N.resize=="undefined"){N.resize=true}if(N.drag){A(I).css("cursor","move");if(A.fn.jqDrag){A(M).jqDrag(I)}else{try{A(M).draggable({handle:A("#"+I.id)})}catch(D){}}}if(N.resize){if(A.fn.jqResize){A(M).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se ui-icon-grip-diagonal-se'></div>");A("#"+P.themodal).jqResize(".jqResize",P.scrollelm?"#"+P.scrollelm:false)}else{try{A(M).resizable({handles:"se, sw",alsoResize:P.scrollelm?"#"+P.scrollelm:false})}catch(B){}}}N.closeOnEscape===true&&A(M).keydown(function(Q){if(Q.which==27){Q=A("#"+P.themodal).data("onClose")||N.onClose;E.hideModal(this,{gb:N.gbox,jqm:N.jqModal,onClose:Q})}})},viewModal:function(B,D){D=A.extend({toTop:true,overlay:10,modal:false,overlayClass:"ui-widget-overlay",onShow:this.showModal,onHide:this.closeModal,gbox:"",jqm:true,jqM:true},D||{});if(A.fn.jqm&&D.jqm===true){D.jqM?A(B).attr("aria-hidden","false").jqm(D).jqmShow():A(B).attr("aria-hidden","false").jqmShow()}else{if(D.gbox!==""){A(".jqgrid-overlay:first",D.gbox).show();A(B).data("gbox",D.gbox)}A(B).show().attr("aria-hidden","false");try{A(":input:visible",B)[0].focus()}catch(C){}}},info_dialog:function(K,J,I,G){var F={width:290,height:"auto",dataheight:"auto",drag:true,resize:false,caption:"<b>"+K+"</b>",left:250,top:170,zIndex:1000,jqModal:true,modal:false,closeOnEscape:true,align:"center",buttonalign:"center",buttons:[]};A.extend(F,G||{});var E=F.jqModal,D=this;if(A.fn.jqm&&!E){E=false}K="";if(F.buttons.length>0){for(G=0;G<F.buttons.length;G++){if(typeof F.buttons[G].id=="undefined"){F.buttons[G].id="info_button_"+G}K+="<a href='javascript:void(0)' id='"+F.buttons[G].id+"' class='fm-button ui-state-default ui-corner-all'>"+F.buttons[G].text+"</a>"}}G=isNaN(F.dataheight)?F.dataheight:F.dataheight+"px";var H="<div id='info_id'>";H+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+G+";"+("text-align:"+F.align+";")+"'>"+J+"</div>";H+=I?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+F.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+I+"</a>"+K+"</div>":K!==""?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+F.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+K+"</div>":"";H+="</div>";try{A("#info_dialog").attr("aria-hidden")=="false"&&this.hideModal("#info_dialog",{jqm:E});A("#info_dialog").remove()}catch(C){}this.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},H,F,"","",true);K&&A.each(F.buttons,function(L){A("#"+this.id,"#info_id").bind("click",function(){F.buttons[L].onClick.call(A("#info_dialog"));return false})});A("#closedialog","#info_id").click(function(){D.hideModal("#info_dialog",{jqm:E});return false});A(".fm-button","#info_dialog").hover(function(){A(this).addClass("ui-state-hover")},function(){A(this).removeClass("ui-state-hover")});A.isFunction(F.beforeOpen)&&F.beforeOpen();this.viewModal("#info_dialog",{onHide:function(L){L.w.hide().remove();L.o&&L.o.remove()},modal:F.modal,jqm:E});A.isFunction(F.afterOpen)&&F.afterOpen();try{A("#info_dialog").focus()}catch(B){}},createEl:function(M,L,K,I,H){function G(N,O){A.isFunction(O.dataInit)&&O.dataInit(N);O.dataEvents&&A.each(O.dataEvents,function(){this.data!==undefined?A(N).bind(this.type,this.data,this.fn):A(N).bind(this.type,this.fn)});return O}function E(N,Q,O){var P=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr"];if(typeof O!="undefined"&&A.isArray(O)){P=A.extend(P,O)}A.each(Q,function(S,R){A.inArray(S,P)===-1&&A(N).attr(S,R)});Q.hasOwnProperty("id")||A(N).attr("id",A.jgrid.randId())}var J="";switch(M){case"textarea":J=document.createElement("textarea");if(I){L.cols||A(J).css({width:"98%"})}else{if(!L.cols){L.cols=20}}if(!L.rows){L.rows=2}if(K=="&nbsp;"||K=="&#160;"||K.length==1&&K.charCodeAt(0)==160){K=""}J.value=K;E(J,L);L=G(J,L);A(J).attr({role:"textbox",multiline:"true"});break;case"checkbox":J=document.createElement("input");J.type="checkbox";if(L.value){M=L.value.split(":");if(K===M[0]){J.checked=true;J.defaultChecked=true}J.value=M[0];A(J).attr("offval",M[1])}else{M=K.toLowerCase();if(M.search(/(false|0|no|off|undefined)/i)<0&&M!==""){J.checked=true;J.defaultChecked=true;J.value=K}else{J.value="on"}A(J).attr("offval","off")}E(J,L,["value"]);L=G(J,L);A(J).attr("role","checkbox");break;case"select":J=document.createElement("select");J.setAttribute("role","select");I=[];if(L.multiple===true){M=true;J.multiple="multiple";A(J).attr("aria-multiselectable","true")}else{M=false}if(typeof L.dataUrl!="undefined"){A.ajax(A.extend({url:L.dataUrl,type:"GET",dataType:"html",context:{elem:J,options:L,vl:K},success:function(N){var S=[],P=this.elem,Q=this.vl,R=A.extend({},this.options),O=R.multiple===true;if(typeof R.buildSelect!="undefined"){N=R.buildSelect(N)}if(N=A(N).html()){A(P).append(N);E(P,R);R=G(P,R);if(typeof R.size==="undefined"){R.size=O?3:1}if(O){S=Q.split(",");S=A.map(S,function(T){return A.trim(T)})}else{S[0]=A.trim(Q)}setTimeout(function(){A("option",P).each(function(){A(this).attr("role","option");if(A.inArray(A.trim(A(this).text()),S)>-1||A.inArray(A.trim(A(this).val()),S)>-1){this.selected="selected"}})},0)}}},H||{}))}else{if(L.value){var D;if(typeof L.size==="undefined"){L.size=M?3:1}if(M){I=K.split(",");I=A.map(I,function(N){return A.trim(N)})}if(typeof L.value==="function"){L.value=L.value()}var C,F;if(typeof L.value==="string"){C=L.value.split(";");for(D=0;D<C.length;D++){F=C[D].split(":");if(F.length>2){F[1]=A.map(F,function(N,O){if(O>0){return N}}).join(":")}H=document.createElement("option");H.setAttribute("role","option");H.value=F[0];H.innerHTML=F[1];J.appendChild(H);if(!M&&(A.trim(F[0])==A.trim(K)||A.trim(F[1])==A.trim(K))){H.selected="selected"}if(M&&(A.inArray(A.trim(F[1]),I)>-1||A.inArray(A.trim(F[0]),I)>-1)){H.selected="selected"}}}else{if(typeof L.value==="object"){C=L.value;for(D in C){if(C.hasOwnProperty(D)){H=document.createElement("option");H.setAttribute("role","option");H.value=D;H.innerHTML=C[D];J.appendChild(H);if(!M&&(A.trim(D)==A.trim(K)||A.trim(C[D])==A.trim(K))){H.selected="selected"}if(M&&(A.inArray(A.trim(C[D]),I)>-1||A.inArray(A.trim(D),I)>-1)){H.selected="selected"}}}}}E(J,L,["value"]);L=G(J,L)}}break;case"text":case"password":case"button":D=M=="button"?"button":"textbox";J=document.createElement("input");J.type=M;J.value=K;E(J,L);L=G(J,L);if(M!="button"){if(I){L.size||A(J).css({width:"98%"})}else{if(!L.size){L.size=20}}}A(J).attr("role",D);break;case"image":case"file":J=document.createElement("input");J.type=M;E(J,L);L=G(J,L);break;case"custom":J=document.createElement("span");try{if(A.isFunction(L.custom_element)){if(C=L.custom_element.call(this,K,L)){C=A(C).addClass("customelement").attr({id:L.id,name:L.name});A(J).empty().append(C)}else{throw"e2"}}else{throw"e1"}}catch(B){B=="e1"&&this.info_dialog(A.jgrid.errors.errcap,"function 'custom_element' "+A.jgrid.edit.msg.nodefined,A.jgrid.edit.bClose);B=="e2"?this.info_dialog(A.jgrid.errors.errcap,"function 'custom_element' "+A.jgrid.edit.msg.novalue,A.jgrid.edit.bClose):this.info_dialog(A.jgrid.errors.errcap,typeof B==="string"?B:B.message,A.jgrid.edit.bClose)}}return J},checkDate:function(J,I){var H={},F;J=J.toLowerCase();F=J.indexOf("/")!=-1?"/":J.indexOf("-")!=-1?"-":J.indexOf(".")!=-1?".":"/";J=J.split(F);I=I.split(F);if(I.length!=3){return false}F=-1;for(var E,D=-1,C=-1,G=0;G<J.length;G++){E=isNaN(I[G])?0:parseInt(I[G],10);H[J[G]]=E;E=J[G];if(E.indexOf("y")!=-1){F=G}if(E.indexOf("m")!=-1){C=G}if(E.indexOf("d")!=-1){D=G}}E=J[F]=="y"||J[F]=="yyyy"?4:J[F]=="yy"?2:-1;G=function(K){for(var L=1;L<=K;L++){this[L]=31;if(L==4||L==6||L==9||L==11){this[L]=30}if(L==2){this[L]=29}}return this}(12);var B;if(F===-1){return false}else{B=H[J[F]].toString();if(E==2&&B.length==1){E=1}if(B.length!=E||H[J[F]]===0&&I[F]!="00"){return false}}if(C===-1){return false}else{B=H[J[C]].toString();if(B.length<1||H[J[C]]<1||H[J[C]]>12){return false}}if(D===-1){return false}else{B=H[J[D]].toString();if(B.length<1||H[J[D]]<1||H[J[D]]>31||H[J[C]]==2&&H[J[D]]>(H[J[F]]%4===0&&(H[J[F]]%100!==0||H[J[F]]%400===0)?29:28)||H[J[D]]>G[H[J[C]]]){return false}}return true},isEmpty:function(B){return B.match(/^\s+$/)||B===""?true:false},checkTime:function(B){var C=/^(\d{1,2}):(\d{2})([ap]m)?$/;if(!this.isEmpty(B)){if(B=B.match(C)){if(B[3]){if(B[1]<1||B[1]>12){return false}}else{if(B[1]>23){return false}}if(B[2]>59){return false}}else{return false}}return true},checkValues:function(B,I,H,F,E){var D,C;if(typeof F==="undefined"){if(typeof I=="string"){F=0;for(E=H.p.colModel.length;F<E;F++){if(H.p.colModel[F].name==I){D=H.p.colModel[F].editrules;I=F;try{C=H.p.colModel[F].formoptions.label}catch(G){}break}}}else{if(I>=0){D=H.p.colModel[I].editrules}}}else{D=F;C=E===undefined?"_":E}if(D){C||(C=H.p.colNames[I]);if(D.required===true){if(this.isEmpty(B)){return[false,C+": "+A.jgrid.edit.msg.required,""]}}F=D.required===false?false:true;if(D.number===true){if(!(F===false&&this.isEmpty(B))){if(isNaN(B)){return[false,C+": "+A.jgrid.edit.msg.number,""]}}}if(typeof D.minValue!="undefined"&&!isNaN(D.minValue)){if(parseFloat(B)<parseFloat(D.minValue)){return[false,C+": "+A.jgrid.edit.msg.minValue+" "+D.minValue,""]}}if(typeof D.maxValue!="undefined"&&!isNaN(D.maxValue)){if(parseFloat(B)>parseFloat(D.maxValue)){return[false,C+": "+A.jgrid.edit.msg.maxValue+" "+D.maxValue,""]}}if(D.email===true){if(!(F===false&&this.isEmpty(B))){E=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;if(!E.test(B)){return[false,C+": "+A.jgrid.edit.msg.email,""]}}}if(D.integer===true){if(!(F===false&&this.isEmpty(B))){if(isNaN(B)){return[false,C+": "+A.jgrid.edit.msg.integer,""]}if(B%1!==0||B.indexOf(".")!=-1){return[false,C+": "+A.jgrid.edit.msg.integer,""]}}}if(D.date===true){if(!(F===false&&this.isEmpty(B))){I=H.p.colModel[I].formatoptions&&H.p.colModel[I].formatoptions.newformat?H.p.colModel[I].formatoptions.newformat:H.p.colModel[I].datefmt||"Y-m-d";if(!this.checkDate(I,B)){return[false,C+": "+A.jgrid.edit.msg.date+" - "+I,""]}}}if(D.time===true){if(!(F===false&&this.isEmpty(B))){if(!this.checkTime(B)){return[false,C+": "+A.jgrid.edit.msg.date+" - hh:mm (am/pm)",""]}}}if(D.url===true){if(!(F===false&&this.isEmpty(B))){E=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;if(!E.test(B)){return[false,C+": "+A.jgrid.edit.msg.url,""]}}}if(D.custom===true){if(!(F===false&&this.isEmpty(B))){if(A.isFunction(D.custom_func)){B=D.custom_func.call(H,B,C);return A.isArray(B)?B:[false,A.jgrid.edit.msg.customarray,""]}else{return[false,A.jgrid.edit.msg.customfcheck,""]}}}}return[true,"",""]}})})(jQuery);(function(A){var B={};A.jgrid.extend({searchGrid:function(C){C=A.extend({recreateFilter:false,drag:true,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:true,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,closeAfterSearch:false,closeAfterReset:false,closeOnEscape:false,multipleSearch:false,multipleGroup:false,top:0,left:0,jqModal:true,modal:false,resize:true,width:450,height:"auto",dataheight:"auto",showQuery:false,errorcheck:true,sopt:null,stringResult:undefined,onClose:null,onSearch:null,onReset:null,toTop:true,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:false,layer:null},A.jgrid.search,C||{});return this.each(function(){function Z(){if(A.isFunction(C.beforeShowSearch)){K=C.beforeShowSearch(A("#"+R));if(typeof K==="undefined"){K=true}}if(K){A.jgrid.viewModal("#"+Q.themodal,{gbox:"#gbox_"+R,jqm:C.jqModal,modal:C.modal,overlay:C.overlay,toTop:C.toTop});A.isFunction(C.afterShowSearch)&&C.afterShowSearch(A("#"+R))}}var X=this;if(X.grid){var R="fbox_"+X.p.id,K=true,Q={themodal:"searchmod"+R,modalhead:"searchhd"+R,modalcontent:"searchcnt"+R,scrollelm:R},M=X.p.postData[C.sFilter];if(typeof M==="string"){M=A.jgrid.parse(M)}C.recreateFilter===true&&A("#"+Q.themodal).remove();if(A("#"+Q.themodal).html()!==null){Z()}else{var I=A("<div><div id='"+R+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore("#gview_"+X.p.id),T="left",V="";if(X.p.direction=="rtl"){T="right";V=" style='text-align:left'";I.attr("dir","rtl")}if(A.isFunction(C.onInitializeSearch)){C.onInitializeSearch(A("#"+R))}var P=A.extend([],X.p.colModel),E="<a href='javascript:void(0)' id='"+R+"_search' class='fm-button ui-state-default ui-corner-all fm-button-icon-right ui-reset'><span class='ui-icon ui-icon-search'></span>"+C.Find+"</a>",Y="<a href='javascript:void(0)' id='"+R+"_reset' class='fm-button ui-state-default ui-corner-all fm-button-icon-left ui-search'><span class='ui-icon ui-icon-arrowreturnthick-1-w'></span>"+C.Reset+"</a>",O="",S="",W,U=false,L=-1;if(C.showQuery){O="<a href='javascript:void(0)' id='"+R+"_query' class='fm-button ui-state-default ui-corner-all fm-button-icon-left'><span class='ui-icon ui-icon-comment'></span>Query</a>"}if(C.columns.length){P=C.columns}else{A.each(P,function(F,G){if(!G.label){G.label=X.p.colNames[F]}if(!U){var J=typeof G.search==="undefined"?true:G.search,D=G.hidden===true;if(G.searchoptions&&G.searchoptions.searchhidden===true&&J||J&&!D){U=true;W=G.index||G.name;L=F}}})}if(!M&&W||C.multipleSearch===false){var H="eq";if(L>=0&&P[L].searchoptions&&P[L].searchoptions.sopt){H=P[L].searchoptions.sopt[0]}else{if(C.sopt&&C.sopt.length){H=C.sopt[0]}}M={groupOp:"AND",rules:[{field:W,op:H,data:""}]}}U=false;if(C.tmplNames&&C.tmplNames.length){U=true;S=C.tmplLabel;S+="<select class='ui-template'>";S+="<option value='default'>Default</option>";A.each(C.tmplNames,function(D,F){S+="<option value='"+D+"'>"+F+"</option>"});S+="</select>"}T="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+R+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='EditButton' style='text-align:"+T+"'>"+Y+S+"</td><td class='EditButton' "+V+">"+O+E+"</td></tr></tbody></table>";A("#"+R).jqFilter({columns:P,filter:C.loadDefaults?M:null,showQuery:C.showQuery,errorcheck:C.errorcheck,sopt:C.sopt,groupButton:C.multipleGroup,ruleButtons:C.multipleSearch,afterRedraw:C.afterRedraw,_gridsopt:A.jgrid.search.odata,onChange:function(){this.p.showQuery&&A(".query",this).html(this.toUserFriendlyString())},direction:X.p.direction});I.append(T);U&&C.tmplFilters&&C.tmplFilters.length&&A(".ui-template",I).bind("change",function(){var D=A(this).val();D=="default"?A("#"+R).jqFilter("addFilter",M):A("#"+R).jqFilter("addFilter",C.tmplFilters[parseInt(D,10)]);return false});if(C.multipleGroup===true){C.multipleSearch=true}if(A.isFunction(C.onInitializeSearch)){C.onInitializeSearch(A("#"+R))}C.gbox="#gbox_"+R;C.layer?A.jgrid.createModal(Q,I,C,"#gview_"+X.p.id,A("#gbox_"+X.p.id)[0],"#"+C.layer,{position:"relative"}):A.jgrid.createModal(Q,I,C,"#gview_"+X.p.id,A("#gbox_"+X.p.id)[0]);O&&A("#"+R+"_query").bind("click",function(){A(".queryresult",I).toggle();return false});if(C.stringResult===undefined){C.stringResult=C.multipleSearch}A("#"+R+"_search").bind("click",function(){var F=A("#"+R),J={},a,D=F.jqFilter("filterData");if(C.errorcheck){F[0].hideError();C.showQuery||F.jqFilter("toSQLString");if(F[0].p.error){F[0].showError();return false}}if(C.stringResult){try{a=xmlJsonClass.toJson(D,"","",false)}catch(N){try{a=JSON.stringify(D)}catch(G){}}if(typeof a==="string"){J[C.sFilter]=a;A.each([C.sField,C.sValue,C.sOper],function(){J[this]=""})}}else{if(C.multipleSearch){J[C.sFilter]=D;A.each([C.sField,C.sValue,C.sOper],function(){J[this]=""})}else{J[C.sField]=D.rules[0].field;J[C.sValue]=D.rules[0].data;J[C.sOper]=D.rules[0].op;J[C.sFilter]=""}}X.p.search=true;A.extend(X.p.postData,J);if(A.isFunction(C.onSearch)){C.onSearch()}A(X).trigger("reloadGrid",[{page:1}]);C.closeAfterSearch&&A.jgrid.hideModal("#"+Q.themodal,{gb:"#gbox_"+X.p.id,jqm:C.jqModal,onClose:C.onClose});return false});A("#"+R+"_reset").bind("click",function(){var D={},F=A("#"+R);X.p.search=false;if(C.multipleSearch===false){D[C.sField]=D[C.sValue]=D[C.sOper]=""}else{D[C.sFilter]=""}F[0].resetFilter();U&&A(".ui-template",I).val("default");A.extend(X.p.postData,D);if(A.isFunction(C.onReset)){C.onReset()}A(X).trigger("reloadGrid",[{page:1}]);return false});Z();A(".fm-button:not(.ui-state-disabled)",I).hover(function(){A(this).addClass("ui-state-hover")},function(){A(this).removeClass("ui-state-hover")})}}})},editGridRow:function(D,C){C=A.extend({top:0,left:0,width:300,height:"auto",dataheight:"auto",modal:false,overlay:30,drag:true,resize:true,url:null,mtype:"POST",clearAfterAdd:true,closeAfterEdit:false,reloadAfterSubmit:true,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:false,jqModal:true,closeOnEscape:false,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[false,13],navkeys:[false,38,40],checkOnSubmit:false,checkOnUpdate:false,_savedData:{},processing:false,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:true},A.jgrid.edit,C||{});B[A(this)[0].p.id]=C;return this.each(function(){function AN(){A("#"+AL+" > tbody > tr > td > .FormElement").each(function(){var G=A(".customelement",this);if(G.length){var F=A(G[0]).attr("name");A.each(AO.p.colModel,function(){if(this.name===F&&this.editoptions&&A.isFunction(this.editoptions.custom_value)){try{AM[F]=this.editoptions.custom_value(A("#"+A.jgrid.jqID(F),"#"+AL),"get");if(AM[F]===undefined){throw"e1"}}catch(J){J==="e1"?A.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+A.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose):A.jgrid.info_dialog(jQuery.jgrid.errors.errcap,J.message,jQuery.jgrid.edit.bClose)}return true}})}else{switch(A(this).get(0).type){case"checkbox":if(A(this).is(":checked")){AM[this.name]=A(this).val()}else{G=A(this).attr("offval");AM[this.name]=G}break;case"select-one":AM[this.name]=A("option:selected",this).val();T[this.name]=A("option:selected",this).text();break;case"select-multiple":AM[this.name]=A(this).val();AM[this.name]=AM[this.name]?AM[this.name].join(","):"";var E=[];A("option:selected",this).each(function(L,J){E[L]=A(J).text()});T[this.name]=E.join(",");break;case"password":case"text":case"textarea":case"button":AM[this.name]=A(this).val()}if(AO.p.autoencode){AM[this.name]=A.jgrid.htmlEncode(AM[this.name])}}});return true}function AC(R,N,c,G){var e,F,h,W=0,J,P,X,L=[],V=false,E="",O;for(O=1;O<=G;O++){E+="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>"}if(R!="_empty"){V=A(N).jqGrid("getInd",R)}A(N.p.colModel).each(function(k){e=this.name;P=(F=this.editrules&&this.editrules.edithidden===true?false:this.hidden===true?true:false)?"style='display:none'":"";if(e!=="cb"&&e!=="subgrid"&&this.editable===true&&e!=="rn"){if(V===false){J=""}else{if(e==N.p.ExpandColumn&&N.p.treeGrid===true){J=A("td:eq("+k+")",N.rows[V]).text()}else{try{J=A.unformat(A("td:eq("+k+")",N.rows[V]),{rowId:R,colModel:this},k)}catch(p){J=this.edittype&&this.edittype=="textarea"?A("td:eq("+k+")",N.rows[V]).text():A("td:eq("+k+")",N.rows[V]).html()}if(!J||J=="&nbsp;"||J=="&#160;"||J.length==1&&J.charCodeAt(0)==160){J=""}}}var o=A.extend({},this.editoptions||{},{id:e,name:e}),n=A.extend({},{elmprefix:"",elmsuffix:"",rowabove:false,rowcontent:""},this.formoptions||{}),m=parseInt(n.rowpos,10)||W+1,j=parseInt((parseInt(n.colpos,10)||1)*2,10);if(R=="_empty"&&o.defaultValue){J=A.isFunction(o.defaultValue)?o.defaultValue():o.defaultValue}if(!this.edittype){this.edittype="text"}if(AO.p.autoencode){J=A.jgrid.htmlDecode(J)}X=A.jgrid.createEl(this.edittype,o,J,false,A.extend({},A.jgrid.ajaxOptions,N.p.ajaxSelectOptions||{}));if(J===""&&this.edittype=="checkbox"){J=A(X).attr("offval")}if(J===""&&this.edittype=="select"){J=A("option:eq(0)",X).text()}if(B[AO.p.id].checkOnSubmit||B[AO.p.id].checkOnUpdate){B[AO.p.id]._savedData[e]=J}A(X).addClass("FormElement");if(this.edittype=="text"||this.edittype=="textarea"){A(X).addClass("ui-widget-content ui-corner-all")}h=A(c).find("tr[rowpos="+m+"]");if(n.rowabove){o=A("<tr><td class='contentinfo' colspan='"+G*2+"'>"+n.rowcontent+"</td></tr>");A(c).append(o);o[0].rp=m}if(h.length===0){h=A("<tr "+P+" rowpos='"+m+"'></tr>").addClass("FormData").attr("id","tr_"+e);A(h).append(E);A(c).append(h);h[0].rp=m}A("td:eq("+(j-2)+")",h[0]).html(typeof n.label==="undefined"?N.p.colNames[k]:n.label);A("td:eq("+(j-1)+")",h[0]).append(n.elmprefix).append(X).append(n.elmsuffix);L[W]=k;W++}});if(W>0){O=A("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(G*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+N.p.id+"_id' value='"+R+"'/></td></tr>");O[0].rp=W+999;A(c).append(O);if(B[AO.p.id].checkOnSubmit||B[AO.p.id].checkOnUpdate){B[AO.p.id]._savedData[N.p.id+"_id"]=R}}return L}function f(O,L,V){var F,W=0,E,X,P,G,N;if(B[AO.p.id].checkOnSubmit||B[AO.p.id].checkOnUpdate){B[AO.p.id]._savedData={};B[AO.p.id]._savedData[L.p.id+"_id"]=O}var R=L.p.colModel;if(O=="_empty"){A(R).each(function(){F=this.name;P=A.extend({},this.editoptions||{});if((X=A("#"+A.jgrid.jqID(F),"#"+V))&&X.length&&X[0]!==null){G="";if(P.defaultValue){G=A.isFunction(P.defaultValue)?P.defaultValue():P.defaultValue;if(X[0].type=="checkbox"){N=G.toLowerCase();if(N.search(/(false|0|no|off|undefined)/i)<0&&N!==""){X[0].checked=true;X[0].defaultChecked=true;X[0].value=G}else{X[0].checked=false;X[0].defaultChecked=false}}else{X.val(G)}}else{if(X[0].type=="checkbox"){X[0].checked=false;X[0].defaultChecked=false;G=A(X).attr("offval")}else{if(X[0].type&&X[0].type.substr(0,6)=="select"){X[0].selectedIndex=0}else{X.val(G)}}}if(B[AO.p.id].checkOnSubmit===true||B[AO.p.id].checkOnUpdate){B[AO.p.id]._savedData[F]=G}}});A("#id_g","#"+V).val(O)}else{var J=A(L).jqGrid("getInd",O,true);if(J){A("td",J).each(function(j){F=R[j].name;if(F!=="cb"&&F!=="subgrid"&&F!=="rn"&&R[j].editable===true){if(F==L.p.ExpandColumn&&L.p.treeGrid===true){E=A(this).text()}else{try{E=A.unformat(A(this),{rowId:O,colModel:R[j]},j)}catch(h){E=R[j].edittype=="textarea"?A(this).text():A(this).html()}}if(AO.p.autoencode){E=A.jgrid.htmlDecode(E)}if(B[AO.p.id].checkOnSubmit===true||B[AO.p.id].checkOnUpdate){B[AO.p.id]._savedData[F]=E}F=A.jgrid.jqID(F);switch(R[j].edittype){case"password":case"text":case"button":case"image":case"textarea":if(E=="&nbsp;"||E=="&#160;"||E.length==1&&E.charCodeAt(0)==160){E=""}A("#"+F,"#"+V).val(E);break;case"select":var e=E.split(",");e=A.map(e,function(k){return A.trim(k)});A("#"+F+" option","#"+V).each(function(){this.selected=!R[j].editoptions.multiple&&(A.trim(E)==A.trim(A(this).text())||e[0]==A.trim(A(this).text())||e[0]==A.trim(A(this).val()))?true:R[j].editoptions.multiple?A.inArray(A.trim(A(this).text()),e)>-1||A.inArray(A.trim(A(this).val()),e)>-1?true:false:false});break;case"checkbox":E+="";if(R[j].editoptions&&R[j].editoptions.value){if(R[j].editoptions.value.split(":")[0]==E){A("#"+F,"#"+V)[AO.p.useProp?"prop":"attr"]("checked",true);A("#"+F,"#"+V)[AO.p.useProp?"prop":"attr"]("defaultChecked",true)}else{A("#"+F,"#"+V)[AO.p.useProp?"prop":"attr"]("checked",false);A("#"+F,"#"+V)[AO.p.useProp?"prop":"attr"]("defaultChecked",false)}}else{E=E.toLowerCase();if(E.search(/(false|0|no|off|undefined)/i)<0&&E!==""){A("#"+F,"#"+V)[AO.p.useProp?"prop":"attr"]("checked",true);A("#"+F,"#"+V)[AO.p.useProp?"prop":"attr"]("defaultChecked",true)}else{A("#"+F,"#"+V)[AO.p.useProp?"prop":"attr"]("checked",false);A("#"+F,"#"+V)[AO.p.useProp?"prop":"attr"]("defaultChecked",false)}}break;case"custom":try{if(R[j].editoptions&&A.isFunction(R[j].editoptions.custom_value)){R[j].editoptions.custom_value(A("#"+F,"#"+V),"set",E)}else{throw"e1"}}catch(c){c=="e1"?A.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+A.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose):A.jgrid.info_dialog(jQuery.jgrid.errors.errcap,c.message,jQuery.jgrid.edit.bClose)}}W++}});W>0&&A("#id_g","#"+AL).val(O)}}}function AB(){var L,J=[true,"",""],O={},F=AO.p.prmNames,P,E,R,N;if(A.isFunction(B[AO.p.id].beforeCheckValues)){var G=B[AO.p.id].beforeCheckValues(AM,A("#"+AE),AM[AO.p.id+"_id"]=="_empty"?F.addoper:F.editoper);if(G&&typeof G==="object"){AM=G}}for(R in AM){if(AM.hasOwnProperty(R)){J=A.jgrid.checkValues(AM[R],R,AO);if(J[0]===false){break}}}d();if(J[0]){if(A.isFunction(B[AO.p.id].onclickSubmit)){O=B[AO.p.id].onclickSubmit(B[AO.p.id],AM)||{}}if(A.isFunction(B[AO.p.id].beforeSubmit)){J=B[AO.p.id].beforeSubmit(AM,A("#"+AE))}}if(J[0]&&!B[AO.p.id].processing){B[AO.p.id].processing=true;A("#sData","#"+AL+"_2").addClass("ui-state-active");E=F.oper;P=F.id;AM[E]=A.trim(AM[AO.p.id+"_id"])=="_empty"?F.addoper:F.editoper;if(AM[E]!=F.addoper){AM[P]=AM[AO.p.id+"_id"]}else{if(AM[P]===undefined){AM[P]=AM[AO.p.id+"_id"]}}delete AM[AO.p.id+"_id"];AM=A.extend(AM,B[AO.p.id].editData,O);if(AO.p.treeGrid===true){if(AM[E]==F.addoper){N=A(AO).jqGrid("getGridParam","selrow");AM[AO.p.treeGridModel=="adjacency"?AO.p.treeReader.parent_id_field:"parent_id"]=N}for(i in AO.p.treeReader){O=AO.p.treeReader[i];if(AM.hasOwnProperty(O)){AM[E]==F.addoper&&i==="parent_id_field"||delete AM[O]}}}AM[P]=A.jgrid.stripPref(AO.p.idPrefix,AM[P]);O=A.extend({url:B[AO.p.id].url?B[AO.p.id].url:A(AO).jqGrid("getGridParam","editurl"),type:B[AO.p.id].mtype,data:A.isFunction(B[AO.p.id].serializeEditData)?B[AO.p.id].serializeEditData(AM):AM,complete:function(X,W){AM[P]=AO.p.idPrefix+AM[P];if(W!="success"){J[0]=false;J[1]=A.isFunction(B[AO.p.id].errorTextFormat)?B[AO.p.id].errorTextFormat(X):W+" Status: '"+X.statusText+"'. Error code: "+X.status}else{if(A.isFunction(B[AO.p.id].afterSubmit)){J=B[AO.p.id].afterSubmit(X,AM)}}if(J[0]===false){A("#FormError>td","#"+AL).html(J[1]);A("#FormError","#"+AL).show()}else{A.each(AO.p.colModel,function(){if(T[this.name]&&this.formatter&&this.formatter=="select"){try{delete T[this.name]}catch(e){}}});AM=A.extend(AM,T);AO.p.autoencode&&A.each(AM,function(h,e){AM[h]=A.jgrid.htmlDecode(e)});if(AM[E]==F.addoper){J[2]||(J[2]=A.jgrid.randId());AM[P]=J[2];if(B[AO.p.id].closeAfterAdd){if(B[AO.p.id].reloadAfterSubmit){A(AO).trigger("reloadGrid")}else{if(AO.p.treeGrid===true){A(AO).jqGrid("addChildNode",J[2],N,AM)}else{A(AO).jqGrid("addRowData",J[2],AM,C.addedrow);A(AO).jqGrid("setSelection",J[2])}}A.jgrid.hideModal("#"+AI.themodal,{gb:"#gbox_"+w,jqm:C.jqModal,onClose:B[AO.p.id].onClose})}else{if(B[AO.p.id].clearAfterAdd){if(B[AO.p.id].reloadAfterSubmit){A(AO).trigger("reloadGrid")}else{AO.p.treeGrid===true?A(AO).jqGrid("addChildNode",J[2],N,AM):A(AO).jqGrid("addRowData",J[2],AM,C.addedrow)}f("_empty",AO,AE)}else{if(B[AO.p.id].reloadAfterSubmit){A(AO).trigger("reloadGrid")}else{AO.p.treeGrid===true?A(AO).jqGrid("addChildNode",J[2],N,AM):A(AO).jqGrid("addRowData",J[2],AM,C.addedrow)}}}}else{if(B[AO.p.id].reloadAfterSubmit){A(AO).trigger("reloadGrid");B[AO.p.id].closeAfterEdit||setTimeout(function(){A(AO).jqGrid("setSelection",AM[P])},1000)}else{AO.p.treeGrid===true?A(AO).jqGrid("setTreeRow",AM[P],AM):A(AO).jqGrid("setRowData",AM[P],AM)}B[AO.p.id].closeAfterEdit&&A.jgrid.hideModal("#"+AI.themodal,{gb:"#gbox_"+w,jqm:C.jqModal,onClose:B[AO.p.id].onClose})}if(A.isFunction(B[AO.p.id].afterComplete)){L=X;setTimeout(function(){B[AO.p.id].afterComplete(L,AM,A("#"+AE));L=null},500)}if(B[AO.p.id].checkOnSubmit||B[AO.p.id].checkOnUpdate){A("#"+AE).data("disabled",false);if(B[AO.p.id]._savedData[AO.p.id+"_id"]!="_empty"){for(var V in B[AO.p.id]._savedData){if(AM[V]){B[AO.p.id]._savedData[V]=AM[V]}}}}}B[AO.p.id].processing=false;A("#sData","#"+AL+"_2").removeClass("ui-state-active");try{A(":input:visible","#"+AE)[0].focus()}catch(c){}}},A.jgrid.ajaxOptions,B[AO.p.id].ajaxEditOptions);if(!O.url&&!B[AO.p.id].useDataProxy){if(A.isFunction(AO.p.dataProxy)){B[AO.p.id].useDataProxy=true}else{J[0]=false;J[1]+=" "+A.jgrid.errors.nourl}}if(J[0]){if(B[AO.p.id].useDataProxy){R=AO.p.dataProxy.call(AO,O,"set_"+AO.p.id);if(typeof R=="undefined"){R=[true,""]}if(R[0]===false){J[0]=false;J[1]=R[1]||"Error deleting the selected row!"}else{O.data.oper==F.addoper&&B[AO.p.id].closeAfterAdd&&A.jgrid.hideModal("#"+AI.themodal,{gb:"#gbox_"+w,jqm:C.jqModal,onClose:B[AO.p.id].onClose});O.data.oper==F.editoper&&B[AO.p.id].closeAfterEdit&&A.jgrid.hideModal("#"+AI.themodal,{gb:"#gbox_"+w,jqm:C.jqModal,onClose:B[AO.p.id].onClose})}}else{A.ajax(O)}}}if(J[0]===false){A("#FormError>td","#"+AL).html(J[1]);A("#FormError","#"+AL).show()}}function q(G,F){var E=false,J;for(J in G){if(G[J]!=F[J]){E=true;break}}return E}function d(){A.each(AO.p.colModel,function(F,E){if(E.editoptions&&E.editoptions.NullIfEmpty===true){if(AM.hasOwnProperty(E.name)&&AM[E.name]==""){AM[E.name]="null"}}})}function AG(){var E=true;A("#FormError","#"+AL).hide();if(B[AO.p.id].checkOnUpdate){AM={};T={};AN();U=A.extend({},AM,T);if(K=q(U,B[AO.p.id]._savedData)){A("#"+AE).data("disabled",true);A(".confirm","#"+AI.themodal).show();E=false}}return E}function AK(){if(D!=="_empty"&&typeof AO.p.savedRow!=="undefined"&&AO.p.savedRow.length>0&&A.isFunction(A.fn.jqGrid.restoreRow)){for(var E=0;E<AO.p.savedRow.length;E++){if(AO.p.savedRow[E].id==D){A(AO).jqGrid("restoreRow",D);break}}}}function AA(F,E){F===0?A("#pData","#"+AL+"_2").addClass("ui-state-disabled"):A("#pData","#"+AL+"_2").removeClass("ui-state-disabled");F==E?A("#nData","#"+AL+"_2").addClass("ui-state-disabled"):A("#nData","#"+AL+"_2").removeClass("ui-state-disabled")}function Y(){var F=A(AO).jqGrid("getDataIDs"),E=A("#id_g","#"+AL).val();return[A.inArray(E,F),F]}var AO=this;if(AO.grid&&D){var w=AO.p.id,AE="FrmGrid_"+w,AL="TblGrid_"+w,AI={themodal:"editmod"+w,modalhead:"edithd"+w,modalcontent:"editcnt"+w,scrollelm:AE},g=A.isFunction(B[AO.p.id].beforeShowForm)?B[AO.p.id].beforeShowForm:false,b=A.isFunction(B[AO.p.id].afterShowForm)?B[AO.p.id].afterShowForm:false,l=A.isFunction(B[AO.p.id].beforeInitData)?B[AO.p.id].beforeInitData:false,v=A.isFunction(B[AO.p.id].onInitializeForm)?B[AO.p.id].onInitializeForm:false,AD=true,AJ=1,a=0,AM,T,U,K;if(D==="new"){D="_empty";C.caption=B[AO.p.id].addCaption}else{C.caption=B[AO.p.id].editCaption}C.recreateForm===true&&A("#"+AI.themodal).html()!==null&&A("#"+AI.themodal).remove();var Q=true;if(C.checkOnUpdate&&C.jqModal&&!C.modal){Q=false}if(A("#"+AI.themodal).html()!==null){if(l){AD=l(A("#"+AE));if(typeof AD=="undefined"){AD=true}}if(AD===false){return }AK();A(".ui-jqdialog-title","#"+AI.modalhead).html(C.caption);A("#FormError","#"+AL).hide();if(B[AO.p.id].topinfo){A(".topinfo","#"+AL).html(B[AO.p.id].topinfo);A(".tinfo","#"+AL).show()}else{A(".tinfo","#"+AL).hide()}if(B[AO.p.id].bottominfo){A(".bottominfo","#"+AL+"_2").html(B[AO.p.id].bottominfo);A(".binfo","#"+AL+"_2").show()}else{A(".binfo","#"+AL+"_2").hide()}f(D,AO,AE);D=="_empty"||!B[AO.p.id].viewPagerButtons?A("#pData, #nData","#"+AL+"_2").hide():A("#pData, #nData","#"+AL+"_2").show();if(B[AO.p.id].processing===true){B[AO.p.id].processing=false;A("#sData","#"+AL+"_2").removeClass("ui-state-active")}if(A("#"+AE).data("disabled")===true){A(".confirm","#"+AI.themodal).hide();A("#"+AE).data("disabled",false)}g&&g(A("#"+AE));A("#"+AI.themodal).data("onClose",B[AO.p.id].onClose);A.jgrid.viewModal("#"+AI.themodal,{gbox:"#gbox_"+w,jqm:C.jqModal,jqM:false,overlay:C.overlay,modal:C.modal});Q||A(".jqmOverlay").click(function(){if(!AG()){return false}A.jgrid.hideModal("#"+AI.themodal,{gb:"#gbox_"+w,jqm:C.jqModal,onClose:B[AO.p.id].onClose});return false});b&&b(A("#"+AE))}else{var Z=isNaN(C.dataheight)?C.dataheight:C.dataheight+"px";Z=A("<form name='FormPost' id='"+AE+"' class='FormGrid' onSubmit='return false;' style='width:100%;overflow:auto;position:relative;height:"+Z+";'></form>").data("disabled",false);var I=A("<table id='"+AL+"' class='EditTable' cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>");if(l){AD=l(A("#"+AE));if(typeof AD=="undefined"){AD=true}}if(AD===false){return }AK();A(AO.p.colModel).each(function(){var E=this.formoptions;AJ=Math.max(AJ,E?E.colpos||0:0);a=Math.max(a,E?E.rowpos||0:0)});A(Z).append(I);l=A("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+AJ*2+"'></td></tr>");l[0].rp=0;A(I).append(l);l=A("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+AJ*2+"'>"+B[AO.p.id].topinfo+"</td></tr>");l[0].rp=0;A(I).append(l);AD=(l=AO.p.direction=="rtl"?true:false)?"nData":"pData";var H=l?"pData":"nData";AC(D,AO,I,AJ);AD="<a href='javascript:void(0)' id='"+AD+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>";H="<a href='javascript:void(0)' id='"+H+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>";var S="<a href='javascript:void(0)' id='sData' class='fm-button ui-state-default ui-corner-all'>"+C.bSubmit+"</a>",M="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+C.bCancel+"</a>";AD="<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='"+AL+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(l?H+AD:AD+H)+"</td><td class='EditButton'>"+S+M+"</td></tr>";AD+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+B[AO.p.id].bottominfo+"</td></tr>";AD+="</tbody></table>";if(a>0){var AF=[],AP={};A.each(A(I)[0].rows,function(F,E){AF[F]=E});AF.sort(function(F,E){if(F.rp>E.rp){return 1}if(F.rp<E.rp){return -1}return 0});A.each(AF,function(F,E){AP.html+=E});A("tbody",I).append(AP.html)}C.gbox="#gbox_"+w;var AH=false;if(C.closeOnEscape===true){C.closeOnEscape=false;AH=true}Z=A("<span></span>").append(Z).append(AD);A.jgrid.createModal(AI,Z,C,"#gview_"+AO.p.id,A("#gbox_"+AO.p.id)[0]);if(l){A("#pData, #nData","#"+AL+"_2").css("float","right");A(".EditButton","#"+AL+"_2").css("text-align","left")}B[AO.p.id].topinfo&&A(".tinfo","#"+AL).show();B[AO.p.id].bottominfo&&A(".binfo","#"+AL+"_2").show();AD=Z=null;A("#"+AI.themodal).keydown(function(F){var E=F.target;if(A("#"+AE).data("disabled")===true){return false}if(B[AO.p.id].savekey[0]===true&&F.which==B[AO.p.id].savekey[1]){if(E.tagName!="TEXTAREA"){A("#sData","#"+AL+"_2").trigger("click");return false}}if(F.which===27){if(!AG()){return false}AH&&A.jgrid.hideModal(this,{gb:C.gbox,jqm:C.jqModal,onClose:B[AO.p.id].onClose});return false}if(B[AO.p.id].navkeys[0]===true){if(A("#id_g","#"+AL).val()=="_empty"){return true}if(F.which==B[AO.p.id].navkeys[1]){A("#pData","#"+AL+"_2").trigger("click");return false}if(F.which==B[AO.p.id].navkeys[2]){A("#nData","#"+AL+"_2").trigger("click");return false}}});if(C.checkOnUpdate){A("a.ui-jqdialog-titlebar-close span","#"+AI.themodal).removeClass("jqmClose");A("a.ui-jqdialog-titlebar-close","#"+AI.themodal).unbind("click").click(function(){if(!AG()){return false}A.jgrid.hideModal("#"+AI.themodal,{gb:"#gbox_"+w,jqm:C.jqModal,onClose:B[AO.p.id].onClose});return false})}C.saveicon=A.extend([true,"left","ui-icon-disk"],C.saveicon);C.closeicon=A.extend([true,"left","ui-icon-close"],C.closeicon);if(C.saveicon[0]===true){A("#sData","#"+AL+"_2").addClass(C.saveicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+C.saveicon[2]+"'></span>")}if(C.closeicon[0]===true){A("#cData","#"+AL+"_2").addClass(C.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+C.closeicon[2]+"'></span>")}if(B[AO.p.id].checkOnSubmit||B[AO.p.id].checkOnUpdate){S="<a href='javascript:void(0)' id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+C.bYes+"</a>";H="<a href='javascript:void(0)' id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+C.bNo+"</a>";M="<a href='javascript:void(0)' id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+C.bExit+"</a>";Z=C.zIndex||999;Z++;A("<div class='ui-widget-overlay jqgrid-overlay confirm' style='z-index:"+Z+";display:none;'>&#160;"+(A.browser.msie&&A.browser.version==6?'<iframe style="display:block;position:absolute;z-index:-1;filter:Alpha(Opacity=\'0\');" src="javascript:false;"></iframe>':"")+"</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(Z+1)+"'>"+C.saveData+"<br/><br/>"+S+H+M+"</div>").insertAfter("#"+AE);A("#sNew","#"+AI.themodal).click(function(){AB();A("#"+AE).data("disabled",false);A(".confirm","#"+AI.themodal).hide();return false});A("#nNew","#"+AI.themodal).click(function(){A(".confirm","#"+AI.themodal).hide();A("#"+AE).data("disabled",false);setTimeout(function(){A(":input","#"+AE)[0].focus()},0);return false});A("#cNew","#"+AI.themodal).click(function(){A(".confirm","#"+AI.themodal).hide();A("#"+AE).data("disabled",false);A.jgrid.hideModal("#"+AI.themodal,{gb:"#gbox_"+w,jqm:C.jqModal,onClose:B[AO.p.id].onClose});return false})}v&&v(A("#"+AE));D=="_empty"||!B[AO.p.id].viewPagerButtons?A("#pData,#nData","#"+AL+"_2").hide():A("#pData,#nData","#"+AL+"_2").show();g&&g(A("#"+AE));A("#"+AI.themodal).data("onClose",B[AO.p.id].onClose);A.jgrid.viewModal("#"+AI.themodal,{gbox:"#gbox_"+w,jqm:C.jqModal,overlay:C.overlay,modal:C.modal});Q||A(".jqmOverlay").click(function(){if(!AG()){return false}A.jgrid.hideModal("#"+AI.themodal,{gb:"#gbox_"+w,jqm:C.jqModal,onClose:B[AO.p.id].onClose});return false});b&&b(A("#"+AE));A(".fm-button","#"+AI.themodal).hover(function(){A(this).addClass("ui-state-hover")},function(){A(this).removeClass("ui-state-hover")});A("#sData","#"+AL+"_2").click(function(){AM={};T={};A("#FormError","#"+AL).hide();AN();if(AM[AO.p.id+"_id"]=="_empty"){AB()}else{if(C.checkOnSubmit===true){U=A.extend({},AM,T);if(K=q(U,B[AO.p.id]._savedData)){A("#"+AE).data("disabled",true);A(".confirm","#"+AI.themodal).show()}else{AB()}}else{AB()}}return false});A("#cData","#"+AL+"_2").click(function(){if(!AG()){return false}A.jgrid.hideModal("#"+AI.themodal,{gb:"#gbox_"+w,jqm:C.jqModal,onClose:B[AO.p.id].onClose});return false});A("#nData","#"+AL+"_2").click(function(){if(!AG()){return false}A("#FormError","#"+AL).hide();var E=Y();E[0]=parseInt(E[0],10);if(E[0]!=-1&&E[1][E[0]+1]){if(A.isFunction(C.onclickPgButtons)){C.onclickPgButtons("next",A("#"+AE),E[1][E[0]])}f(E[1][E[0]+1],AO,AE);A(AO).jqGrid("setSelection",E[1][E[0]+1]);A.isFunction(C.afterclickPgButtons)&&C.afterclickPgButtons("next",A("#"+AE),E[1][E[0]+1]);AA(E[0]+1,E[1].length-1)}return false});A("#pData","#"+AL+"_2").click(function(){if(!AG()){return false}A("#FormError","#"+AL).hide();var E=Y();if(E[0]!=-1&&E[1][E[0]-1]){if(A.isFunction(C.onclickPgButtons)){C.onclickPgButtons("prev",A("#"+AE),E[1][E[0]])}f(E[1][E[0]-1],AO,AE);A(AO).jqGrid("setSelection",E[1][E[0]-1]);A.isFunction(C.afterclickPgButtons)&&C.afterclickPgButtons("prev",A("#"+AE),E[1][E[0]-1]);AA(E[0]-1,E[1].length-1)}return false})}g=Y();AA(g[0],g[1].length-1)}})},viewGridRow:function(D,C){C=A.extend({top:0,left:0,width:0,height:"auto",dataheight:"auto",modal:false,overlay:30,drag:true,resize:true,jqModal:true,closeOnEscape:false,labelswidth:"30%",closeicon:[],navkeys:[false,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:true},A.jgrid.view,C||{});return this.each(function(){function b(){if(C.closeOnEscape===true||C.navkeys[0]===true){setTimeout(function(){A(".ui-jqdialog-titlebar-close","#"+H.modalhead).focus()},0)}}function U(u,k,x,e){for(var f,G,N,j=0,F,E,c=[],J=false,s="<td class='CaptionTD form-view-label ui-widget-content' width='"+C.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;</td>",AA="",t=["integer","number","currency"],y=0,v=0,o,r,n,p=1;p<=e;p++){AA+=p==1?s:"<td class='CaptionTD form-view-label ui-widget-content'>&#160;</td><td class='DataTD form-view-data ui-widget-content'>&#160;</td>"}A(k.p.colModel).each(function(){G=this.editrules&&this.editrules.edithidden===true?false:this.hidden===true?true:false;if(!G&&this.align==="right"){if(this.formatter&&A.inArray(this.formatter,t)!==-1){y=Math.max(y,parseInt(this.width,10))}else{v=Math.max(v,parseInt(this.width,10))}}});o=y!==0?y:v!==0?v:0;J=A(k).jqGrid("getInd",u);A(k.p.colModel).each(function(l){f=this.name;r=false;E=(G=this.editrules&&this.editrules.edithidden===true?false:this.hidden===true?true:false)?"style='display:none'":"";n=typeof this.viewable!="boolean"?true:this.viewable;if(f!=="cb"&&f!=="subgrid"&&f!=="rn"&&n){F=J===false?"":f==k.p.ExpandColumn&&k.p.treeGrid===true?A("td:eq("+l+")",k.rows[J]).text():A("td:eq("+l+")",k.rows[J]).html();r=this.align==="right"&&o!==0?true:false;A.extend({},this.editoptions||{},{id:f,name:f});var h=A.extend({},{rowabove:false,rowcontent:""},this.formoptions||{}),g=parseInt(h.rowpos,10)||j+1,q=parseInt((parseInt(h.colpos,10)||1)*2,10);if(h.rowabove){var m=A("<tr><td class='contentinfo' colspan='"+e*2+"'>"+h.rowcontent+"</td></tr>");A(x).append(m);m[0].rp=g}N=A(x).find("tr[rowpos="+g+"]");if(N.length===0){N=A("<tr "+E+" rowpos='"+g+"'></tr>").addClass("FormData").attr("id","trv_"+f);A(N).append(AA);A(x).append(N);N[0].rp=g}A("td:eq("+(q-2)+")",N[0]).html("<b>"+(typeof h.label==="undefined"?k.p.colNames[l]:h.label)+"</b>");A("td:eq("+(q-1)+")",N[0]).append("<span>"+F+"</span>").attr("id","v_"+f);r&&A("td:eq("+(q-1)+") span",N[0]).css({"text-align":"right",width:o+"px"});c[j]=l;j++}});if(j>0){u=A("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(e*2-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+u+"'/></td></tr>");u[0].rp=j+99;A(x).append(u)}return c}function L(E,e){var J,N,c=0,F,G;if(G=A(e).jqGrid("getInd",E,true)){A("td",G).each(function(f){J=e.p.colModel[f].name;N=e.p.colModel[f].editrules&&e.p.colModel[f].editrules.edithidden===true?false:e.p.colModel[f].hidden===true?true:false;if(J!=="cb"&&J!=="subgrid"&&J!=="rn"){F=J==e.p.ExpandColumn&&e.p.treeGrid===true?A(this).text():A(this).html();A.extend({},e.p.colModel[f].editoptions||{});J=A.jgrid.jqID("v_"+J);A("#"+J+" span","#"+S).html(F);N&&A("#"+J,"#"+S).parents("tr:first").hide();c++}});c>0&&A("#id_g","#"+S).val(E)}}function T(E,F){E===0?A("#pData","#"+S+"_2").addClass("ui-state-disabled"):A("#pData","#"+S+"_2").removeClass("ui-state-disabled");E==F?A("#nData","#"+S+"_2").addClass("ui-state-disabled"):A("#nData","#"+S+"_2").removeClass("ui-state-disabled")}function P(){var E=A(K).jqGrid("getDataIDs"),F=A("#id_g","#"+S).val();return[A.inArray(F,E),E]}var K=this;if(K.grid&&D){var X=K.p.id,Z="ViewGrid_"+X,S="ViewTbl_"+X,H={themodal:"viewmod"+X,modalhead:"viewhd"+X,modalcontent:"viewcnt"+X,scrollelm:Z},d=A.isFunction(C.beforeInitData)?C.beforeInitData:false,R=true,W=1,a=0;if(A("#"+H.themodal).html()!==null){if(d){R=d(A("#"+Z));if(typeof R=="undefined"){R=true}}if(R===false){return }A(".ui-jqdialog-title","#"+H.modalhead).html(C.caption);A("#FormError","#"+S).hide();L(D,K);A.isFunction(C.beforeShowForm)&&C.beforeShowForm(A("#"+Z));A.jgrid.viewModal("#"+H.themodal,{gbox:"#gbox_"+X,jqm:C.jqModal,jqM:false,overlay:C.overlay,modal:C.modal});b()}else{var Y=isNaN(C.dataheight)?C.dataheight:C.dataheight+"px";Y=A("<form name='FormPost' id='"+Z+"' class='FormGrid' style='width:100%;overflow:auto;position:relative;height:"+Y+";'></form>");var M=A("<table id='"+S+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");if(d){R=d(A("#"+Z));if(typeof R=="undefined"){R=true}}if(R===false){return }A(K.p.colModel).each(function(){var E=this.formoptions;W=Math.max(W,E?E.colpos||0:0);a=Math.max(a,E?E.rowpos||0:0)});A(Y).append(M);U(D,K,M,W);d=K.p.direction=="rtl"?true:false;R="<a href='javascript:void(0)' id='"+(d?"nData":"pData")+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>";var I="<a href='javascript:void(0)' id='"+(d?"pData":"nData")+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",O="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+C.bClose+"</a>";if(a>0){var Q=[];A.each(A(M)[0].rows,function(E,F){Q[E]=F});Q.sort(function(E,F){if(E.rp>F.rp){return 1}if(E.rp<F.rp){return -1}return 0});A.each(Q,function(E,F){A("tbody",M).append(F)})}C.gbox="#gbox_"+X;var V=false;if(C.closeOnEscape===true){C.closeOnEscape=false;V=true}Y=A("<span></span>").append(Y).append("<table border='0' class='EditTable' id='"+S+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+C.labelswidth+"'>"+(d?I+R:R+I)+"</td><td class='EditButton'>"+O+"</td></tr></tbody></table>");A.jgrid.createModal(H,Y,C,"#gview_"+K.p.id,A("#gview_"+K.p.id)[0]);if(d){A("#pData, #nData","#"+S+"_2").css("float","right");A(".EditButton","#"+S+"_2").css("text-align","left")}C.viewPagerButtons||A("#pData, #nData","#"+S+"_2").hide();Y=null;A("#"+H.themodal).keydown(function(E){if(E.which===27){V&&A.jgrid.hideModal(this,{gb:C.gbox,jqm:C.jqModal,onClose:C.onClose});return false}if(C.navkeys[0]===true){if(E.which===C.navkeys[1]){A("#pData","#"+S+"_2").trigger("click");return false}if(E.which===C.navkeys[2]){A("#nData","#"+S+"_2").trigger("click");return false}}});C.closeicon=A.extend([true,"left","ui-icon-close"],C.closeicon);if(C.closeicon[0]===true){A("#cData","#"+S+"_2").addClass(C.closeicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+C.closeicon[2]+"'></span>")}A.isFunction(C.beforeShowForm)&&C.beforeShowForm(A("#"+Z));A.jgrid.viewModal("#"+H.themodal,{gbox:"#gbox_"+X,jqm:C.jqModal,modal:C.modal});A(".fm-button:not(.ui-state-disabled)","#"+S+"_2").hover(function(){A(this).addClass("ui-state-hover")},function(){A(this).removeClass("ui-state-hover")});b();A("#cData","#"+S+"_2").click(function(){A.jgrid.hideModal("#"+H.themodal,{gb:"#gbox_"+X,jqm:C.jqModal,onClose:C.onClose});return false});A("#nData","#"+S+"_2").click(function(){A("#FormError","#"+S).hide();var E=P();E[0]=parseInt(E[0],10);if(E[0]!=-1&&E[1][E[0]+1]){if(A.isFunction(C.onclickPgButtons)){C.onclickPgButtons("next",A("#"+Z),E[1][E[0]])}L(E[1][E[0]+1],K);A(K).jqGrid("setSelection",E[1][E[0]+1]);A.isFunction(C.afterclickPgButtons)&&C.afterclickPgButtons("next",A("#"+Z),E[1][E[0]+1]);T(E[0]+1,E[1].length-1)}b();return false});A("#pData","#"+S+"_2").click(function(){A("#FormError","#"+S).hide();var E=P();if(E[0]!=-1&&E[1][E[0]-1]){if(A.isFunction(C.onclickPgButtons)){C.onclickPgButtons("prev",A("#"+Z),E[1][E[0]])}L(E[1][E[0]-1],K);A(K).jqGrid("setSelection",E[1][E[0]-1]);A.isFunction(C.afterclickPgButtons)&&C.afterclickPgButtons("prev",A("#"+Z),E[1][E[0]-1]);T(E[0]-1,E[1].length-1)}b();return false})}Y=P();T(Y[0],Y[1].length-1)}})},delGridRow:function(D,C){C=A.extend({top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:false,overlay:30,drag:true,resize:true,url:"",mtype:"POST",reloadAfterSubmit:true,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:true,closeOnEscape:false,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:false,serializeDelData:null,useDataProxy:false},A.jgrid.del,C||{});B[A(this)[0].p.id]=C;return this.each(function(){var M=this;if(M.grid){if(D){var G=A.isFunction(B[M.p.id].beforeShowForm),Q=A.isFunction(B[M.p.id].afterShowForm),E=A.isFunction(B[M.p.id].beforeInitData)?B[M.p.id].beforeInitData:false,S=M.p.id,P={},I=true,J="DelTbl_"+S,T,L,O,R,H={themodal:"delmod"+S,modalhead:"delhd"+S,modalcontent:"delcnt"+S,scrollelm:J};if(jQuery.isArray(D)){D=D.join()}if(A("#"+H.themodal).html()!==null){if(E){I=E(A("#"+J));if(typeof I=="undefined"){I=true}}if(I===false){return }A("#DelData>td","#"+J).text(D);A("#DelError","#"+J).hide();if(B[M.p.id].processing===true){B[M.p.id].processing=false;A("#dData","#"+J).removeClass("ui-state-active")}G&&B[M.p.id].beforeShowForm(A("#"+J));A.jgrid.viewModal("#"+H.themodal,{gbox:"#gbox_"+S,jqm:B[M.p.id].jqModal,jqM:false,overlay:B[M.p.id].overlay,modal:B[M.p.id].modal})}else{var K=isNaN(B[M.p.id].dataheight)?B[M.p.id].dataheight:B[M.p.id].dataheight+"px";K="<div id='"+J+"' class='formdata' style='width:100%;overflow:auto;position:relative;height:"+K+";'>";K+="<table class='DelTable'><tbody>";K+="<tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>";K+="<tr id='DelData' style='display:none'><td >"+D+"</td></tr>";K+='<tr><td class="delmsg" style="white-space:pre;">'+B[M.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>";K+="</tbody></table></div>";K+="<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+J+"_2'><tbody><tr><td><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+("<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+C.bSubmit+"</a>")+"&#160;"+("<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+C.bCancel+"</a>")+"</td></tr></tbody></table>";C.gbox="#gbox_"+S;A.jgrid.createModal(H,K,C,"#gview_"+M.p.id,A("#gview_"+M.p.id)[0]);if(E){I=E(A("#"+J));if(typeof I=="undefined"){I=true}}if(I===false){return }A(".fm-button","#"+J+"_2").hover(function(){A(this).addClass("ui-state-hover")},function(){A(this).removeClass("ui-state-hover")});C.delicon=A.extend([true,"left","ui-icon-scissors"],B[M.p.id].delicon);C.cancelicon=A.extend([true,"left","ui-icon-cancel"],B[M.p.id].cancelicon);if(C.delicon[0]===true){A("#dData","#"+J+"_2").addClass(C.delicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+C.delicon[2]+"'></span>")}if(C.cancelicon[0]===true){A("#eData","#"+J+"_2").addClass(C.cancelicon[1]=="right"?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+C.cancelicon[2]+"'></span>")}A("#dData","#"+J+"_2").click(function(){var U=[true,""];P={};var N=A("#DelData>td","#"+J).text();if(A.isFunction(B[M.p.id].onclickSubmit)){P=B[M.p.id].onclickSubmit(B[M.p.id],N)||{}}if(A.isFunction(B[M.p.id].beforeSubmit)){U=B[M.p.id].beforeSubmit(N)}if(U[0]&&!B[M.p.id].processing){B[M.p.id].processing=true;A(this).addClass("ui-state-active");O=M.p.prmNames;T=A.extend({},B[M.p.id].delData,P);R=O.oper;T[R]=O.deloper;L=O.id;N=N.split(",");for(var F in N){if(N.hasOwnProperty(F)){N[F]=A.jgrid.stripPref(M.p.idPrefix,N[F])}}T[L]=N.join();F=A.extend({url:B[M.p.id].url?B[M.p.id].url:A(M).jqGrid("getGridParam","editurl"),type:B[M.p.id].mtype,data:A.isFunction(B[M.p.id].serializeDelData)?B[M.p.id].serializeDelData(T):T,complete:function(W,X){if(X!="success"){U[0]=false;U[1]=A.isFunction(B[M.p.id].errorTextFormat)?B[M.p.id].errorTextFormat(W):X+" Status: '"+W.statusText+"'. Error code: "+W.status}else{if(A.isFunction(B[M.p.id].afterSubmit)){U=B[M.p.id].afterSubmit(W,T)}}if(U[0]===false){A("#DelError>td","#"+J).html(U[1]);A("#DelError","#"+J).show()}else{if(B[M.p.id].reloadAfterSubmit&&M.p.datatype!="local"){A(M).trigger("reloadGrid")}else{var Z=[];Z=N.split(",");if(M.p.treeGrid===true){try{A(M).jqGrid("delTreeNode",M.p.idPrefix+Z[0])}catch(V){}}else{for(var Y=0;Y<Z.length;Y++){A(M).jqGrid("delRowData",M.p.idPrefix+Z[Y])}}M.p.selrow=null;M.p.selarrrow=[]}A.isFunction(B[M.p.id].afterComplete)&&setTimeout(function(){B[M.p.id].afterComplete(W,N)},500)}B[M.p.id].processing=false;A("#dData","#"+J+"_2").removeClass("ui-state-active");U[0]&&A.jgrid.hideModal("#"+H.themodal,{gb:"#gbox_"+S,jqm:C.jqModal,onClose:B[M.p.id].onClose})}},A.jgrid.ajaxOptions,B[M.p.id].ajaxDelOptions);if(!F.url&&!B[M.p.id].useDataProxy){if(A.isFunction(M.p.dataProxy)){B[M.p.id].useDataProxy=true}else{U[0]=false;U[1]+=" "+A.jgrid.errors.nourl}}if(U[0]){if(B[M.p.id].useDataProxy){F=M.p.dataProxy.call(M,F,"del_"+M.p.id);if(typeof F=="undefined"){F=[true,""]}if(F[0]===false){U[0]=false;U[1]=F[1]||"Error deleting the selected row!"}else{A.jgrid.hideModal("#"+H.themodal,{gb:"#gbox_"+S,jqm:C.jqModal,onClose:B[M.p.id].onClose})}}else{A.ajax(F)}}}if(U[0]===false){A("#DelError>td","#"+J).html(U[1]);A("#DelError","#"+J).show()}return false});A("#eData","#"+J+"_2").click(function(){A.jgrid.hideModal("#"+H.themodal,{gb:"#gbox_"+S,jqm:B[M.p.id].jqModal,onClose:B[M.p.id].onClose});return false});G&&B[M.p.id].beforeShowForm(A("#"+J));A.jgrid.viewModal("#"+H.themodal,{gbox:"#gbox_"+S,jqm:B[M.p.id].jqModal,overlay:B[M.p.id].overlay,modal:B[M.p.id].modal})}Q&&B[M.p.id].afterShowForm(A("#"+J));B[M.p.id].closeOnEscape===true&&setTimeout(function(){A(".ui-jqdialog-titlebar-close","#"+H.modalhead).focus()},0)}}})},navGrid:function(I,E,K,H,C,J,G){E=A.extend({edit:true,editicon:"ui-icon-pencil",add:true,addicon:"ui-icon-plus",del:true,delicon:"ui-icon-trash",search:true,searchicon:"ui-icon-search",refresh:true,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:false,viewicon:"ui-icon-document",position:"left",closeOnEscape:true,beforeRefresh:null,afterRefresh:null,cloneToTop:false,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null},A.jgrid.nav,E||{});return this.each(function(){if(!this.nav){var R={themodal:"alertmod",modalhead:"alerthd",modalcontent:"alertcnt"},P=this,D;if(!(!P.grid||typeof I!="string")){if(A("#"+R.themodal).html()===null){if(!E.alerttop&&!E.alertleft){if(typeof window.innerWidth!="undefined"){E.alertleft=window.innerWidth;E.alerttop=window.innerHeight}else{if(typeof document.documentElement!="undefined"&&typeof document.documentElement.clientWidth!="undefined"&&document.documentElement.clientWidth!==0){E.alertleft=document.documentElement.clientWidth;E.alerttop=document.documentElement.clientHeight}else{E.alertleft=1024;E.alerttop=768}}E.alertleft=E.alertleft/2-parseInt(E.alertwidth,10)/2;E.alerttop=E.alerttop/2-25}A.jgrid.createModal(R,"<div>"+E.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+P.p.id,jqModal:true,drag:true,resize:true,caption:E.alertcap,top:E.alerttop,left:E.alertleft,width:E.alertwidth,height:E.alertheight,closeOnEscape:E.closeOnEscape,zIndex:E.alertzIndex},"","",true)}var L=1;if(E.cloneToTop&&P.p.toppager){L=2}for(var O=0;O<L;O++){var Q=A("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),F,M;if(O===0){F=I;M=P.p.id;if(F==P.p.toppager){M+="_top";L=1}}else{F=P.p.toppager;M=P.p.id+"_top"}P.p.direction=="rtl"&&A(Q).attr("dir","rtl").css("float","right");if(E.add){H=H||{};D=A("<td class='ui-pg-button ui-corner-all'></td>");A(D).append("<div class='ui-pg-div'><span class='ui-icon "+E.addicon+"'></span>"+E.addtext+"</div>");A("tr",Q).append(D);A(D,Q).attr({title:E.addtitle||"",id:H.id||"add_"+M}).click(function(){A(this).hasClass("ui-state-disabled")||(A.isFunction(E.addfunc)?E.addfunc():A(P).jqGrid("editGridRow","new",H));return false}).hover(function(){A(this).hasClass("ui-state-disabled")||A(this).addClass("ui-state-hover")},function(){A(this).removeClass("ui-state-hover")});D=null}if(E.edit){D=A("<td class='ui-pg-button ui-corner-all'></td>");K=K||{};A(D).append("<div class='ui-pg-div'><span class='ui-icon "+E.editicon+"'></span>"+E.edittext+"</div>");A("tr",Q).append(D);A(D,Q).attr({title:E.edittitle||"",id:K.id||"edit_"+M}).click(function(){if(!A(this).hasClass("ui-state-disabled")){var N=P.p.selrow;if(N){A.isFunction(E.editfunc)?E.editfunc(N):A(P).jqGrid("editGridRow",N,K)}else{A.jgrid.viewModal("#"+R.themodal,{gbox:"#gbox_"+P.p.id,jqm:true});A("#jqg_alrt").focus()}}return false}).hover(function(){A(this).hasClass("ui-state-disabled")||A(this).addClass("ui-state-hover")},function(){A(this).removeClass("ui-state-hover")});D=null}if(E.view){D=A("<td class='ui-pg-button ui-corner-all'></td>");G=G||{};A(D).append("<div class='ui-pg-div'><span class='ui-icon "+E.viewicon+"'></span>"+E.viewtext+"</div>");A("tr",Q).append(D);A(D,Q).attr({title:E.viewtitle||"",id:G.id||"view_"+M}).click(function(){if(!A(this).hasClass("ui-state-disabled")){var N=P.p.selrow;if(N){A.isFunction(E.viewfunc)?E.viewfunc(N):A(P).jqGrid("viewGridRow",N,G)}else{A.jgrid.viewModal("#"+R.themodal,{gbox:"#gbox_"+P.p.id,jqm:true});A("#jqg_alrt").focus()}}return false}).hover(function(){A(this).hasClass("ui-state-disabled")||A(this).addClass("ui-state-hover")},function(){A(this).removeClass("ui-state-hover")});D=null}if(E.del){D=A("<td class='ui-pg-button ui-corner-all'></td>");C=C||{};A(D).append("<div class='ui-pg-div'><span class='ui-icon "+E.delicon+"'></span>"+E.deltext+"</div>");A("tr",Q).append(D);A(D,Q).attr({title:E.deltitle||"",id:C.id||"del_"+M}).click(function(){if(!A(this).hasClass("ui-state-disabled")){var N;if(P.p.multiselect){N=P.p.selarrrow;if(N.length===0){N=null}}else{N=P.p.selrow}if(N){"function"==typeof E.delfunc?E.delfunc(N):A(P).jqGrid("delGridRow",N,C)}else{A.jgrid.viewModal("#"+R.themodal,{gbox:"#gbox_"+P.p.id,jqm:true});A("#jqg_alrt").focus()}}return false}).hover(function(){A(this).hasClass("ui-state-disabled")||A(this).addClass("ui-state-hover")},function(){A(this).removeClass("ui-state-hover")});D=null}if(E.add||E.edit||E.del||E.view){A("tr",Q).append("<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>")}if(E.search){D=A("<td class='ui-pg-button ui-corner-all'></td>");J=J||{};A(D).append("<div class='ui-pg-div'><span class='ui-icon "+E.searchicon+"'></span>"+E.searchtext+"</div>");A("tr",Q).append(D);A(D,Q).attr({title:E.searchtitle||"",id:J.id||"search_"+M}).click(function(){A(this).hasClass("ui-state-disabled")||A(P).jqGrid("searchGrid",J);return false}).hover(function(){A(this).hasClass("ui-state-disabled")||A(this).addClass("ui-state-hover")},function(){A(this).removeClass("ui-state-hover")});J.showOnLoad&&J.showOnLoad===true&&A(D,Q).click();D=null}if(E.refresh){D=A("<td class='ui-pg-button ui-corner-all'></td>");A(D).append("<div class='ui-pg-div'><span class='ui-icon "+E.refreshicon+"'></span>"+E.refreshtext+"</div>");A("tr",Q).append(D);A(D,Q).attr({title:E.refreshtitle||"",id:"refresh_"+M}).click(function(){if(!A(this).hasClass("ui-state-disabled")){A.isFunction(E.beforeRefresh)&&E.beforeRefresh();P.p.search=false;try{var N=P.p.id;P.p.postData.filters="";A("#fbox_"+N).jqFilter("resetFilter");A.isFunction(P.clearToolbar)&&P.clearToolbar(false)}catch(S){}switch(E.refreshstate){case"firstpage":A(P).trigger("reloadGrid",[{page:1}]);break;case"current":A(P).trigger("reloadGrid",[{current:true}])}A.isFunction(E.afterRefresh)&&E.afterRefresh()}return false}).hover(function(){A(this).hasClass("ui-state-disabled")||A(this).addClass("ui-state-hover")},function(){A(this).removeClass("ui-state-hover")});D=null}D=A(".ui-jqgrid").css("font-size")||"11px";A("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+D+";visibility:hidden;' ></div>");D=A(Q).clone().appendTo("#testpg2").width();A("#testpg2").remove();A(F+"_"+E.position,F).append(Q);if(P.p._nvtd){if(D>P.p._nvtd[0]){A(F+"_"+E.position,F).width(D);P.p._nvtd[0]=D}P.p._nvtd[1]=D}Q=D=D=null;this.nav=true}}}})},navButtonAdd:function(D,C){C=A.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},C||{});return this.each(function(){if(this.grid){if(D.indexOf("#")!==0){D="#"+D}var G=A(".navtable",D)[0],F=this;if(G){if(!(C.id&&A("#"+C.id,G).html()!==null)){var E=A("<td></td>");C.buttonicon.toString().toUpperCase()=="NONE"?A(E).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+C.caption+"</div>"):A(E).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='ui-icon "+C.buttonicon+"'></span>"+C.caption+"</div>");C.id&&A(E).attr("id",C.id);if(C.position=="first"){G.rows[0].cells.length===0?A("tr",G).append(E):A("tr td:eq(0)",G).before(E)}else{A("tr",G).append(E)}A(E,G).attr("title",C.title||"").click(function(H){A(this).hasClass("ui-state-disabled")||A.isFunction(C.onClickButton)&&C.onClickButton.call(F,H);return false}).hover(function(){A(this).hasClass("ui-state-disabled")||A(this).addClass("ui-state-hover")},function(){A(this).removeClass("ui-state-hover")})}}}})},navSeparatorAdd:function(D,C){C=A.extend({sepclass:"ui-separator",sepcontent:""},C||{});return this.each(function(){if(this.grid){if(D.indexOf("#")!==0){D="#"+D}var F=A(".navtable",D)[0];if(F){var E="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+C.sepclass+"'></span>"+C.sepcontent+"</td>";A("tr",F).append(E)}}})},GridToForm:function(D,C){return this.each(function(){var G=this;if(G.grid){var F=A(G).jqGrid("getRowData",D);if(F){for(var E in F){A("[name="+A.jgrid.jqID(E)+"]",C).is("input:radio")||A("[name="+A.jgrid.jqID(E)+"]",C).is("input:checkbox")?A("[name="+A.jgrid.jqID(E)+"]",C).each(function(){if(A(this).val()==F[E]){A(this)[G.p.useProp?"prop":"attr"]("checked",true)}else{A(this)[G.p.useProp?"prop":"attr"]("checked",false)}}):A("[name="+A.jgrid.jqID(E)+"]",C).val(F[E])}}}})},FormToGrid:function(E,C,F,D){return this.each(function(){if(this.grid){F||(F="set");D||(D="first");var G=A(C).serializeArray(),H={};A.each(G,function(I,J){H[J.name]=J.value});if(F=="add"){A(this).jqGrid("addRowData",E,H,D)}else{F=="set"&&A(this).jqGrid("setRowData",E,H)}}})}})})(jQuery);(function(A){A.fn.jqFilter=function(D){if(typeof D==="string"){var C=A.fn.jqFilter[D];if(!C){throw"jqFilter - No such method: "+D}var F=A.makeArray(arguments).slice(1);return C.apply(this,F)}var E=A.extend(true,{filter:null,columns:[],onChange:null,afterRedraw:null,checkValues:null,error:false,errmsg:"",errorcheck:true,showQuery:true,sopt:null,ops:[{name:"eq",description:"equal",operator:"="},{name:"ne",description:"not equal",operator:"<>"},{name:"lt",description:"less",operator:"<"},{name:"le",description:"less or equal",operator:"<="},{name:"gt",description:"greater",operator:">"},{name:"ge",description:"greater or equal",operator:">="},{name:"bw",description:"begins with",operator:"LIKE"},{name:"bn",description:"does not begin with",operator:"NOT LIKE"},{name:"in",description:"in",operator:"IN"},{name:"ni",description:"not in",operator:"NOT IN"},{name:"ew",description:"ends with",operator:"LIKE"},{name:"en",description:"does not end with",operator:"NOT LIKE"},{name:"cn",description:"contains",operator:"LIKE"},{name:"nc",description:"does not contain",operator:"NOT LIKE"},{name:"nu",description:"is null",operator:"IS NULL"},{name:"nn",description:"is not null",operator:"IS NOT NULL"}],numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],_gridsopt:[],groupOps:["AND","OR"],groupButton:true,ruleButtons:true,direction:"ltr"},D||{});return this.each(function(){if(!this.filter){this.p=E;if(this.p.filter===null||this.p.filter===undefined){this.p.filter={groupOp:this.p.groupOps[0],rules:[],groups:[]}}var H,B=this.p.columns.length,G,J=/msie/i.test(navigator.userAgent)&&!window.opera;if(this.p._gridsopt.length){for(H=0;H<this.p._gridsopt.length;H++){this.p.ops[H].description=this.p._gridsopt[H]}}this.p.initFilter=A.extend(true,{},this.p.filter);if(B){for(H=0;H<B;H++){G=this.p.columns[H];if(G.stype){G.inputtype=G.stype}else{if(!G.inputtype){G.inputtype="text"}}if(G.sorttype){G.searchtype=G.sorttype}else{if(!G.searchtype){G.searchtype="string"}}if(G.hidden===undefined){G.hidden=false}if(!G.label){G.label=G.name}if(G.index){G.name=G.index}if(!G.hasOwnProperty("searchoptions")){G.searchoptions={}}if(!G.hasOwnProperty("searchrules")){G.searchrules={}}}this.p.showQuery&&A(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var I=function(N,M){var L=[true,""];if(A.isFunction(M.searchrules)){L=M.searchrules(N,M)}else{if(A.jgrid&&A.jgrid.checkValues){try{L=A.jgrid.checkValues(N,-1,null,M.searchrules,M.label)}catch(K){}}}if(L&&L.length&&L[0]===false){E.error=!L[0];E.errmsg=L[1]}};this.onchange=function(){this.p.error=false;this.p.errmsg="";return A.isFunction(this.p.onChange)?this.p.onChange.call(this,this.p):false};this.reDraw=function(){A("table.group:first",this).remove();var K=this.createTableForGroup(E.filter,null);A(this).append(K);A.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)};this.createTableForGroup=function(R,O){var T=this,S,Q=A("<table class='group ui-widget ui-widget-content' style='border:0px none;'><tbody></tbody></table>"),M="left";if(this.p.direction=="rtl"){M="right";Q.attr("dir","rtl")}O===null&&Q.append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='"+M+"'></th></tr>");var P=A("<tr></tr>");Q.append(P);M=A("<th colspan='5' align='"+M+"'></th>");P.append(M);if(this.p.ruleButtons===true){var N=A("<select class='opsel'></select>");M.append(N);P="";var L;for(S=0;S<E.groupOps.length;S++){L=R.groupOp===T.p.groupOps[S]?" selected='selected'":"";P+="<option value='"+T.p.groupOps[S]+"'"+L+">"+T.p.groupOps[S]+"</option>"}N.append(P).bind("change",function(){R.groupOp=A(N).val();T.onchange()})}P="<span></span>";if(this.p.groupButton){P=A("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>");P.bind("click",function(){if(R.groups===undefined){R.groups=[]}R.groups.push({groupOp:E.groupOps[0],rules:[],groups:[]});T.reDraw();T.onchange();return false})}M.append(P);if(this.p.ruleButtons===true){P=A("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>");var K;P.bind("click",function(){if(R.rules===undefined){R.rules=[]}for(S=0;S<T.p.columns.length;S++){var V=typeof T.p.columns[S].search==="undefined"?true:T.p.columns[S].search,U=T.p.columns[S].hidden===true;if(T.p.columns[S].searchoptions.searchhidden===true&&V||V&&!U){K=T.p.columns[S];break}}R.rules.push({field:K.name,op:(K.searchoptions.sopt?K.searchoptions.sopt:T.p.sopt?T.p.sopt:K.searchtype==="string"?T.p.stropts:T.p.numopts)[0],data:""});T.reDraw();return false});M.append(P)}if(O!==null){P=A("<input type='button' value='-' title='Delete group' class='delete-group'/>");M.append(P);P.bind("click",function(){for(S=0;S<O.groups.length;S++){if(O.groups[S]===R){O.groups.splice(S,1);break}}T.reDraw();T.onchange();return false})}if(R.groups!==undefined){for(S=0;S<R.groups.length;S++){M=A("<tr></tr>");Q.append(M);P=A("<td class='first'></td>");M.append(P);P=A("<td colspan='4'></td>");P.append(this.createTableForGroup(R.groups[S],R));M.append(P)}}if(R.groupOp===undefined){R.groupOp=T.p.groupOps[0]}if(R.rules!==undefined){for(S=0;S<R.rules.length;S++){Q.append(this.createTableRowForRule(R.rules[S],R))}}return Q};this.createTableRowForRule=function(U,R){var W=this,V=A("<tr></tr>"),T,P,S,Q,O="",N;V.append("<td class='first'></td>");var M=A("<td class='columns'></td>");V.append(M);var Z=A("<select></select>"),L,Y=[];M.append(Z);Z.bind("change",function(){U.field=A(Z).val();S=A(this).parents("tr:first");for(T=0;T<W.p.columns.length;T++){if(W.p.columns[T].name===U.field){Q=W.p.columns[T];break}}if(Q){Q.searchoptions.id=A.jgrid.randId();if(J&&Q.inputtype==="text"){if(!Q.searchoptions.size){Q.searchoptions.size=10}}var c=A.jgrid.createEl(Q.inputtype,Q.searchoptions,"",true,W.p.ajaxSelectOptions,true);A(c).addClass("input-elm");P=Q.searchoptions.sopt?Q.searchoptions.sopt:W.p.sopt?W.p.sopt:Q.searchtype==="string"?W.p.stropts:W.p.numopts;var b="",a=0;Y=[];A.each(W.p.ops,function(){Y.push(this.name)});for(T=0;T<P.length;T++){L=A.inArray(P[T],Y);if(L!==-1){if(a===0){U.op=W.p.ops[L].name}b+="<option value='"+W.p.ops[L].name+"'>"+W.p.ops[L].description+"</option>";a++}}A(".selectopts",S).empty().append(b);A(".selectopts",S)[0].selectedIndex=0;if(A.browser.msie&&A.browser.version<9){b=parseInt(A("select.selectopts",S)[0].offsetWidth)+1;A(".selectopts",S).width(b);A(".selectopts",S).css("width","auto")}A(".data",S).empty().append(c);A(".input-elm",S).bind("change",function(){U.data=A(this).val();W.onchange()});setTimeout(function(){U.data=A(c).val();W.onchange()},0)}});for(T=M=0;T<W.p.columns.length;T++){N=typeof W.p.columns[T].search==="undefined"?true:W.p.columns[T].search;var K=W.p.columns[T].hidden===true;if(W.p.columns[T].searchoptions.searchhidden===true&&N||N&&!K){N="";if(U.field===W.p.columns[T].name){N=" selected='selected'";M=T}O+="<option value='"+W.p.columns[T].name+"'"+N+">"+W.p.columns[T].label+"</option>"}}Z.append(O);O=A("<td class='operators'></td>");V.append(O);Q=E.columns[M];Q.searchoptions.id=A.jgrid.randId();if(J&&Q.inputtype==="text"){if(!Q.searchoptions.size){Q.searchoptions.size=10}}M=A.jgrid.createEl(Q.inputtype,Q.searchoptions,U.data,true,W.p.ajaxSelectOptions,true);var X=A("<select class='selectopts'></select>");O.append(X);X.bind("change",function(){U.op=A(X).val();S=A(this).parents("tr:first");var a=A(".input-elm",S)[0];if(U.op==="nu"||U.op==="nn"){U.data="";a.value="";a.setAttribute("readonly","true");a.setAttribute("disabled","true")}else{a.removeAttribute("readonly");a.removeAttribute("disabled")}W.onchange()});P=Q.searchoptions.sopt?Q.searchoptions.sopt:W.p.sopt?W.p.sopt:Q.searchtype==="string"?E.stropts:W.p.numopts;O="";A.each(W.p.ops,function(){Y.push(this.name)});for(T=0;T<P.length;T++){L=A.inArray(P[T],Y);if(L!==-1){N=U.op===W.p.ops[L].name?" selected='selected'":"";O+="<option value='"+W.p.ops[L].name+"'"+N+">"+W.p.ops[L].description+"</option>"}}X.append(O);O=A("<td class='data'></td>");V.append(O);O.append(M);A(M).addClass("input-elm").bind("change",function(){U.data=A(this).val();W.onchange()});O=A("<td></td>");V.append(O);if(this.p.ruleButtons===true){M=A("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>");O.append(M);M.bind("click",function(){for(T=0;T<R.rules.length;T++){if(R.rules[T]===U){R.rules.splice(T,1);break}}W.reDraw();W.onchange();return false})}return V};this.getStringForGroup=function(O){var M="(",L;if(O.groups!==undefined){for(L=0;L<O.groups.length;L++){if(M.length>1){M+=" "+O.groupOp+" "}try{M+=this.getStringForGroup(O.groups[L])}catch(K){alert(K)}}}if(O.rules!==undefined){try{for(L=0;L<O.rules.length;L++){if(M.length>1){M+=" "+O.groupOp+" "}M+=this.getStringForRule(O.rules[L])}}catch(N){alert(N)}}M+=")";return M==="()"?"":M};this.getStringForRule=function(O){var M="",L="",K,N;for(K=0;K<this.p.ops.length;K++){if(this.p.ops[K].name===O.op){M=this.p.ops[K].operator;L=this.p.ops[K].name;break}}for(K=0;K<this.p.columns.length;K++){if(this.p.columns[K].name===O.field){N=this.p.columns[K];break}}K=O.data;if(L==="bw"||L==="bn"){K+="%"}if(L==="ew"||L==="en"){K="%"+K}if(L==="cn"||L==="nc"){K="%"+K+"%"}if(L==="in"||L==="ni"){K=" ("+K+")"}E.errorcheck&&I(O.data,N);return A.inArray(N.searchtype,["int","integer","float","number","currency"])!==-1||L==="nn"||L==="nu"?O.field+" "+M+" "+K:O.field+" "+M+' "'+K+'"'};this.resetFilter=function(){this.p.filter=A.extend(true,{},this.p.initFilter);this.reDraw();this.onchange()};this.hideError=function(){A("th.ui-state-error",this).html("");A("tr.error",this).hide()};this.showError=function(){A("th.ui-state-error",this).html(this.p.errmsg);A("tr.error",this).show()};this.toUserFriendlyString=function(){return this.getStringForGroup(E.filter)};this.toString=function(){function L(N){var M="(",R;if(N.groups!==undefined){for(R=0;R<N.groups.length;R++){if(M.length>1){M+=N.groupOp==="OR"?" || ":" && "}M+=L(N.groups[R])}}if(N.rules!==undefined){for(R=0;R<N.rules.length;R++){if(M.length>1){M+=N.groupOp==="OR"?" || ":" && "}var O=N.rules[R];if(K.p.errorcheck){var Q=void 0,P=void 0;for(Q=0;Q<K.p.columns.length;Q++){if(K.p.columns[Q].name===O.field){P=K.p.columns[Q];break}}P&&I(O.data,P)}M+=O.op+"(item."+O.field+",'"+O.data+"')"}}M+=")";return M==="()"?"":M}var K=this;return L(this.p.filter)};this.reDraw();if(this.p.showQuery){this.onchange()}this.filter=true}}})};A.extend(A.fn.jqFilter,{toSQLString:function(){var B="";this.each(function(){B=this.toUserFriendlyString()});return B},filterData:function(){var B;this.each(function(){B=this.p.filter});return B},getParameter:function(B){if(B!==undefined){if(this.p.hasOwnProperty(B)){return this.p[B]}}return this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(B){if(typeof B==="string"){B=jQuery.jgrid.parse(B)}this.each(function(){this.p.filter=B;this.reDraw();this.onchange()})}})})(jQuery);(function(A){A.jgrid.extend({editRow:function(F,I,C,M,K,H,J,D,L){var E={keys:I||false,oneditfunc:C||null,successfunc:M||null,url:K||null,extraparam:H||{},aftersavefunc:J||null,errorfunc:D||null,afterrestorefunc:L||null,restoreAfterError:true,mtype:"POST"},B=A.makeArray(arguments).slice(1),G;G=B[0]&&typeof B[0]=="object"&&!A.isFunction(B[0])?A.extend(E,B[0]):E;return this.each(function(){var T=this,U,O,Q=0,P=null,S={},N,R;if(T.grid){N=A(T).jqGrid("getInd",F,true);if(N!==false){if((A(N).attr("editable")||"0")=="0"&&!A(N).hasClass("not-editable-row")){R=T.p.colModel;A("td",N).each(function(X){U=R[X].name;var V=T.p.treeGrid===true&&U==T.p.ExpandColumn;if(V){O=A("span:first",this).html()}else{try{O=A.unformat(this,{rowId:F,colModel:R[X]},X)}catch(Y){O=R[X].edittype&&R[X].edittype=="textarea"?A(this).text():A(this).html()}}if(U!="cb"&&U!="subgrid"&&U!="rn"){if(T.p.autoencode){O=A.jgrid.htmlDecode(O)}S[U]=O;if(R[X].editable===true){if(P===null){P=X}V?A("span:first",this).html(""):A(this).html("");var W=A.extend({},R[X].editoptions||{},{id:F+"_"+U,name:U});if(!R[X].edittype){R[X].edittype="text"}if(O=="&nbsp;"||O=="&#160;"||O.length==1&&O.charCodeAt(0)==160){O=""}W=A.jgrid.createEl(R[X].edittype,W,O,true,A.extend({},A.jgrid.ajaxOptions,T.p.ajaxSelectOptions||{}));A(W).addClass("editable");V?A("span:first",this).append(W):A(this).append(W);R[X].edittype=="select"&&typeof R[X].editoptions!=="undefined"&&R[X].editoptions.multiple===true&&typeof R[X].editoptions.dataUrl==="undefined"&&A.browser.msie&&A(W).width(A(W).width());Q++}}});if(Q>0){S.id=F;T.p.savedRow.push(S);A(N).attr("editable","1");A("td:eq("+P+") input",N).focus();G.keys===true&&A(N).bind("keydown",function(V){V.keyCode===27&&A(T).jqGrid("restoreRow",F,L);if(V.keyCode===13){if(V.target.tagName=="TEXTAREA"){return true}A(T).jqGrid("saveRow",F,G);return false}V.stopPropagation()});A.isFunction(G.oneditfunc)&&G.oneditfunc.call(T,F)}}}}})},saveRow:function(R,C,M,G,E,B,D){var N={successfunc:C||null,url:M||null,extraparam:G||{},aftersavefunc:E||null,errorfunc:B||null,afterrestorefunc:D||null,restoreAfterError:true,mtype:"POST"},F=A.makeArray(arguments).slice(1),Q;Q=F[0]&&typeof F[0]=="object"&&!A.isFunction(F[0])?A.extend(N,F[0]):N;var L=false,W=this[0],U,V={},P={},I={},H,K,O;if(!W.grid){return L}O=A(W).jqGrid("getInd",R,true);if(O===false){return L}N=A(O).attr("editable");Q.url=Q.url?Q.url:W.p.editurl;if(N==="1"){var T;A("td",O).each(function(a){T=W.p.colModel[a];U=T.name;if(U!="cb"&&U!="subgrid"&&T.editable===true&&U!="rn"&&!A(this).hasClass("not-editable-cell")){switch(T.edittype){case"checkbox":var Y=["Yes","No"];if(T.editoptions){Y=T.editoptions.value.split(":")}V[U]=A("input",this).is(":checked")?Y[0]:Y[1];break;case"text":case"password":case"textarea":case"button":V[U]=A("input, textarea",this).val();break;case"select":if(T.editoptions.multiple){Y=A("select",this);var X=[];V[U]=A(Y).val();V[U]=V[U]?V[U].join(","):"";A("select option:selected",this).each(function(c,b){X[c]=A(b).text()});P[U]=X.join(",")}else{V[U]=A("select option:selected",this).val();P[U]=A("select option:selected",this).text()}if(T.formatter&&T.formatter=="select"){P={}}break;case"custom":try{if(T.editoptions&&A.isFunction(T.editoptions.custom_value)){V[U]=T.editoptions.custom_value.call(W,A(".customelement",this),"get");if(V[U]===undefined){throw"e2"}}else{throw"e1"}}catch(Z){Z=="e1"&&A.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+A.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose);Z=="e2"?A.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+A.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose):A.jgrid.info_dialog(jQuery.jgrid.errors.errcap,Z.message,jQuery.jgrid.edit.bClose)}}K=A.jgrid.checkValues(V[U],a,W);if(K[0]===false){K[1]=V[U]+" "+K[1];return false}if(W.p.autoencode){V[U]=A.jgrid.htmlEncode(V[U])}if(Q.url!=="clientArray"&&T.editoptions&&T.editoptions.NullIfEmpty===true){if(V[U]==""){I[U]="null"}}}});if(K[0]===false){try{var S=A.jgrid.findPos(A("#"+A.jgrid.jqID(R),W.grid.bDiv)[0]);A.jgrid.info_dialog(A.jgrid.errors.errcap,K[1],A.jgrid.edit.bClose,{left:S[0],top:S[1]})}catch(J){alert(K[1])}return L}N=W.p.prmNames;F=N.oper;S=N.id;if(V){V[F]=N.editoper;V[S]=R;if(typeof W.p.inlineData=="undefined"){W.p.inlineData={}}V=A.extend({},V,W.p.inlineData,Q.extraparam)}if(Q.url=="clientArray"){V=A.extend({},V,P);W.p.autoencode&&A.each(V,function(Y,X){V[Y]=A.jgrid.htmlDecode(X)});S=A(W).jqGrid("setRowData",R,V);A(O).attr("editable","0");for(N=0;N<W.p.savedRow.length;N++){if(W.p.savedRow[N].id==R){H=N;break}}H>=0&&W.p.savedRow.splice(H,1);A.isFunction(Q.aftersavefunc)&&Q.aftersavefunc.call(W,R,S);L=true;A(O).unbind("keydown")}else{A("#lui_"+W.p.id).show();I=A.extend({},V,I);I[S]=A.jgrid.stripPref(W.p.idPrefix,I[S]);A.ajax(A.extend({url:Q.url,data:A.isFunction(W.p.serializeRowData)?W.p.serializeRowData.call(W,I):I,type:Q.mtype,async:false,complete:function(Z,Y){A("#lui_"+W.p.id).hide();if(Y==="success"){if((A.isFunction(Q.successfunc)?Q.successfunc.call(W,Z):true)===true){W.p.autoencode&&A.each(V,function(a,b){V[a]=A.jgrid.htmlDecode(b)});V=A.extend({},V,P);A(W).jqGrid("setRowData",R,V);A(O).attr("editable","0");for(var X=0;X<W.p.savedRow.length;X++){if(W.p.savedRow[X].id==R){H=X;break}}H>=0&&W.p.savedRow.splice(H,1);A.isFunction(Q.aftersavefunc)&&Q.aftersavefunc.call(W,R,Z);L=true;A(O).unbind("keydown")}else{A.isFunction(Q.errorfunc)&&Q.errorfunc.call(W,R,Z,Y);Q.restoreAfterError===true&&A(W).jqGrid("restoreRow",R,Q.afterrestorefunc)}}},error:function(Z,Y){A("#lui_"+W.p.id).hide();if(A.isFunction(Q.errorfunc)){Q.errorfunc.call(W,R,Z,Y)}else{try{jQuery.jgrid.info_dialog(jQuery.jgrid.errors.errcap,'<div class="ui-state-error">'+Z.responseText+"</div>",jQuery.jgrid.edit.bClose,{buttonalign:"right"})}catch(X){alert(Z.responseText)}}Q.restoreAfterError===true&&A(W).jqGrid("restoreRow",R,Q.afterrestorefunc)}},A.jgrid.ajaxOptions,W.p.ajaxRowOptions||{}))}}return L},restoreRow:function(C,B){return this.each(function(){var D=this,H,G,I={};if(D.grid){G=A(D).jqGrid("getInd",C,true);if(G!==false){for(var F=0;F<D.p.savedRow.length;F++){if(D.p.savedRow[F].id==C){H=F;break}}if(H>=0){if(A.isFunction(A.fn.datepicker)){try{A("input.hasDatepicker","#"+A.jgrid.jqID(G.id)).datepicker("hide")}catch(E){}}A.each(D.p.colModel,function(){if(this.editable===true&&this.name in D.p.savedRow[H]&&!A(this).hasClass("not-editable-cell")){I[this.name]=D.p.savedRow[H][this.name]}});A(D).jqGrid("setRowData",C,I);A(G).attr("editable","0").unbind("keydown");D.p.savedRow.splice(H,1)}A.isFunction(B)&&B.call(D,C)}}})}})})(jQuery);(function(A){A.jgrid.extend({editCell:function(D,C,B){return this.each(function(){var L=this,I,K,J,H;if(!(!L.grid||L.p.cellEdit!==true)){C=parseInt(C,10);L.p.selrow=L.rows[D].id;L.p.knv||A(L).jqGrid("GridNav");if(L.p.savedRow.length>0){if(B===true){if(D==L.p.iRow&&C==L.p.iCol){return }}A(L).jqGrid("saveCell",L.p.savedRow[0].id,L.p.savedRow[0].ic)}else{window.setTimeout(function(){A("#"+L.p.knv).attr("tabindex","-1").focus()},0)}H=L.p.colModel[C];I=H.name;if(!(I=="subgrid"||I=="cb"||I=="rn")){J=A("td:eq("+C+")",L.rows[D]);if(H.editable===true&&B===true&&!J.hasClass("not-editable-cell")){if(parseInt(L.p.iCol,10)>=0&&parseInt(L.p.iRow,10)>=0){A("td:eq("+L.p.iCol+")",L.rows[L.p.iRow]).removeClass("edit-cell ui-state-highlight");A(L.rows[L.p.iRow]).removeClass("selected-row ui-state-hover")}A(J).addClass("edit-cell ui-state-highlight");A(L.rows[D]).addClass("selected-row ui-state-hover");try{K=A.unformat(J,{rowId:L.rows[D].id,colModel:H},C)}catch(F){K=H.edittype&&H.edittype=="textarea"?A(J).text():A(J).html()}if(L.p.autoencode){K=A.jgrid.htmlDecode(K)}if(!H.edittype){H.edittype="text"}L.p.savedRow.push({id:D,ic:C,name:I,v:K});if(K=="&nbsp;"||K=="&#160;"||K.length==1&&K.charCodeAt(0)==160){K=""}if(A.isFunction(L.p.formatCell)){var G=L.p.formatCell.call(L,L.rows[D].id,I,K,D,C);if(G!==undefined){K=G}}G=A.extend({},H.editoptions||{},{id:D+"_"+I,name:I});var E=A.jgrid.createEl(H.edittype,G,K,true,A.extend({},A.jgrid.ajaxOptions,L.p.ajaxSelectOptions||{}));A.isFunction(L.p.beforeEditCell)&&L.p.beforeEditCell.call(L,L.rows[D].id,I,K,D,C);A(J).html("").append(E).attr("tabindex","0");window.setTimeout(function(){A(E).focus()},0);A("input, select, textarea",J).bind("keydown",function(M){if(M.keyCode===27){if(A("input.hasDatepicker",J).length>0){A(".ui-datepicker").is(":hidden")?A(L).jqGrid("restoreCell",D,C):A("input.hasDatepicker",J).datepicker("hide")}else{A(L).jqGrid("restoreCell",D,C)}}M.keyCode===13&&A(L).jqGrid("saveCell",D,C);if(M.keyCode==9){if(L.grid.hDiv.loading){return false}else{M.shiftKey?A(L).jqGrid("prevCell",D,C):A(L).jqGrid("nextCell",D,C)}}M.stopPropagation()});A.isFunction(L.p.afterEditCell)&&L.p.afterEditCell.call(L,L.rows[D].id,I,K,D,C)}else{if(parseInt(L.p.iCol,10)>=0&&parseInt(L.p.iRow,10)>=0){A("td:eq("+L.p.iCol+")",L.rows[L.p.iRow]).removeClass("edit-cell ui-state-highlight");A(L.rows[L.p.iRow]).removeClass("selected-row ui-state-hover")}J.addClass("edit-cell ui-state-highlight");A(L.rows[D]).addClass("selected-row ui-state-hover");if(A.isFunction(L.p.onSelectCell)){K=J.html().replace(/\&#160\;/ig,"");L.p.onSelectCell.call(L,L.rows[D].id,I,K,D,C)}}L.p.iCol=C;L.p.iRow=D}}})},saveCell:function(C,B){return this.each(function(){var P=this,O;if(!(!P.grid||P.p.cellEdit!==true)){O=P.p.savedRow.length>=1?0:null;if(O!==null){var L=A("td:eq("+B+")",P.rows[C]),N,M,K=P.p.colModel[B],I=K.name,J=A.jgrid.jqID(I);switch(K.edittype){case"select":if(K.editoptions.multiple){J=A("#"+C+"_"+J,P.rows[C]);var G=[];if(N=A(J).val()){N.join(",")}else{N=""}A("option:selected",J).each(function(T,S){G[T]=A(S).text()});M=G.join(",")}else{N=A("#"+C+"_"+J+">option:selected",P.rows[C]).val();M=A("#"+C+"_"+J+">option:selected",P.rows[C]).text()}if(K.formatter){M=N}break;case"checkbox":var H=["Yes","No"];if(K.editoptions){H=K.editoptions.value.split(":")}M=N=A("#"+C+"_"+J,P.rows[C]).is(":checked")?H[0]:H[1];break;case"password":case"text":case"textarea":case"button":M=N=A("#"+C+"_"+J,P.rows[C]).val();break;case"custom":try{if(K.editoptions&&A.isFunction(K.editoptions.custom_value)){N=K.editoptions.custom_value.call(P,A(".customelement",L),"get");if(N===undefined){throw"e2"}else{M=N}}else{throw"e1"}}catch(E){E=="e1"&&A.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+A.jgrid.edit.msg.nodefined,jQuery.jgrid.edit.bClose);E=="e2"?A.jgrid.info_dialog(jQuery.jgrid.errors.errcap,"function 'custom_value' "+A.jgrid.edit.msg.novalue,jQuery.jgrid.edit.bClose):A.jgrid.info_dialog(jQuery.jgrid.errors.errcap,E.message,jQuery.jgrid.edit.bClose)}}if(M!==P.p.savedRow[O].v){if(A.isFunction(P.p.beforeSaveCell)){if(O=P.p.beforeSaveCell.call(P,P.rows[C].id,I,N,C,B)){M=N=O}}var D=A.jgrid.checkValues(N,B,P);if(D[0]===true){O={};if(A.isFunction(P.p.beforeSubmitCell)){(O=P.p.beforeSubmitCell.call(P,P.rows[C].id,I,N,C,B))||(O={})}A("input.hasDatepicker",L).length>0&&A("input.hasDatepicker",L).datepicker("hide");if(P.p.cellsubmit=="remote"){if(P.p.cellurl){var F={};if(P.p.autoencode){N=A.jgrid.htmlEncode(N)}F[I]=N;H=P.p.prmNames;K=H.id;J=H.oper;F[K]=A.jgrid.stripPref(P.p.idPrefix,P.rows[C].id);F[J]=H.editoper;F=A.extend(O,F);A("#lui_"+P.p.id).show();P.grid.hDiv.loading=true;A.ajax(A.extend({url:P.p.cellurl,data:A.isFunction(P.p.serializeCellData)?P.p.serializeCellData.call(P,F):F,type:"POST",complete:function(U,T){A("#lui_"+P.p.id).hide();P.grid.hDiv.loading=false;if(T=="success"){if(A.isFunction(P.p.afterSubmitCell)){var S=P.p.afterSubmitCell.call(P,U,F.id,I,N,C,B);if(S[0]===true){A(L).empty();A(P).jqGrid("setCell",P.rows[C].id,B,M,false,false,true);A(L).addClass("dirty-cell");A(P.rows[C]).addClass("edited");A.isFunction(P.p.afterSaveCell)&&P.p.afterSaveCell.call(P,P.rows[C].id,I,N,C,B);P.p.savedRow.splice(0,1)}else{A.jgrid.info_dialog(A.jgrid.errors.errcap,S[1],A.jgrid.edit.bClose);A(P).jqGrid("restoreCell",C,B)}}else{A(L).empty();A(P).jqGrid("setCell",P.rows[C].id,B,M,false,false,true);A(L).addClass("dirty-cell");A(P.rows[C]).addClass("edited");A.isFunction(P.p.afterSaveCell)&&P.p.afterSaveCell.call(P,P.rows[C].id,I,N,C,B);P.p.savedRow.splice(0,1)}}},error:function(T,S){A("#lui_"+P.p.id).hide();P.grid.hDiv.loading=false;A.isFunction(P.p.errorCell)?P.p.errorCell.call(P,T,S):A.jgrid.info_dialog(A.jgrid.errors.errcap,T.status+" : "+T.statusText+"<br/>"+S,A.jgrid.edit.bClose);A(P).jqGrid("restoreCell",C,B)}},A.jgrid.ajaxOptions,P.p.ajaxCellOptions||{}))}else{try{A.jgrid.info_dialog(A.jgrid.errors.errcap,A.jgrid.errors.nourl,A.jgrid.edit.bClose);A(P).jqGrid("restoreCell",C,B)}catch(R){}}}if(P.p.cellsubmit=="clientArray"){A(L).empty();A(P).jqGrid("setCell",P.rows[C].id,B,M,false,false,true);A(L).addClass("dirty-cell");A(P.rows[C]).addClass("edited");A.isFunction(P.p.afterSaveCell)&&P.p.afterSaveCell.call(P,P.rows[C].id,I,N,C,B);P.p.savedRow.splice(0,1)}}else{try{window.setTimeout(function(){A.jgrid.info_dialog(A.jgrid.errors.errcap,N+" "+D[1],A.jgrid.edit.bClose)},100);A(P).jqGrid("restoreCell",C,B)}catch(Q){}}}else{A(P).jqGrid("restoreCell",C,B)}}A.browser.opera?A("#"+P.p.knv).attr("tabindex","-1").focus():window.setTimeout(function(){A("#"+P.p.knv).attr("tabindex","-1").focus()},0)}})},restoreCell:function(C,B){return this.each(function(){var D=this,G;if(!(!D.grid||D.p.cellEdit!==true)){G=D.p.savedRow.length>=1?0:null;if(G!==null){var E=A("td:eq("+B+")",D.rows[C]);if(A.isFunction(A.fn.datepicker)){try{A("input.hasDatepicker",E).datepicker("hide")}catch(F){}}A(E).empty().attr("tabindex","-1");A(D).jqGrid("setCell",D.rows[C].id,B,D.p.savedRow[G].v,false,false,true);A.isFunction(D.p.afterRestoreCell)&&D.p.afterRestoreCell.call(D,D.rows[C].id,D.p.savedRow[G].v,C,B);D.p.savedRow.splice(0,1)}window.setTimeout(function(){A("#"+D.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(C,B){return this.each(function(){var D=false;if(!(!this.grid||this.p.cellEdit!==true)){for(var E=B+1;E<this.p.colModel.length;E++){if(this.p.colModel[E].editable===true){D=E;break}}if(D!==false){A(this).jqGrid("editCell",C,D,true)}else{this.p.savedRow.length>0&&A(this).jqGrid("saveCell",C,B)}}})},prevCell:function(C,B){return this.each(function(){var D=false;if(!(!this.grid||this.p.cellEdit!==true)){for(var E=B-1;E>=0;E--){if(this.p.colModel[E].editable===true){D=E;break}}if(D!==false){A(this).jqGrid("editCell",C,D,true)}else{this.p.savedRow.length>0&&A(this).jqGrid("saveCell",C,B)}}})},GridNav:function(){return this.each(function(){function F(M,L,J){if(J.substr(0,1)=="v"){var K=A(B.grid.bDiv)[0].clientHeight,H=A(B.grid.bDiv)[0].scrollTop,I=B.rows[M].offsetTop+B.rows[M].clientHeight,N=B.rows[M].offsetTop;if(J=="vd"){if(I>=K){A(B.grid.bDiv)[0].scrollTop=A(B.grid.bDiv)[0].scrollTop+B.rows[M].clientHeight}}if(J=="vu"){if(N<H){A(B.grid.bDiv)[0].scrollTop=A(B.grid.bDiv)[0].scrollTop-B.rows[M].clientHeight}}}if(J=="h"){J=A(B.grid.bDiv)[0].clientWidth;K=A(B.grid.bDiv)[0].scrollLeft;H=B.rows[M].cells[L].offsetLeft;if(B.rows[M].cells[L].offsetLeft+B.rows[M].cells[L].clientWidth>=J+parseInt(K,10)){A(B.grid.bDiv)[0].scrollLeft=A(B.grid.bDiv)[0].scrollLeft+B.rows[M].cells[L].clientWidth}else{if(H<K){A(B.grid.bDiv)[0].scrollLeft=A(B.grid.bDiv)[0].scrollLeft-B.rows[M].cells[L].clientWidth}}}}function D(K,J){var H,I;if(J=="lft"){H=K+1;for(I=K;I>=0;I--){if(B.p.colModel[I].hidden!==true){H=I;break}}}if(J=="rgt"){H=K-1;for(I=K;I<B.p.colModel.length;I++){if(B.p.colModel[I].hidden!==true){H=I;break}}}return H}var B=this;if(!(!B.grid||B.p.cellEdit!==true)){B.p.knv=B.p.id+"_kn";var G=A("<span style='width:0px;height:0px;background-color:black;' tabindex='0'><span tabindex='-1' style='width:0px;height:0px;background-color:grey' id='"+B.p.knv+"'></span></span>"),C,E;A(G).insertBefore(B.grid.cDiv);A("#"+B.p.knv).focus().keydown(function(H){E=H.keyCode;if(B.p.direction=="rtl"){if(E==37){E=39}else{if(E==39){E=37}}}switch(E){case 38:if(B.p.iRow-1>0){F(B.p.iRow-1,B.p.iCol,"vu");A(B).jqGrid("editCell",B.p.iRow-1,B.p.iCol,false)}break;case 40:if(B.p.iRow+1<=B.rows.length-1){F(B.p.iRow+1,B.p.iCol,"vd");A(B).jqGrid("editCell",B.p.iRow+1,B.p.iCol,false)}break;case 37:if(B.p.iCol-1>=0){C=D(B.p.iCol-1,"lft");F(B.p.iRow,C,"h");A(B).jqGrid("editCell",B.p.iRow,C,false)}break;case 39:if(B.p.iCol+1<=B.p.colModel.length-1){C=D(B.p.iCol+1,"rgt");F(B.p.iRow,C,"h");A(B).jqGrid("editCell",B.p.iRow,C,false)}break;case 13:parseInt(B.p.iCol,10)>=0&&parseInt(B.p.iRow,10)>=0&&A(B).jqGrid("editCell",B.p.iRow,B.p.iCol,true)}return false})}})},getChangedCells:function(C){var B=[];C||(C="all");this.each(function(){var D=this,E;!D.grid||D.p.cellEdit!==true||A(D.rows).each(function(F){var G={};if(A(this).hasClass("edited")){A("td",this).each(function(J){E=D.p.colModel[J].name;if(E!=="cb"&&E!=="subgrid"){if(C=="dirty"){if(A(this).hasClass("dirty-cell")){try{G[E]=A.unformat(this,{rowId:D.rows[F].id,colModel:D.p.colModel[J]},J)}catch(I){G[E]=A.jgrid.htmlDecode(A(this).html())}}}else{try{G[E]=A.unformat(this,{rowId:D.rows[F].id,colModel:D.p.colModel[J]},J)}catch(H){G[E]=A.jgrid.htmlDecode(A(this).html())}}}});G.id=this.id;B.push(G)}})});return B}})})(jQuery);(function(J){J.fn.jqm=function(L){var M={overlay:50,closeoverlay:true,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:I,ajaxText:"",target:I,modal:I,toTop:I,onShow:I,onHide:I,onLoad:I};return this.each(function(){if(this._jqm){return H[this._jqm].c=J.extend({},H[this._jqm].c,L)}F++;this._jqm=F;H[F]={c:J.extend(M,J.jqm.params,L),a:I,w:J(this).addClass("jqmID"+F),s:F};M.trigger&&J(this).jqmAddTrigger(M.trigger)})};J.fn.jqmAddClose=function(L){return D(this,L,"jqmHide")};J.fn.jqmAddTrigger=function(L){return D(this,L,"jqmShow")};J.fn.jqmShow=function(L){return this.each(function(){J.jqm.open(this._jqm,L)})};J.fn.jqmHide=function(L){return this.each(function(){J.jqm.close(this._jqm,L)})};J.jqm={hash:{},open:function(M,Q){var S=H[M],R=S.c,N="."+R.closeClass,P=parseInt(S.w.css("z-index"));P=P>0?P:3000;var O=J("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":P-1,opacity:R.overlay/100});if(S.a){return I}S.t=Q;S.a=true;S.w.css("z-index",P);if(R.modal){G[0]||setTimeout(function(){C("bind")},1);G.push(M)}else{if(R.overlay>0){R.closeoverlay&&S.w.jqmAddClose(O)}else{O=I}}S.o=O?O.addClass(R.overlayClass).prependTo("body"):I;if(B){J("html,body").css({height:"100%",width:"100%"});if(O){O=O.css({position:"absolute"})[0];for(var L in {Top:1,Left:1}){O.style.setExpression(L.toLowerCase(),"(_=(document.documentElement.scroll"+L+" || document.body.scroll"+L+"))+'px'")}}}if(R.ajax){P=R.target||S.w;O=R.ajax;P=typeof P=="string"?J(P,S.w):J(P);O=O.substr(0,1)=="@"?J(Q).attr(O.substring(1)):O;P.html(R.ajaxText).load(O,function(){R.onLoad&&R.onLoad.call(this,S);N&&S.w.jqmAddClose(J(N,S.w));A(S)})}else{N&&S.w.jqmAddClose(J(N,S.w))}R.toTop&&S.o&&S.w.before('<span id="jqmP'+S.w[0]._jqm+'"></span>').insertAfter(S.o);R.onShow?R.onShow(S):S.w.show();A(S);return I},close:function(L){L=H[L];if(!L.a){return I}L.a=I;if(G[0]){G.pop();G[0]||C("unbind")}L.c.toTop&&L.o&&J("#jqmP"+L.w[0]._jqm).after(L.w).remove();if(L.c.onHide){L.c.onHide(L)}else{L.w.hide();L.o&&L.o.remove()}return I},params:{}};var F=0,H=J.jqm.hash,G=[],B=J.browser.msie&&J.browser.version=="6.0",I=false,A=function(L){var M=J('<iframe src="javascript:false;document.write(\'\');" class="jqm"></iframe>').css({opacity:0});if(B){if(L.o){L.o.html('<p style="width:100%;height:100%"/>').prepend(M)}else{J("iframe.jqm",L.w)[0]||L.w.prepend(M)}}K(L)},K=function(L){try{J(":input:visible",L.w)[0].focus()}catch(M){}},C=function(L){J(document)[L]("keypress",E)[L]("keydown",E)[L]("mousedown",E)},E=function(L){var M=H[G[G.length-1]];(L=!J(L.target).parents(".jqmID"+M.s)[0])&&K(M);return !L},D=function(L,M,N){return L.each(function(){var O=this._jqm;J(M).each(function(){if(!this[N]){this[N]=[];J(this).click(function(){for(var P in {jqmShow:1,jqmHide:1}){for(var Q in this[P]){if(H[this[P][Q]]){H[this[P][Q]].w[P](this)}}}return I})}this[N].push(O)})})}})(jQuery);(function(A){A.fn.jqDrag=function(H){return B(this,H,"d")};A.fn.jqResize=function(H,I){return B(this,H,"r",I)};A.jqDnR={dnr:{},e:0,drag:function(H){if(G.k=="d"){F.css({left:G.X+H.pageX-G.pX,top:G.Y+H.pageY-G.pY})}else{F.css({width:Math.max(H.pageX-G.pX+G.W,0),height:Math.max(H.pageY-G.pY+G.H,0)});M1&&E.css({width:Math.max(H.pageX-M1.pX+M1.W,0),height:Math.max(H.pageY-M1.pY+M1.H,0)})}return false},stop:function(){A(document).unbind("mousemove",D.drag).unbind("mouseup",D.stop)}};var D=A.jqDnR,G=D.dnr,F=D.e,E,B=function(I,J,K,H){return I.each(function(){J=J?A(J,I):I;J.bind("mousedown",{e:I,k:K},function(N){var L=N.data,M={};F=L.e;E=H?A(H):false;if(F.css("position")!="relative"){try{F.position(M)}catch(P){}}G={X:M.left||C("left")||0,Y:M.top||C("top")||0,W:C("width")||F[0].scrollWidth||0,H:C("height")||F[0].scrollHeight||0,pX:N.pageX,pY:N.pageY,k:L.k};M1=E&&L.k!="d"?{X:M.left||f1("left")||0,Y:M.top||f1("top")||0,W:E[0].offsetWidth||f1("width")||0,H:E[0].offsetHeight||f1("height")||0,pX:N.pageX,pY:N.pageY,k:L.k}:false;if(A("input.hasDatepicker",F[0])[0]){try{A("input.hasDatepicker",F[0]).datepicker("hide")}catch(O){}}A(document).mousemove(A.jqDnR.drag).mouseup(A.jqDnR.stop);return false})})},C=function(H){return parseInt(F.css(H))||false};f1=function(H){return parseInt(E.css(H))||false}})(jQuery);(function(A){A.jgrid.extend({setSubGrid:function(){return this.each(function(){var B;this.p.subGridOptions=A.extend({plusicon:"ui-icon-plus",minusicon:"ui-icon-minus",openicon:"ui-icon-carat-1-sw",expandOnLoad:false,delayOnLoad:50,selectOnExpand:false,reloadOnExpand:true},this.p.subGridOptions||{});this.p.colNames.unshift("");this.p.colModel.unshift({name:"subgrid",width:A.browser.safari?this.p.subGridWidth+this.p.cellLayout:this.p.subGridWidth,sortable:false,resizable:false,hidedlg:true,search:false,fixed:true});B=this.p.subGridModel;if(B[0]){B[0].align=A.extend([],B[0].align||[]);for(var C=0;C<B[0].name.length;C++){B[0].align[C]=B[0].align[C]||"left"}}})},addSubGridCell:function(D,E){var B="",F,C;this.each(function(){B=this.formatCol(D,E);C=this.p.id;F=this.p.subGridOptions.plusicon});return'<td role="grid" aria-describedby="'+C+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+B+"><a href='javascript:void(0);'><span class='ui-icon "+F+"'></span></a></td>"},addSubGrid:function(B,C){return this.each(function(){var L=this;if(L.grid){var G=function(R,Q,S){Q=A("<td align='"+L.p.subGridModel[0].align[S]+"'></td>").html(Q);A(R).append(Q)},P=function(U,R){var V,W,T,Q=A("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),S=A("<tr></tr>");for(W=0;W<L.p.subGridModel[0].name.length;W++){V=A("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+L.p.direction+"'></th>");A(V).html(L.p.subGridModel[0].name[W]);A(V).width(L.p.subGridModel[0].width[W]);A(S).append(V)}A(Q).append(S);if(U){T=L.p.xmlReader.subgrid;A(T.root+" "+T.row,U).each(function(){S=A("<tr class='ui-widget-content ui-subtblcell'></tr>");if(T.repeatitems===true){A(T.cell,this).each(function(Y){G(S,A(this).text()||"&#160;",Y)})}else{var X=L.p.subGridModel[0].mapping||L.p.subGridModel[0].name;if(X){for(W=0;W<X.length;W++){G(S,A(X[W],this).text()||"&#160;",W)}}}A(Q).append(S)})}V=A("table:first",L.grid.bDiv).attr("id")+"_";A("#"+V+R).append(Q);L.grid.hDiv.loading=false;A("#load_"+L.p.id).hide();return false},N=function(W,T){var X,Y,V,S,U,Q=A("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),R=A("<tr></tr>");for(Y=0;Y<L.p.subGridModel[0].name.length;Y++){X=A("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+L.p.direction+"'></th>");A(X).html(L.p.subGridModel[0].name[Y]);A(X).width(L.p.subGridModel[0].width[Y]);A(R).append(X)}A(Q).append(R);if(W){S=L.p.jsonReader.subgrid;X=W[S.root];if(typeof X!=="undefined"){for(Y=0;Y<X.length;Y++){V=X[Y];R=A("<tr class='ui-widget-content ui-subtblcell'></tr>");if(S.repeatitems===true){if(S.cell){V=V[S.cell]}for(U=0;U<V.length;U++){G(R,V[U]||"&#160;",U)}}else{var Z=L.p.subGridModel[0].mapping||L.p.subGridModel[0].name;if(Z.length){for(U=0;U<Z.length;U++){G(R,V[Z[U]]||"&#160;",U)}}}A(Q).append(R)}}}Y=A("table:first",L.grid.bDiv).attr("id")+"_";A("#"+Y+T).append(Q);L.grid.hDiv.loading=false;A("#load_"+L.p.id).hide();return false},I=function(S){var Q,T,U,R;Q=A(S).attr("id");T={nd_:(new Date).getTime()};T[L.p.prmNames.subgridid]=Q;if(!L.p.subGridModel[0]){return false}if(L.p.subGridModel[0].params){for(R=0;R<L.p.subGridModel[0].params.length;R++){for(U=0;U<L.p.colModel.length;U++){if(L.p.colModel[U].name==L.p.subGridModel[0].params[R]){T[L.p.colModel[U].name]=A("td:eq("+U+")",S).text().replace(/\&#160\;/ig,"")}}}}if(!L.grid.hDiv.loading){L.grid.hDiv.loading=true;A("#load_"+L.p.id).show();if(!L.p.subgridtype){L.p.subgridtype=L.p.datatype}if(A.isFunction(L.p.subgridtype)){L.p.subgridtype.call(L,T)}else{L.p.subgridtype=L.p.subgridtype.toLowerCase()}switch(L.p.subgridtype){case"xml":case"json":A.ajax(A.extend({type:L.p.mtype,url:L.p.subGridUrl,dataType:L.p.subgridtype,data:A.isFunction(L.p.serializeSubGridData)?L.p.serializeSubGridData.call(L,T):T,complete:function(V){L.p.subgridtype=="xml"?P(V.responseXML,Q):N(A.jgrid.parse(V.responseText),Q)}},A.jgrid.ajaxOptions,L.p.ajaxSubgridOptions||{}))}}return false},H,O,M,K=0,F,E;A.each(L.p.colModel,function(){if(this.hidden===true||this.name=="rn"||this.name=="cb"){K++}});var J=L.rows.length,D=1;if(C!==undefined&&C>0){D=C;J=C+1}for(;D<J;){A(L.rows[D]).hasClass("jqgrow")&&A(L.rows[D].cells[B]).bind("click",function(){var Q=A(this).parent("tr")[0];E=Q.nextSibling;if(A(this).hasClass("sgcollapsed")){O=L.p.id;H=Q.id;if(L.p.subGridOptions.reloadOnExpand===true||L.p.subGridOptions.reloadOnExpand===false&&!A(E).hasClass("ui-subgrid")){M=B>=1?"<td colspan='"+B+"'>&#160;</td>":"";F=true;if(A.isFunction(L.p.subGridBeforeExpand)){F=L.p.subGridBeforeExpand.call(L,O+"_"+H,H)}if(F===false){return false}A(Q).after("<tr role='row' class='ui-subgrid'>"+M+"<td class='ui-widget-content subgrid-cell'><span class='ui-icon "+L.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(L.p.colNames.length-1-K,10)+"' class='ui-widget-content subgrid-data'><div id="+O+"_"+H+" class='tablediv'></div></td></tr>");A.isFunction(L.p.subGridRowExpanded)?L.p.subGridRowExpanded.call(L,O+"_"+H,H):I(Q)}else{A(E).show()}A(this).html("<a href='javascript:void(0);'><span class='ui-icon "+L.p.subGridOptions.minusicon+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded");L.p.subGridOptions.selectOnExpand&&A(L).jqGrid("setSelection",H)}else{if(A(this).hasClass("sgexpanded")){F=true;if(A.isFunction(L.p.subGridRowColapsed)){H=Q.id;F=L.p.subGridRowColapsed.call(L,O+"_"+H,H)}if(F===false){return false}if(L.p.subGridOptions.reloadOnExpand===true){A(E).remove(".ui-subgrid")}else{A(E).hasClass("ui-subgrid")&&A(E).hide()}A(this).html("<a href='javascript:void(0);'><span class='ui-icon "+L.p.subGridOptions.plusicon+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed")}}return false});L.p.subGridOptions.expandOnLoad===true&&A(L.rows[D].cells[B]).trigger("click");D++}L.subGridXml=function(R,Q){P(R,Q)};L.subGridJson=function(R,Q){N(R,Q)}}})},expandSubGridRow:function(B){return this.each(function(){if(this.grid||B){if(this.p.subGrid===true){var C=A(this).jqGrid("getInd",B,true);if(C){(C=A("td.sgcollapsed",C)[0])&&A(C).trigger("click")}}}})},collapseSubGridRow:function(B){return this.each(function(){if(this.grid||B){if(this.p.subGrid===true){var C=A(this).jqGrid("getInd",B,true);if(C){(C=A("td.sgexpanded",C)[0])&&A(C).trigger("click")}}}})},toggleSubGridRow:function(B){return this.each(function(){if(this.grid||B){if(this.p.subGrid===true){var D=A(this).jqGrid("getInd",B,true);if(D){var C=A("td.sgcollapsed",D)[0];if(C){A(C).trigger("click")}else{(C=A("td.sgexpanded",D)[0])&&A(C).trigger("click")}}}}})}})})(jQuery);(function(A){A.jgrid.extend({groupingSetup:function(){return this.each(function(){var C=this.p.groupingView;if(C!==null&&(typeof C==="object"||A.isFunction(C))){if(C.groupField.length){if(typeof C.visibiltyOnNextGrouping=="undefined"){C.visibiltyOnNextGrouping=[]}for(var F=0;F<C.groupField.length;F++){C.groupOrder[F]||(C.groupOrder[F]="asc");C.groupText[F]||(C.groupText[F]="{0}");if(typeof C.groupColumnShow[F]!="boolean"){C.groupColumnShow[F]=true}if(typeof C.groupSummary[F]!="boolean"){C.groupSummary[F]=false}if(C.groupColumnShow[F]===true){C.visibiltyOnNextGrouping[F]=true;A(this).jqGrid("showCol",C.groupField[F])}else{C.visibiltyOnNextGrouping[F]=A("#"+this.p.id+"_"+C.groupField[F]).is(":visible");A(this).jqGrid("hideCol",C.groupField[F])}C.sortitems[F]=[];C.sortnames[F]=[];C.summaryval[F]=[];if(C.groupSummary[F]){C.summary[F]=[];for(var B=this.p.colModel,E=0,D=B.length;E<D;E++){B[E].summaryType&&C.summary[F].push({nm:B[E].name,st:B[E].summaryType,v:""})}}}this.p.scroll=false;this.p.rownumbers=false;this.p.subGrid=false;this.p.treeGrid=false;this.p.gridview=true}else{this.p.grouping=false}}else{this.p.grouping=false}})},groupingPrepare:function(C,E,B,D){this.each(function(){E[0]+="";var G=E[0].toString().split(" ").join(""),F=this.p.groupingView,H=this;if(B.hasOwnProperty(G)){B[G].push(C)}else{B[G]=[];B[G].push(C);F.sortitems[0].push(G);F.sortnames[0].push(A.trim(E[0].toString()));F.summaryval[0][G]=A.extend(true,[],F.summary[0])}F.groupSummary[0]&&A.each(F.summaryval[0][G],function(){this.v=A.isFunction(this.st)?this.st.call(H,this.v,this.nm,D):A(H).jqGrid("groupingCalculations."+this.st,this.v,this.nm,D)})});return B},groupingToggle:function(B){this.each(function(){var J=this.p.groupingView,C=B.lastIndexOf("_"),I=B.substring(0,C+1);C=parseInt(B.substring(C+1),10)+1;var G=J.minusicon,F=J.plusicon,H=A("#"+B);H=H.length?H[0].nextSibling:null;var E=A("#"+B+" span.tree-wrap-"+this.p.direction),D=false;if(E.hasClass(G)){if(J.showSummaryOnHide&&J.groupSummary[0]){if(H){for(;H;){if(A(H).hasClass("jqfoot")){break}A(H).hide();H=H.nextSibling}}}else{if(H){for(;H;){if(A(H).attr("id")==I+String(C)){break}A(H).hide();H=H.nextSibling}}}E.removeClass(G).addClass(F);D=true}else{if(H){for(;H;){if(A(H).attr("id")==I+String(C)){break}A(H).show();H=H.nextSibling}}E.removeClass(F).addClass(G)}A.isFunction(this.p.onClickGroup)&&this.p.onClickGroup.call(this,B,D)});return false},groupingRender:function(B,C){return this.each(function(){var L=this,K=L.p.groupingView,I="",H="",J,G=K.groupCollapse?K.plusicon:K.minusicon,F,D,E;if(!K.groupDataSorted){K.sortitems[0].sort();K.sortnames[0].sort();if(K.groupOrder[0].toLowerCase()=="desc"){K.sortitems[0].reverse();K.sortnames[0].reverse()}}G+=" tree-wrap-"+L.p.direction;for(E=0;E<C;){if(L.p.colModel[E].name==K.groupField[0]){D=E;break}E++}A.each(K.sortitems[0],function(O,P){J=L.p.id+"ghead_"+O;H="<span style='cursor:pointer;' class='ui-icon "+G+"' onclick=\"jQuery('#"+L.p.id+"').jqGrid('groupingToggle','"+J+"');return false;\"></span>";try{F=L.formatter(J,K.sortnames[0][O],D,K.sortitems[0])}catch(S){F=K.sortnames[0][O]}I+='<tr id="'+J+'" role="row" class= "ui-widget-content jqgroup ui-row-'+L.p.direction+'"><td colspan="'+C+'">'+H+A.jgrid.format(K.groupText[0],F,B[P].length)+"</td></tr>";for(var R=0;R<B[P].length;R++){I+=B[P][R].join("")}if(K.groupSummary[0]){R="";if(K.groupCollapse&&!K.showSummaryOnHide){R=' style="display:none;"'}I+="<tr"+R+' role="row" class="ui-widget-content jqfoot ui-row-'+L.p.direction+'">';R=K.summaryval[0][P];for(var N=L.p.colModel,M,V=B[P].length,Q=0;Q<C;Q++){var U="<td "+L.formatCol(Q,1,"")+">&#160;</td>",T="{0}";A.each(R,function(){if(this.nm==N[Q].name){if(N[Q].summaryTpl){T=N[Q].summaryTpl}if(this.st=="avg"){if(this.v&&V>0){this.v/=V}}try{M=L.formatter("",this.v,Q,this)}catch(W){M=this.v}U="<td "+L.formatCol(Q,1,"")+">"+A.jgrid.format(T,M)+"</td>";return false}});I+=U}I+="</tr>"}});A("#"+L.p.id+" tbody:first").append(I);I=null})},groupingGroupBy:function(B,C){return this.each(function(){if(typeof B=="string"){B=[B]}var D=this.p.groupingView;this.p.grouping=true;if(typeof D.visibiltyOnNextGrouping=="undefined"){D.visibiltyOnNextGrouping=[]}var E;for(E=0;E<D.groupField.length;E++){!D.groupColumnShow[E]&&D.visibiltyOnNextGrouping[E]&&A(this).jqGrid("showCol",D.groupField[E])}for(E=0;E<B.length;E++){D.visibiltyOnNextGrouping[E]=A("#"+this.p.id+"_"+B[E]).is(":visible")}this.p.groupingView=A.extend(this.p.groupingView,C||{});D.groupField=B;A(this).trigger("reloadGrid")})},groupingRemove:function(B){return this.each(function(){if(typeof B=="undefined"){B=true}this.p.grouping=false;if(B===true){for(var D=this.p.groupingView,C=0;C<D.groupField.length;C++){!D.groupColumnShow[C]&&D.visibiltyOnNextGrouping[C]&&A(this).jqGrid("showCol",D.groupField)}A("tr.jqgroup, tr.jqfoot","#"+this.p.id+" tbody:first").remove();A("tr.jqgrow:hidden","#"+this.p.id+" tbody:first").show()}else{A(this).trigger("reloadGrid")}})},groupingCalculations:{sum:function(C,D,B){return parseFloat(C||0)+parseFloat(B[D]||0)},min:function(C,D,B){if(C===""){return parseFloat(B[D]||0)}return Math.min(parseFloat(C),parseFloat(B[D]||0))},max:function(C,D,B){if(C===""){return parseFloat(B[D]||0)}return Math.max(parseFloat(C),parseFloat(B[D]||0))},count:function(C,D,B){if(C===""){C=0}return B.hasOwnProperty(D)?C+1:0},avg:function(C,D,B){return parseFloat(C||0)+parseFloat(B[D]||0)}}})})(jQuery);(function(A){A.jgrid.extend({setTreeNode:function(B,C){return this.each(function(){var N=this;if(N.grid&&N.p.treeGrid){for(var M=N.p.expColInd,K=N.p.treeReader.expanded_field,J=N.p.treeReader.leaf_field,L=N.p.treeReader.level_field,F=N.p.treeReader.icon_field,I=N.p.treeReader.loaded,H,D,E,G;B<C;){G=N.p.data[N.p._index[N.rows[B].id]];if(N.p.treeGridModel=="nested"){if(!G[J]){H=parseInt(G[N.p.treeReader.left_field],10);D=parseInt(G[N.p.treeReader.right_field],10);G[J]=D===H+1?"true":"false";N.rows[B].cells[N.p._treeleafpos].innerHTML=G[J]}}H=parseInt(G[L],10);if(N.p.tree_root_level===0){E=H+1;D=H}else{E=H;D=H-1}E="<div class='tree-wrap tree-wrap-"+N.p.direction+"' style='width:"+E*18+"px;'>";E+="<div style='"+(N.p.direction=="rtl"?"right:":"left:")+D*18+"px;' class='ui-icon ";if(G[I]!==undefined){G[I]=G[I]=="true"||G[I]===true?true:false}if(G[J]=="true"||G[J]===true){E+=(G[F]!==undefined&&G[F]!==""?G[F]:N.p.treeIcons.leaf)+" tree-leaf treeclick";G[J]=true;D="leaf"}else{G[J]=false;D=""}G[K]=(G[K]=="true"||G[K]===true?true:false)&&G[I];E+=G[K]===false?G[J]===true?"'":N.p.treeIcons.plus+" tree-plus treeclick'":G[J]===true?"'":N.p.treeIcons.minus+" tree-minus treeclick'";E+="></div></div>";A(N.rows[B].cells[M]).wrapInner("<span class='cell-wrapper"+D+"'></span>").prepend(E);if(H!==parseInt(N.p.tree_root_level,10)){(G=(G=A(N).jqGrid("getNodeParent",G))&&G.hasOwnProperty(K)?G[K]:true)||A(N.rows[B]).css("display","none")}A(N.rows[B].cells[M]).find("div.treeclick").bind("click",function(O){O=A(O.target||O.srcElement,N.rows).closest("tr.jqgrow")[0].id;O=N.p._index[O];if(!N.p.data[O][J]){if(N.p.data[O][K]){A(N).jqGrid("collapseRow",N.p.data[O]);A(N).jqGrid("collapseNode",N.p.data[O])}else{A(N).jqGrid("expandRow",N.p.data[O]);A(N).jqGrid("expandNode",N.p.data[O])}}return false});N.p.ExpandColClick===true&&A(N.rows[B].cells[M]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(O){O=A(O.target||O.srcElement,N.rows).closest("tr.jqgrow")[0].id;var P=N.p._index[O];if(!N.p.data[P][J]){if(N.p.data[P][K]){A(N).jqGrid("collapseRow",N.p.data[P]);A(N).jqGrid("collapseNode",N.p.data[P])}else{A(N).jqGrid("expandRow",N.p.data[P]);A(N).jqGrid("expandNode",N.p.data[P])}}A(N).jqGrid("setSelection",O);return false});B++}}})},setTreeGrid:function(){return this.each(function(){var C=this,H=0,B=false,G,E,D=[];if(C.p.treeGrid){C.p.treedatatype||A.extend(C.p,{treedatatype:C.p.datatype});C.p.subGrid=false;C.p.altRows=false;C.p.pgbuttons=false;C.p.pginput=false;C.p.gridview=true;if(C.p.rowTotal===null){C.p.rowNum=10000}C.p.multiselect=false;C.p.rowList=[];C.p.expColInd=0;C.p.treeIcons=A.extend({plus:"ui-icon-triangle-1-"+(C.p.direction=="rtl"?"w":"e"),minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off"},C.p.treeIcons||{});if(C.p.treeGridModel=="nested"){C.p.treeReader=A.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},C.p.treeReader)}else{if(C.p.treeGridModel=="adjacency"){C.p.treeReader=A.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},C.p.treeReader)}}for(E in C.p.colModel){if(C.p.colModel.hasOwnProperty(E)){G=C.p.colModel[E].name;if(G==C.p.ExpandColumn&&!B){B=true;C.p.expColInd=H}H++;for(var F in C.p.treeReader){C.p.treeReader[F]==G&&D.push(G)}}}A.each(C.p.treeReader,function(I,J){if(J&&A.inArray(J,D)===-1){if(I==="leaf_field"){C.p._treeleafpos=H}H++;C.p.colNames.push(J);C.p.colModel.push({name:J,width:1,hidden:true,sortable:false,resizable:false,hidedlg:true,editable:true,search:false})}})}})},expandRow:function(B){this.each(function(){var E=this;if(E.grid&&E.p.treeGrid){var C=A(E).jqGrid("getNodeChildren",B),D=E.p.treeReader.expanded_field;A(C).each(function(){var F=A.jgrid.getAccessor(this,E.p.localReader.id);A("#"+F,E.grid.bDiv).css("display","");this[D]&&A(E).jqGrid("expandRow",this)})}})},collapseRow:function(B){this.each(function(){var E=this;if(E.grid&&E.p.treeGrid){var C=A(E).jqGrid("getNodeChildren",B),D=E.p.treeReader.expanded_field;A(C).each(function(){var F=A.jgrid.getAccessor(this,E.p.localReader.id);A("#"+F,E.grid.bDiv).css("display","none");this[D]&&A(E).jqGrid("collapseRow",this)})}})},getRootNodes:function(){var B=[];this.each(function(){var E=this;if(E.grid&&E.p.treeGrid){switch(E.p.treeGridModel){case"nested":var C=E.p.treeReader.level_field;A(E.p.data).each(function(){parseInt(this[C],10)===parseInt(E.p.tree_root_level,10)&&B.push(this)});break;case"adjacency":var D=E.p.treeReader.parent_id_field;A(E.p.data).each(function(){if(this[D]===null||String(this[D]).toLowerCase()=="null"){B.push(this)}})}}});return B},getNodeDepth:function(B){var C=null;this.each(function(){if(this.grid&&this.p.treeGrid){switch(this.p.treeGridModel){case"nested":C=parseInt(B[this.p.treeReader.level_field],10)-parseInt(this.p.tree_root_level,10);break;case"adjacency":C=A(this).jqGrid("getNodeAncestors",B).length}}});return C},getNodeParent:function(B){var C=null;this.each(function(){if(this.grid&&this.p.treeGrid){switch(this.p.treeGridModel){case"nested":var D=this.p.treeReader.left_field,K=this.p.treeReader.right_field,I=this.p.treeReader.level_field,H=parseInt(B[D],10),J=parseInt(B[K],10),E=parseInt(B[I],10);A(this.p.data).each(function(){if(parseInt(this[I],10)===E-1&&parseInt(this[D],10)<H&&parseInt(this[K],10)>J){C=this;return false}});break;case"adjacency":var G=this.p.treeReader.parent_id_field,F=this.p.localReader.id;A(this.p.data).each(function(){if(this[F]==B[G]){C=this;return false}})}}});return C},getNodeChildren:function(B){var C=[];this.each(function(){if(this.grid&&this.p.treeGrid){switch(this.p.treeGridModel){case"nested":var D=this.p.treeReader.left_field,K=this.p.treeReader.right_field,I=this.p.treeReader.level_field,H=parseInt(B[D],10),J=parseInt(B[K],10),E=parseInt(B[I],10);A(this.p.data).each(function(){parseInt(this[I],10)===E+1&&parseInt(this[D],10)>H&&parseInt(this[K],10)<J&&C.push(this)});break;case"adjacency":var G=this.p.treeReader.parent_id_field,F=this.p.localReader.id;A(this.p.data).each(function(){this[G]==B[F]&&C.push(this)})}}});return C},getFullTreeNode:function(B){var C=[];this.each(function(){var L;if(this.grid&&this.p.treeGrid){switch(this.p.treeGridModel){case"nested":var K=this.p.treeReader.left_field,I=this.p.treeReader.right_field,H=this.p.treeReader.level_field,J=parseInt(B[K],10),E=parseInt(B[I],10),G=parseInt(B[H],10);A(this.p.data).each(function(){parseInt(this[H],10)>=G&&parseInt(this[K],10)>=J&&parseInt(this[K],10)<=E&&C.push(this)});break;case"adjacency":if(B){C.push(B);var F=this.p.treeReader.parent_id_field,D=this.p.localReader.id;A(this.p.data).each(function(M){L=C.length;for(M=0;M<L;M++){if(C[M][D]==this[F]){C.push(this);break}}})}}}});return C},getNodeAncestors:function(B){var C=[];this.each(function(){if(this.grid&&this.p.treeGrid){for(var D=A(this).jqGrid("getNodeParent",B);D;){C.push(D);D=A(this).jqGrid("getNodeParent",D)}}});return C},isVisibleNode:function(B){var C=true;this.each(function(){if(this.grid&&this.p.treeGrid){var D=A(this).jqGrid("getNodeAncestors",B),E=this.p.treeReader.expanded_field;A(D).each(function(){C=C&&this[E];if(!C){return false}})}});return C},isNodeLoaded:function(B){var C;this.each(function(){if(this.grid&&this.p.treeGrid){var D=this.p.treeReader.leaf_field;C=B!==undefined?B.loaded!==undefined?B.loaded:B[D]||A(this).jqGrid("getNodeChildren",B).length>0?true:false:false}});return C},expandNode:function(B){return this.each(function(){if(this.grid&&this.p.treeGrid){var J=this.p.treeReader.expanded_field,K=this.p.treeReader.parent_id_field,I=this.p.treeReader.loaded,G=this.p.treeReader.level_field,F=this.p.treeReader.left_field,H=this.p.treeReader.right_field;if(!B[J]){var C=A.jgrid.getAccessor(B,this.p.localReader.id),E=A("#"+C,this.grid.bDiv)[0],D=this.p._index[C];if(A(this).jqGrid("isNodeLoaded",this.p.data[D])){B[J]=true;A("div.treeclick",E).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")}else{B[J]=true;A("div.treeclick",E).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus");this.p.treeANode=E.rowIndex;this.p.datatype=this.p.treedatatype;this.p.treeGridModel=="nested"?A(this).jqGrid("setGridParam",{postData:{nodeid:C,n_left:B[F],n_right:B[H],n_level:B[G]}}):A(this).jqGrid("setGridParam",{postData:{nodeid:C,parentid:B[K],n_level:B[G]}});A(this).trigger("reloadGrid");B[I]=true;this.p.treeGridModel=="nested"?A(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):A(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}})}}}})},collapseNode:function(B){return this.each(function(){if(this.grid&&this.p.treeGrid){if(B.expanded){B.expanded=false;var C=A.jgrid.getAccessor(B,this.p.localReader.id);C=A("#"+C,this.grid.bDiv)[0];A("div.treeclick",C).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus")}}})},SortTree:function(C,E,B,D){return this.each(function(){if(this.grid&&this.p.treeGrid){var J,I,K,F=[],H=this,G;J=A(this).jqGrid("getRootNodes");J=A.jgrid.from(J);J.orderBy(C,E,B,D);G=J.select();J=0;for(I=G.length;J<I;J++){K=G[J];F.push(K);A(this).jqGrid("collectChildrenSortTree",F,K,C,E,B,D)}A.each(F,function(L){var M=A.jgrid.getAccessor(this,H.p.localReader.id);A("#"+H.p.id+" tbody tr:eq("+L+")").after(A("tr#"+M,H.grid.bDiv))});F=G=J=null}})},collectChildrenSortTree:function(C,G,B,F,E,D){return this.each(function(){if(this.grid&&this.p.treeGrid){var K,H,J,I;K=A(this).jqGrid("getNodeChildren",G);K=A.jgrid.from(K);K.orderBy(B,F,E,D);I=K.select();K=0;for(H=I.length;K<H;K++){J=I[K];C.push(J);A(this).jqGrid("collectChildrenSortTree",C,J,B,F,E,D)}}})},setTreeRow:function(C,D){var B=false;this.each(function(){if(this.grid&&this.p.treeGrid){B=A(this).jqGrid("setRowData",C,D)}});return B},delTreeNode:function(B){return this.each(function(){var J=this.p.localReader.id,C=this.p.treeReader.left_field,I=this.p.treeReader.right_field,G,F,H;if(this.grid&&this.p.treeGrid){var D=this.p._index[B];if(D!==undefined){G=parseInt(this.p.data[D][I],10);F=G-parseInt(this.p.data[D][C],10)+1;D=A(this).jqGrid("getFullTreeNode",this.p.data[D]);if(D.length>0){for(var E=0;E<D.length;E++){A(this).jqGrid("delRowData",D[E][J])}}if(this.p.treeGridModel==="nested"){J=A.jgrid.from(this.p.data).greater(C,G,{stype:"integer"}).select();if(J.length){for(H in J){J[H][C]=parseInt(J[H][C],10)-F}}J=A.jgrid.from(this.p.data).greater(I,G,{stype:"integer"}).select();if(J.length){for(H in J){J[H][I]=parseInt(J[H][I],10)-F}}}}}})},addChildNode:function(U,S,T){var R=this[0];if(T){var P=R.p.treeReader.expanded_field,O=R.p.treeReader.leaf_field,Q=R.p.treeReader.level_field,K=R.p.treeReader.parent_id_field,N=R.p.treeReader.left_field,M=R.p.treeReader.right_field,H=R.p.treeReader.loaded,I,L,J,E,G;I=0;var D=S,C;if(!U){G=R.p.data.length-1;if(G>=0){for(;G>=0;){I=Math.max(I,parseInt(R.p.data[G][R.p.localReader.id],10));G--}}U=I+1}var B=A(R).jqGrid("getInd",S);C=false;if(S===undefined||S===null||S===""){D=S=null;I="last";E=R.p.tree_root_level;G=R.p.data.length+1}else{I="after";L=R.p._index[S];J=R.p.data[L];S=J[R.p.localReader.id];E=parseInt(J[Q],10)+1;G=A(R).jqGrid("getFullTreeNode",J);if(G.length){D=G=G[G.length-1][R.p.localReader.id];G=A(R).jqGrid("getInd",D)+1}else{G=A(R).jqGrid("getInd",S)+1}if(J[O]){C=true;J[P]=true;A(R.rows[B]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(R.p.treeIcons.leaf+" tree-leaf").addClass(R.p.treeIcons.minus+" tree-minus");R.p.data[L][O]=false;J[H]=true}}L=G+1;T[P]=false;T[H]=true;T[Q]=E;T[O]=true;if(R.p.treeGridModel==="adjacency"){T[K]=S}if(R.p.treeGridModel==="nested"){var F;if(S!==null){O=parseInt(J[M],10);Q=A.jgrid.from(R.p.data);Q=Q.greaterOrEquals(M,O,{stype:"integer"});Q=Q.select();if(Q.length){for(F in Q){Q[F][N]=Q[F][N]>O?parseInt(Q[F][N],10)+2:Q[F][N];Q[F][M]=Q[F][M]>=O?parseInt(Q[F][M],10)+2:Q[F][M]}}T[N]=O;T[M]=O+1}else{O=parseInt(A(R).jqGrid("getCol",M,false,"max"),10);Q=A.jgrid.from(R.p.data).greater(N,O,{stype:"integer"}).select();if(Q.length){for(F in Q){Q[F][N]=parseInt(Q[F][N],10)+2}}Q=A.jgrid.from(R.p.data).greater(M,O,{stype:"integer"}).select();if(Q.length){for(F in Q){Q[F][M]=parseInt(Q[F][M],10)+2}}T[N]=O+1;T[M]=O+2}}if(S===null||A(R).jqGrid("isNodeLoaded",J)||C){A(R).jqGrid("addRowData",U,T,I,D);A(R).jqGrid("setTreeNode",G,L)}J&&!J[P]&&A(R.rows[B]).find("div.treeclick").click()}}})})(jQuery);(function(A){A.jgrid.extend({jqGridImport:function(B){B=A.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},B||{});return this.each(function(){var E=this,F=function(K,J){var L=A(J.xmlGrid.config,K)[0],I=A(J.xmlGrid.data,K)[0],H;if(xmlJsonClass.xml2json&&A.jgrid.parse){L=xmlJsonClass.xml2json(L," ");L=A.jgrid.parse(L);for(var G in L){if(L.hasOwnProperty(G)){H=L[G]}}if(I){I=L.grid.datatype;L.grid.datatype="xmlstring";L.grid.datastr=K;A(E).jqGrid(H).jqGrid("setGridParam",{datatype:I})}else{A(E).jqGrid(H)}}else{alert("xml2json or parse are not present")}},D=function(J,I){if(J&&typeof J=="string"){var K=A.jgrid.parse(J),H=K[I.jsonGrid.config];if(K=K[I.jsonGrid.data]){var G=H.datatype;H.datatype="jsonstring";H.datastr=K;A(E).jqGrid(H).jqGrid("setGridParam",{datatype:G})}else{A(E).jqGrid(H)}}};switch(B.imptype){case"xml":A.ajax(A.extend({url:B.impurl,type:B.mtype,data:B.impData,dataType:"xml",complete:function(H,G){if(G=="success"){F(H.responseXML,B);A.isFunction(B.importComplete)&&B.importComplete(H)}}},B.ajaxOptions));break;case"xmlstring":if(B.impstring&&typeof B.impstring=="string"){var C=A.jgrid.stringToDoc(B.impstring);if(C){F(C,B);A.isFunction(B.importComplete)&&B.importComplete(C);B.impstring=null}C=null}break;case"json":A.ajax(A.extend({url:B.impurl,type:B.mtype,data:B.impData,dataType:"json",complete:function(H,G){if(G=="success"){D(H.responseText,B);A.isFunction(B.importComplete)&&B.importComplete(H)}}},B.ajaxOptions));break;case"jsonstring":if(B.impstring&&typeof B.impstring=="string"){D(B.impstring,B);A.isFunction(B.importComplete)&&B.importComplete(B.impstring);B.impstring=null}}})},jqGridExport:function(B){B=A.extend({exptype:"xmlstring",root:"grid",ident:"\t"},B||{});var C=null;this.each(function(){if(this.grid){var E=A.extend({},A(this).jqGrid("getGridParam"));if(E.rownumbers){E.colNames.splice(0,1);E.colModel.splice(0,1)}if(E.multiselect){E.colNames.splice(0,1);E.colModel.splice(0,1)}if(E.subGrid){E.colNames.splice(0,1);E.colModel.splice(0,1)}E.knv=null;if(E.treeGrid){for(var D in E.treeReader){if(E.treeReader.hasOwnProperty(D)){E.colNames.splice(E.colNames.length-1);E.colModel.splice(E.colModel.length-1)}}}switch(B.exptype){case"xmlstring":C="<"+B.root+">"+xmlJsonClass.json2xml(E,B.ident)+"</"+B.root+">";break;case"jsonstring":C="{"+xmlJsonClass.toJson(E,B.root,B.ident,false)+"}";if(E.postData.filters!==undefined){C=C.replace(/filters":"/,'filters":');C=C.replace(/}]}"/,"}]}")}}}});return C},excelExport:function(B){B=A.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},B||{});return this.each(function(){if(this.grid){var C;if(B.exptype=="remote"){C=A.extend({},this.p.postData);C[B.oper]=B.tag;C=jQuery.param(C);C=B.url.indexOf("?")!=-1?B.url+"&"+C:B.url+"?"+C;window.location=C}}})}})})(jQuery);var xmlJsonClass={xml2json:function(B,A){if(B.nodeType===9){B=B.documentElement}var C=this.toJson(this.toObj(this.removeWhite(B)),B.nodeName,"\t");return"{\n"+A+(A?C.replace(/\t/g,A):C.replace(/\t|\n/g,""))+"\n}"},json2xml:function(B,A){var C=function(K,L,I){var J="",G,H;if(K instanceof Array){if(K.length===0){J+=I+"<"+L+">__EMPTY_ARRAY_</"+L+">\n"}else{G=0;for(H=K.length;G<H;G+=1){var F=I+C(K[G],L,I+"\t")+"\n";J+=F}}}else{if(typeof K==="object"){G=false;J+=I+"<"+L;for(H in K){if(K.hasOwnProperty(H)){if(H.charAt(0)==="@"){J+=" "+H.substr(1)+'="'+K[H].toString()+'"'}else{G=true}}}J+=G?">":"/>";if(G){for(H in K){if(K.hasOwnProperty(H)){if(H==="#text"){J+=K[H]}else{if(H==="#cdata"){J+="<![CDATA["+K[H]+"]]>"}else{if(H.charAt(0)!=="@"){J+=C(K[H],H,I+"\t")}}}}}J+=(J.charAt(J.length-1)==="\n"?I:"")+"</"+L+">"}}else{if(typeof K==="function"){J+=I+"<"+L+"><![CDATA["+K+"]]></"+L+">"}else{if(K===undefined){K=""}J+=K.toString()==='""'||K.toString().length===0?I+"<"+L+">__EMPTY_STRING_</"+L+">":I+"<"+L+">"+K.toString()+"</"+L+">"}}}return J},E="",D;for(D in B){if(B.hasOwnProperty(D)){E+=C(B[D],D,"")}}return A?E.replace(/\t/g,A):E.replace(/\t|\n/g,"")},toObj:function(B){var A={},C=/function/i;if(B.nodeType===1){if(B.attributes.length){var E;for(E=0;E<B.attributes.length;E+=1){A["@"+B.attributes[E].nodeName]=(B.attributes[E].nodeValue||"").toString()}}if(B.firstChild){var D=E=0,F=false,G;for(G=B.firstChild;G;G=G.nextSibling){if(G.nodeType===1){F=true}else{if(G.nodeType===3&&G.nodeValue.match(/[^ \f\n\r\t\v]/)){E+=1}else{if(G.nodeType===4){D+=1}}}}if(F){if(E<2&&D<2){this.removeWhite(B);for(G=B.firstChild;G;G=G.nextSibling){if(G.nodeType===3){A["#text"]=this.escape(G.nodeValue)}else{if(G.nodeType===4){if(C.test(G.nodeValue)){A[G.nodeName]=[A[G.nodeName],G.nodeValue]}else{A["#cdata"]=this.escape(G.nodeValue)}}else{if(A[G.nodeName]){if(A[G.nodeName] instanceof Array){A[G.nodeName][A[G.nodeName].length]=this.toObj(G)}else{A[G.nodeName]=[A[G.nodeName],this.toObj(G)]}}else{A[G.nodeName]=this.toObj(G)}}}}}else{if(B.attributes.length){A["#text"]=this.escape(this.innerXml(B))}else{A=this.escape(this.innerXml(B))}}}else{if(E){if(B.attributes.length){A["#text"]=this.escape(this.innerXml(B))}else{A=this.escape(this.innerXml(B));if(A==="__EMPTY_ARRAY_"){A="[]"}else{if(A==="__EMPTY_STRING_"){A=""}}}}else{if(D){if(D>1){A=this.escape(this.innerXml(B))}else{for(G=B.firstChild;G;G=G.nextSibling){if(C.test(B.firstChild.nodeValue)){A=B.firstChild.nodeValue;break}else{A["#cdata"]=this.escape(G.nodeValue)}}}}}}}if(!B.attributes.length&&!B.firstChild){A=null}}else{if(B.nodeType===9){A=this.toObj(B.documentElement)}else{alert("unhandled node type: "+B.nodeType)}}return A},toJson:function(J,I,C,F){if(F===undefined){F=true}var E=I?'"'+I+'"':"",G="\t",H="\n";if(!F){H=G=""}if(J==="[]"){E+=I?":[]":"[]"}else{if(J instanceof Array){var B,D,A=[];D=0;for(B=J.length;D<B;D+=1){A[D]=this.toJson(J[D],"",C+G,F)}E+=(I?":[":"[")+(A.length>1?H+C+G+A.join(","+H+C+G)+H+C:A.join(""))+"]"}else{if(J===null){E+=(I&&":")+"null"}else{if(typeof J==="object"){B=[];for(D in J){if(J.hasOwnProperty(D)){B[B.length]=this.toJson(J[D],D,C+G,F)}}E+=(I?":{":"{")+(B.length>1?H+C+G+B.join(","+H+C+G)+H+C:B.join(""))+"}"}else{E+=typeof J==="string"?(I&&":")+'"'+J.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"':(I&&":")+'"'+J.toString()+'"'}}}}return E},innerXml:function(B){var A="";if("innerHTML" in B){A=B.innerHTML}else{var C=function(E){var D="",F;if(E.nodeType===1){D+="<"+E.nodeName;for(F=0;F<E.attributes.length;F+=1){D+=" "+E.attributes[F].nodeName+'="'+(E.attributes[F].nodeValue||"").toString()+'"'}if(E.firstChild){D+=">";for(F=E.firstChild;F;F=F.nextSibling){D+=C(F)}D+="</"+E.nodeName+">"}else{D+="/>"}}else{if(E.nodeType===3){D+=E.nodeValue}else{if(E.nodeType===4){D+="<![CDATA["+E.nodeValue+"]]>"}}}return D};for(B=B.firstChild;B;B=B.nextSibling){A+=C(B)}}return A},escape:function(A){return A.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(B){B.normalize();var A;for(A=B.firstChild;A;){if(A.nodeType===3){if(A.nodeValue.match(/[^ \f\n\r\t\v]/)){A=A.nextSibling}else{var C=A.nextSibling;B.removeChild(A);A=C}}else{A.nodeType===1&&this.removeWhite(A);A=A.nextSibling}}return B}};function tableToGrid(B,A){jQuery(B).each(function(){if(!this.grid){jQuery(this).width("99%");var K=jQuery(this).width(),H=jQuery("tr td:first-child input[type=checkbox]:first",jQuery(this)),J=jQuery("tr td:first-child input[type=radio]:first",jQuery(this));H=H.length>0;J=!H&&J.length>0;var C=H||J,I=[],F=[];jQuery("th",jQuery(this)).each(function(){if(I.length===0&&C){I.push({name:"__selection__",index:"__selection__",width:0,hidden:true});F.push("__selection__")}else{I.push({name:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),index:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),width:jQuery(this).width()||150});F.push(jQuery(this).html())}});var G=[],E=[],D=[];jQuery("tbody > tr",jQuery(this)).each(function(){var L={},M=0;jQuery("td",jQuery(this)).each(function(){if(M===0&&C){var O=jQuery("input",jQuery(this)),N=O.attr("value");E.push(N||G.length);O.is(":checked")&&D.push(N);L[I[M].name]=O.attr("value")}else{L[I[M].name]=jQuery(this).html()}M++});M>0&&G.push(L)});jQuery(this).empty();jQuery(this).addClass("scroll");jQuery(this).jqGrid(jQuery.extend({datatype:"local",width:K,colNames:F,colModel:I,multiselect:H},A||{}));for(K=0;K<G.length;K++){J=null;if(E.length>0){if((J=E[K])&&J.replace){J=encodeURIComponent(J).replace(/[.\-%]/g,"_")}}if(J===null){J=K+1}jQuery(this).jqGrid("addRowData",J,G[K])}for(K=0;K<D.length;K++){jQuery(this).jqGrid("setSelection",D[K])}}})}(function(a){if(a.browser.msie&&a.browser.version==8){a.expr[":"].hidden=function(b){return b.offsetWidth===0||b.offsetHeight===0||b.style.display=="none"}}a.jgrid._multiselect=false;if(a.ui){if(a.ui.multiselect){if(a.ui.multiselect.prototype._setSelected){var q=a.ui.multiselect.prototype._setSelected;a.ui.multiselect.prototype._setSelected=function(b,g){var c=q.call(this,b,g);if(g&&this.selectedList){var f=this.element;this.selectedList.find("li").each(function(){a(this).data("optionLink")&&a(this).data("optionLink").remove().appendTo(f)})}return c}}if(a.ui.multiselect.prototype.destroy){a.ui.multiselect.prototype.destroy=function(){this.element.show();this.container.remove();a.Widget===undefined?a.widget.prototype.destroy.apply(this,arguments):a.Widget.prototype.destroy.apply(this,arguments)}}a.jgrid._multiselect=true}}a.jgrid.extend({sortableColumns:function(b){return this.each(function(){function g(){c.p.disableClick=true}var c=this,f=c.p.id;f={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+f+"_cb,#jqgh_"+f+"_rn,#jqgh_"+f+"_subgrid),:hidden)",placeholder:{element:function(h){return a(document.createElement(h[0].nodeName)).addClass(h[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0]},update:function(h,j){j.height(h.currentItem.innerHeight()-parseInt(h.currentItem.css("paddingTop")||0,10)-parseInt(h.currentItem.css("paddingBottom")||0,10));j.width(h.currentItem.innerWidth()-parseInt(h.currentItem.css("paddingLeft")||0,10)-parseInt(h.currentItem.css("paddingRight")||0,10))}},update:function(h,j){var i=a(j.item).parent();i=a(">th",i);var l={},m=c.p.id+"_";a.each(c.p.colModel,function(k){l[this.name]=k});var d=[];i.each(function(){var k=a(">div",this).get(0).id.replace(/^jqgh_/,"").replace(m,"");k in l&&d.push(l[k])});a(c).jqGrid("remapColumns",d,true,true);a.isFunction(c.p.sortable.update)&&c.p.sortable.update(d);setTimeout(function(){c.p.disableClick=false},50)}};if(c.p.sortable.options){a.extend(f,c.p.sortable.options)}else{if(a.isFunction(c.p.sortable)){c.p.sortable={update:c.p.sortable}}}if(f.start){var e=f.start;f.start=function(h,j){g();e.call(this,h,j)}}else{f.start=g}if(c.p.sortable.exclude){f.items+=":not("+c.p.sortable.exclude+")"}b.sortable(f).data("sortable").floating=true})},columnChooser:function(b){function g(d,k){if(d){if(typeof d=="string"){a.fn[d]&&a.fn[d].apply(k,a.makeArray(arguments).slice(2))}else{a.isFunction(d)&&d.apply(k,a.makeArray(arguments).slice(2))}}}var c=this;if(!a("#colchooser_"+c[0].p.id).length){var f=a('<div id="colchooser_'+c[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),e=a("select",f);b=a.extend({width:420,height:240,classname:null,done:function(d){d&&c.jqGrid("remapColumns",d,true)},msel:"multiselect",dlog:"dialog",dlog_opts:function(d){var k={};k[d.bSubmit]=function(){d.apply_perm();d.cleanup(false)};k[d.bCancel]=function(){d.cleanup(true)};return{buttons:k,close:function(){d.cleanup(true)},modal:d.modal?d.modal:false,resizable:d.resizable?d.resizable:true,width:d.width+20}},apply_perm:function(){a("option",e).each(function(){this.selected?c.jqGrid("showCol",h[this.value].name):c.jqGrid("hideCol",h[this.value].name)});var d=[];a("option:selected",e).each(function(){d.push(parseInt(this.value,10))});a.each(d,function(){delete i[h[parseInt(this,10)].name]});a.each(i,function(){var k=parseInt(this,10);var p=d,o=k;if(o>=0){var n=p.slice(),r=n.splice(o,Math.max(p.length-o,o));if(o>p.length){o=p.length}n[o]=k;d=n.concat(r)}else{d=void 0}});b.done&&b.done.call(c,d)},cleanup:function(d){g(b.dlog,f,"destroy");g(b.msel,e,"destroy");f.remove();d&&b.done&&b.done.call(c)},msel_opts:{}},a.jgrid.col,b||{});if(a.ui){if(a.ui.multiselect){if(b.msel=="multiselect"){if(!a.jgrid._multiselect){alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");return }b.msel_opts=a.extend(a.ui.multiselect.defaults,b.msel_opts)}}}b.caption&&f.attr("title",b.caption);if(b.classname){f.addClass(b.classname);e.addClass(b.classname)}if(b.width){a(">div",f).css({width:b.width,margin:"0 auto"});e.css("width",b.width)}if(b.height){a(">div",f).css("height",b.height);e.css("height",b.height-10)}var h=c.jqGrid("getGridParam","colModel"),j=c.jqGrid("getGridParam","colNames"),i={},l=[];e.empty();a.each(h,function(d){i[this.name]=d;if(this.hidedlg){this.hidden||l.push(d)}else{e.append("<option value='"+d+"' "+(this.hidden?"":"selected='selected'")+">"+j[d]+"</option>")}});var m=a.isFunction(b.dlog_opts)?b.dlog_opts.call(c,b):b.dlog_opts;g(b.dlog,f,m);m=a.isFunction(b.msel_opts)?b.msel_opts.call(c,b):b.msel_opts;g(b.msel,e,m)}},sortableRows:function(b){return this.each(function(){var g=this;if(g.grid){if(!g.p.treeGrid){if(a.fn.sortable){b=a.extend({cursor:"move",axis:"y",items:".jqgrow"},b||{});if(b.start&&a.isFunction(b.start)){b._start_=b.start;delete b.start}else{b._start_=false}if(b.update&&a.isFunction(b.update)){b._update_=b.update;delete b.update}else{b._update_=false}b.start=function(c,f){a(f.item).css("border-width","0px");a("td",f.item).each(function(j){this.style.width=g.grid.cols[j].style.width});if(g.p.subGrid){var e=a(f.item).attr("id");try{a(g).jqGrid("collapseSubGridRow",e)}catch(h){}}b._start_&&b._start_.apply(this,[c,f])};b.update=function(c,f){a(f.item).css("border-width","");g.p.rownumbers===true&&a("td.jqgrid-rownum",g.rows).each(function(e){a(this).html(e+1+(parseInt(g.p.page,10)-1)*parseInt(g.p.rowNum,10))});b._update_&&b._update_.apply(this,[c,f])};a("tbody:first",g).sortable(b);a("tbody:first",g).disableSelection()}}}})},gridDnD:function(b){return this.each(function(){function g(){var e=a.data(c,"dnd");a("tr.jqgrow:not(.ui-draggable)",c).draggable(a.isFunction(e.drag)?e.drag.call(a(c),e):e.drag)}var c=this;if(c.grid){if(!c.p.treeGrid){if(a.fn.draggable&&a.fn.droppable){a("#jqgrid_dnd").html()===null&&a("body").append("<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>");if(typeof b=="string"&&b=="updateDnD"&&c.p.jqgdnd===true){g()}else{b=a.extend({drag:function(e){return a.extend({start:function(h,j){if(c.p.subGrid){var i=a(j.helper).attr("id");try{a(c).jqGrid("collapseSubGridRow",i)}catch(l){}}for(i=0;i<a.data(c,"dnd").connectWith.length;i++){a(a.data(c,"dnd").connectWith[i]).jqGrid("getGridParam","reccount")=="0"&&a(a.data(c,"dnd").connectWith[i]).jqGrid("addRowData","jqg_empty_row",{})}j.helper.addClass("ui-state-highlight");a("td",j.helper).each(function(m){this.style.width=c.grid.headers[m].width+"px"});e.onstart&&a.isFunction(e.onstart)&&e.onstart.call(a(c),h,j)},stop:function(h,j){if(j.helper.dropped&&!e.dragcopy){var i=a(j.helper).attr("id");a(c).jqGrid("delRowData",i)}for(i=0;i<a.data(c,"dnd").connectWith.length;i++){a(a.data(c,"dnd").connectWith[i]).jqGrid("delRowData","jqg_empty_row")}e.onstop&&a.isFunction(e.onstop)&&e.onstop.call(a(c),h,j)}},e.drag_opts||{})},drop:function(e){return a.extend({accept:function(h){if(!a(h).hasClass("jqgrow")){return h}var j=a(h).closest("table.ui-jqgrid-btable");if(j.length>0&&a.data(j[0],"dnd")!==undefined){h=a.data(j[0],"dnd").connectWith;return a.inArray("#"+this.id,h)!=-1?true:false}return h},drop:function(h,j){if(a(j.draggable).hasClass("jqgrow")){var i=a(j.draggable).attr("id");i=j.draggable.parent().parent().jqGrid("getRowData",i);if(!e.dropbyname){var l=0,m={},d,k=a("#"+this.id).jqGrid("getGridParam","colModel");try{for(var p in i){if(i.hasOwnProperty(p)&&k[l]){d=k[l].name;m[d]=i[p]}l++}i=m}catch(o){}}j.helper.dropped=true;if(e.beforedrop&&a.isFunction(e.beforedrop)){d=e.beforedrop.call(this,h,j,i,a("#"+c.id),a(this));if(typeof d!="undefined"&&d!==null&&typeof d=="object"){i=d}}if(j.helper.dropped){var n;if(e.autoid){if(a.isFunction(e.autoid)){n=e.autoid.call(this,i)}else{n=Math.ceil(Math.random()*1000);n=e.autoidprefix+n}}a("#"+this.id).jqGrid("addRowData",n,i,e.droppos)}e.ondrop&&a.isFunction(e.ondrop)&&e.ondrop.call(this,h,j,i)}}},e.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5000},dragcopy:false,dropbyname:false,droppos:"first",autoid:true,autoidprefix:"dnd_"},b||{});if(b.connectWith){b.connectWith=b.connectWith.split(",");b.connectWith=a.map(b.connectWith,function(e){return a.trim(e)});a.data(c,"dnd",b);c.p.reccount!="0"&&!c.p.jqgdnd&&g();c.p.jqgdnd=true;for(var f=0;f<b.connectWith.length;f++){a(b.connectWith[f]).droppable(a.isFunction(b.drop)?b.drop.call(a(c),b):b.drop)}}}}}}})},gridResize:function(b){return this.each(function(){var g=this;if(g.grid&&a.fn.resizable){b=a.extend({},b||{});if(b.alsoResize){b._alsoResize_=b.alsoResize;delete b.alsoResize}else{b._alsoResize_=false}if(b.stop&&a.isFunction(b.stop)){b._stop_=b.stop;delete b.stop}else{b._stop_=false}b.stop=function(c,f){a(g).jqGrid("setGridParam",{height:a("#gview_"+g.p.id+" .ui-jqgrid-bdiv").height()});a(g).jqGrid("setGridWidth",f.size.width,b.shrinkToFit);b._stop_&&b._stop_.call(g,c,f)};b.alsoResize=b._alsoResize_?eval("("+("{'#gview_"+g.p.id+" .ui-jqgrid-bdiv':true,'"+b._alsoResize_+"':true}")+")"):a(".ui-jqgrid-bdiv","#gview_"+g.p.id);delete b._alsoResize_;a("#gbox_"+g.p.id).resizable(b)}})}})})(jQuery);
/*
 * jQuery UI 1.8.6
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function(C,B){function A(D){return !C(D).parents().andSelf().filter(function(){return C.curCSS(this,"visibility")==="hidden"||C.expr.filters.hidden(this)}).length}C.ui=C.ui||{};if(!C.ui.version){C.extend(C.ui,{version:"1.8.6",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});C.fn.extend({_focus:C.fn.focus,focus:function(E,D){return typeof E==="number"?this.each(function(){var F=this;setTimeout(function(){C(F).focus();D&&D.call(F)},E)}):this._focus.apply(this,arguments)},scrollParent:function(){var D;D=C.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(C.curCSS(this,"position",1))&&/(auto|scroll)/.test(C.curCSS(this,"overflow",1)+C.curCSS(this,"overflow-y",1)+C.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(C.curCSS(this,"overflow",1)+C.curCSS(this,"overflow-y",1)+C.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!D.length?C(document):D},zIndex:function(E){if(E!==B){return this.css("zIndex",E)}if(this.length){E=C(this[0]);for(var D;E.length&&E[0]!==document;){D=E.css("position");if(D==="absolute"||D==="relative"||D==="fixed"){D=parseInt(E.css("zIndex"),10);if(!isNaN(D)&&D!==0){return D}}E=E.parent()}}return 0},disableSelection:function(){return this.bind((C.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(D){D.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});C.each(["Width","Height"],function(E,D){function I(M,L,K,J){C.each(H,function(){L-=parseFloat(C.curCSS(M,"padding"+this,true))||0;if(K){L-=parseFloat(C.curCSS(M,"border"+this+"Width",true))||0}if(J){L-=parseFloat(C.curCSS(M,"margin"+this,true))||0}});return L}var H=D==="Width"?["Left","Right"]:["Top","Bottom"],G=D.toLowerCase(),F={innerWidth:C.fn.innerWidth,innerHeight:C.fn.innerHeight,outerWidth:C.fn.outerWidth,outerHeight:C.fn.outerHeight};C.fn["inner"+D]=function(J){if(J===B){return F["inner"+D].call(this)}return this.each(function(){C(this).css(G,I(this,J)+"px")})};C.fn["outer"+D]=function(K,J){if(typeof K!=="number"){return F["outer"+D].call(this,K)}return this.each(function(){C(this).css(G,I(this,K,true,J)+"px")})}});C.extend(C.expr[":"],{data:function(E,D,F){return !!C.data(E,F[3])},focusable:function(E){var D=E.nodeName.toLowerCase(),F=C.attr(E,"tabindex");if("area"===D){D=E.parentNode;F=D.name;if(!E.href||!F||D.nodeName.toLowerCase()!=="map"){return false}E=C("img[usemap=#"+F+"]")[0];return !!E&&A(E)}return(/input|select|textarea|button|object/.test(D)?!E.disabled:"a"==D?E.href||!isNaN(F):!isNaN(F))&&A(E)},tabbable:function(E){var D=C.attr(E,"tabindex");return(isNaN(D)||D>=0)&&C(E).is(":focusable")}});C(function(){var E=document.body,D=E.appendChild(D=document.createElement("div"));C.extend(D.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});C.support.minHeight=D.offsetHeight===100;C.support.selectstart="onselectstart" in D;E.removeChild(D).style.display="none"});C.extend(C.ui,{plugin:{add:function(E,D,G){E=C.ui[E].prototype;for(var F in G){E.plugins[F]=E.plugins[F]||[];E.plugins[F].push([D,G[F]])}},call:function(E,D,G){if((D=E.plugins[D])&&E.element[0].parentNode){for(var F=0;F<D.length;F++){E.options[D[F][0]]&&D[F][1].apply(E.element,G)}}}},contains:function(E,D){return document.compareDocumentPosition?E.compareDocumentPosition(D)&16:E!==D&&E.contains(D)},hasScroll:function(E,D){if(C(E).css("overflow")==="hidden"){return false}D=D&&D==="left"?"scrollLeft":"scrollTop";var F=false;if(E[D]>0){return true}E[D]=1;F=E[D]>0;E[D]=0;return F},isOverAxis:function(E,D,F){return E>D&&E<D+F},isOver:function(E,D,I,H,G,F){return C.ui.isOverAxis(E,I,G)&&C.ui.isOverAxis(D,H,F)}})}})(jQuery);
/*
 * jQuery UI Widget 1.8.6
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(A,D){if(A.cleanData){var C=A.cleanData;A.cleanData=function(E){for(var G=0,F;(F=E[G])!=null;G++){A(F).triggerHandler("remove")}C(E)}}else{var B=A.fn.remove;A.fn.remove=function(E,F){return this.each(function(){if(!F){if(!E||A.filter(E,[this]).length){A("*",this).add([this]).each(function(){A(this).triggerHandler("remove")})}}return B.call(A(this),E,F)})}}A.widget=function(E,I,H){var G=E.split(".")[0],F;E=E.split(".")[1];F=G+"-"+E;if(!H){H=I;I=A.Widget}A.expr[":"][F]=function(J){return !!A.data(J,E)};A[G]=A[G]||{};A[G][E]=function(J,K){arguments.length&&this._createWidget(J,K)};I=new I;I.options=A.extend(true,{},I.options);A[G][E].prototype=A.extend(true,I,{namespace:G,widgetName:E,widgetEventPrefix:A[G][E].prototype.widgetEventPrefix||E,widgetBaseClass:F},H);A.widget.bridge(E,A[G][E])};A.widget.bridge=function(E,F){A.fn[E]=function(J){var I=typeof J==="string",H=Array.prototype.slice.call(arguments,1),G=this;J=!I&&H.length?A.extend.apply(null,[true,J].concat(H)):J;if(I&&J.charAt(0)==="_"){return G}I?this.each(function(){var L=A.data(this,E),K=L&&A.isFunction(L[J])?L[J].apply(L,H):L;if(K!==L&&K!==D){G=K;return false}}):this.each(function(){var K=A.data(this,E);K?K.option(J||{})._init():A.data(this,E,new F(J,this))});return G}};A.Widget=function(E,F){arguments.length&&this._createWidget(E,F)};A.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(E,G){A.data(G,this.widgetName,this);this.element=A(G);this.options=A.extend(true,{},this.options,this._getCreateOptions(),E);var F=this;this.element.bind("remove."+this.widgetName,function(){F.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return A.metadata&&A.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(E,G){var F=E;if(arguments.length===0){return A.extend({},this.options)}if(typeof E==="string"){if(G===D){return this.options[E]}F={};F[E]=G}this._setOptions(F);return this},_setOptions:function(E){var F=this;A.each(E,function(H,G){F._setOption(H,G)});return this},_setOption:function(E,F){this.options[E]=F;if(E==="disabled"){this.widget()[F?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",F)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(E,I,H){var G=this.options[E];I=A.Event(I);I.type=(E===this.widgetEventPrefix?E:this.widgetEventPrefix+E).toLowerCase();H=H||{};if(I.originalEvent){E=A.event.props.length;for(var F;E;){F=A.event.props[--E];I[F]=I.originalEvent[F]}}this.element.trigger(I,H);return !(A.isFunction(G)&&G.call(this.element[0],I,H)===false||I.isDefaultPrevented())}}})(jQuery);
/*
 * jQuery UI Mouse 1.8.6
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(A){A.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var B=this;this.element.bind("mousedown."+this.widgetName,function(C){return B._mouseDown(C)}).bind("click."+this.widgetName,function(C){if(B._preventClickEvent){B._preventClickEvent=false;C.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(C){C.originalEvent=C.originalEvent||{};if(!C.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(C);this._mouseDownEvent=C;var B=this,E=C.which==1,D=typeof this.options.cancel=="string"?A(C.target).parents().add(C.target).filter(this.options.cancel).length:false;if(!E||D||!this._mouseCapture(C)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){B.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(C)&&this._mouseDelayMet(C)){this._mouseStarted=this._mouseStart(C)!==false;if(!this._mouseStarted){C.preventDefault();return true}}this._mouseMoveDelegate=function(F){return B._mouseMove(F)};this._mouseUpDelegate=function(F){return B._mouseUp(F)};A(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);C.preventDefault();return C.originalEvent.mouseHandled=true}},_mouseMove:function(B){if(A.browser.msie&&!(document.documentMode>=9)&&!B.button){return this._mouseUp(B)}if(this._mouseStarted){this._mouseDrag(B);return B.preventDefault()}if(this._mouseDistanceMet(B)&&this._mouseDelayMet(B)){(this._mouseStarted=this._mouseStart(this._mouseDownEvent,B)!==false)?this._mouseDrag(B):this._mouseUp(B)}return !this._mouseStarted},_mouseUp:function(B){A(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=B.target==this._mouseDownEvent.target;this._mouseStop(B)}return false},_mouseDistanceMet:function(B){return Math.max(Math.abs(this._mouseDownEvent.pageX-B.pageX),Math.abs(this._mouseDownEvent.pageY-B.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);(function(A){A.widget("ui.slider",A.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var C=this,B=this.options;this._mouseSliding=this._keySliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");B.disabled&&this.element.addClass("ui-slider-disabled ui-disabled");this.range=A([]);if(B.range){if(B.range===true){this.range=A("<div></div>");if(!B.values){B.values=[this._valueMin(),this._valueMin()]}if(B.values.length&&B.values.length!==2){B.values=[B.values[0],B.values[0]]}}else{this.range=A("<div></div>")}this.range.appendTo(this.element).addClass("ui-slider-range");if(B.range==="min"||B.range==="max"){this.range.addClass("ui-slider-range-"+B.range)}this.range.addClass("ui-widget-header")}A(".ui-slider-handle",this.element).length===0&&A("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");if(B.values&&B.values.length){for(;A(".ui-slider-handle",this.element).length<B.values.length;){A("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle")}}this.handles=A(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all");this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(D){D.preventDefault()}).hover(function(){B.disabled||A(this).addClass("ui-state-hover")},function(){A(this).removeClass("ui-state-hover")}).focus(function(){if(B.disabled){A(this).blur()}else{A(".ui-slider .ui-state-focus").removeClass("ui-state-focus");A(this).addClass("ui-state-focus")}}).blur(function(){A(this).removeClass("ui-state-focus")});this.handles.each(function(D){A(this).data("index.ui-slider-handle",D)});this.handles.keydown(function(I){var H=true,G=A(this).data("index.ui-slider-handle"),E,F,D;if(!C.options.disabled){switch(I.keyCode){case A.ui.keyCode.HOME:case A.ui.keyCode.END:case A.ui.keyCode.PAGE_UP:case A.ui.keyCode.PAGE_DOWN:case A.ui.keyCode.UP:case A.ui.keyCode.RIGHT:case A.ui.keyCode.DOWN:case A.ui.keyCode.LEFT:H=false;if(!C._keySliding){C._keySliding=true;A(this).addClass("ui-state-active");E=C._start(I,G);if(E===false){return }}break}D=C.options.step;E=C.options.values&&C.options.values.length?(F=C.values(G)):(F=C.value());switch(I.keyCode){case A.ui.keyCode.HOME:F=C._valueMin();break;case A.ui.keyCode.END:F=C._valueMax();break;case A.ui.keyCode.PAGE_UP:F=C._trimAlignValue(E+(C._valueMax()-C._valueMin())/5);break;case A.ui.keyCode.PAGE_DOWN:F=C._trimAlignValue(E-(C._valueMax()-C._valueMin())/5);break;case A.ui.keyCode.UP:case A.ui.keyCode.RIGHT:if(E===C._valueMax()){return }F=C._trimAlignValue(E+D);break;case A.ui.keyCode.DOWN:case A.ui.keyCode.LEFT:if(E===C._valueMin()){return }F=C._trimAlignValue(E-D);break}C._slide(I,G,F);return H}}).keyup(function(E){var D=A(this).data("index.ui-slider-handle");if(C._keySliding){C._keySliding=false;C._stop(E,D);C._change(E,D);A(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},_mouseCapture:function(C){var B=this.options,H,G,F,D,E;if(B.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();H=this._normValueFromMouse({x:C.pageX,y:C.pageY});G=this._valueMax()-this._valueMin()+1;D=this;this.handles.each(function(J){var I=Math.abs(H-D.values(J));if(G>I){G=I;F=A(this);E=J}});if(B.range===true&&this.values(1)===B.min){E+=1;F=A(this.handles[E])}if(this._start(C,E)===false){return false}this._mouseSliding=true;D._handleIndex=E;F.addClass("ui-state-active").focus();B=F.offset();this._clickOffset=!A(C.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:C.pageX-B.left-F.width()/2,top:C.pageY-B.top-F.height()/2-(parseInt(F.css("borderTopWidth"),10)||0)-(parseInt(F.css("borderBottomWidth"),10)||0)+(parseInt(F.css("marginTop"),10)||0)};this._slide(C,E,H);return this._animateOff=true},_mouseStart:function(){return true},_mouseDrag:function(C){var B=this._normValueFromMouse({x:C.pageX,y:C.pageY});this._slide(C,this._handleIndex,B);return false},_mouseStop:function(B){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(B,this._handleIndex);this._change(B,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(C){var B;if(this.orientation==="horizontal"){B=this.elementSize.width;C=C.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{B=this.elementSize.height;C=C.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}B=C/B;if(B>1){B=1}if(B<0){B=0}if(this.orientation==="vertical"){B=1-B}C=this._valueMax()-this._valueMin();return this._trimAlignValue(this._valueMin()+B*C)},_start:function(C,B){var D={handle:this.handles[B],value:this.value()};if(this.options.values&&this.options.values.length){D.value=this.values(B);D.values=this.values()}return this._trigger("start",C,D)},_slide:function(C,B,E){var D;if(this.options.values&&this.options.values.length){D=this.values(B?0:1);if(this.options.values.length===2&&this.options.range===true&&(B===0&&E>D||B===1&&E<D)){E=D}if(E!==this.values(B)){D=this.values();D[B]=E;C=this._trigger("slide",C,{handle:this.handles[B],value:E,values:D});this.values(B?0:1);C!==false&&this.values(B,E,true)}}else{if(E!==this.value()){C=this._trigger("slide",C,{handle:this.handles[B],value:E});C!==false&&this.value(E)}}},_stop:function(C,B){var D={handle:this.handles[B],value:this.value()};if(this.options.values&&this.options.values.length){D.value=this.values(B);D.values=this.values()}this._trigger("stop",C,D)},_change:function(C,B){if(!this._keySliding&&!this._mouseSliding){var D={handle:this.handles[B],value:this.value()};if(this.options.values&&this.options.values.length){D.value=this.values(B);D.values=this.values()}this._trigger("change",C,D)}},value:function(B){if(arguments.length){this.options.value=this._trimAlignValue(B);this._refreshValue();this._change(null,0)}return this._value()},values:function(C,B){var F,E,D;if(arguments.length>1){this.options.values[C]=this._trimAlignValue(B);this._refreshValue();this._change(null,C)}if(arguments.length){if(A.isArray(arguments[0])){F=this.options.values;E=arguments[0];for(D=0;D<F.length;D+=1){F[D]=this._trimAlignValue(E[D]);this._change(null,D)}this._refreshValue()}else{return this.options.values&&this.options.values.length?this._values(C):this.value()}}else{return this._values()}},_setOption:function(C,B){var E,D=0;if(A.isArray(this.options.values)){D=this.options.values.length}A.Widget.prototype._setOption.apply(this,arguments);switch(C){case"disabled":if(B){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.attr("disabled","disabled");this.element.addClass("ui-disabled")}else{this.handles.removeAttr("disabled");this.element.removeClass("ui-disabled")}break;case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(E=0;E<D;E+=1){this._change(null,E)}this._animateOff=false;break}},_value:function(){var B=this.options.value;return B=this._trimAlignValue(B)},_values:function(C){var B,D;if(arguments.length){B=this.options.values[C];return B=this._trimAlignValue(B)}else{B=this.options.values.slice();for(D=0;D<B.length;D+=1){B[D]=this._trimAlignValue(B[D])}return B}},_trimAlignValue:function(C){if(C<this._valueMin()){return this._valueMin()}if(C>this._valueMax()){return this._valueMax()}var B=this.options.step>0?this.options.step:1,D=C%B;C=C-D;if(Math.abs(D)*2>=B){C+=D>0?B:-B}return parseFloat(C.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var K=this.options.range,J=this.options,I=this,H=!this._animateOff?J.animate:false,G,E={},F,D,C,B;if(this.options.values&&this.options.values.length){this.handles.each(function(L){G=(I.values(L)-I._valueMin())/(I._valueMax()-I._valueMin())*100;E[I.orientation==="horizontal"?"left":"bottom"]=G+"%";A(this).stop(1,1)[H?"animate":"css"](E,J.animate);if(I.options.range===true){if(I.orientation==="horizontal"){if(L===0){I.range.stop(1,1)[H?"animate":"css"]({left:G+"%"},J.animate)}if(L===1){I.range[H?"animate":"css"]({width:G-F+"%"},{queue:false,duration:J.animate})}}else{if(L===0){I.range.stop(1,1)[H?"animate":"css"]({bottom:G+"%"},J.animate)}if(L===1){I.range[H?"animate":"css"]({height:G-F+"%"},{queue:false,duration:J.animate})}}}F=G})}else{D=this.value();C=this._valueMin();B=this._valueMax();G=B!==C?(D-C)/(B-C)*100:0;E[I.orientation==="horizontal"?"left":"bottom"]=G+"%";this.handle.stop(1,1)[H?"animate":"css"](E,J.animate);if(K==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[H?"animate":"css"]({width:G+"%"},J.animate)}if(K==="max"&&this.orientation==="horizontal"){this.range[H?"animate":"css"]({width:100-G+"%"},{queue:false,duration:J.animate})}if(K==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[H?"animate":"css"]({height:G+"%"},J.animate)}if(K==="max"&&this.orientation==="vertical"){this.range[H?"animate":"css"]({height:100-G+"%"},{queue:false,duration:J.animate})}}}});A.extend(A.ui.slider,{version:"1.8.6"})})(jQuery);(function(d,G){function K(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._inDialog=this._datepickerShowing=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-75:c+0",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false};d.extend(this._defaults,this.regional[""]);this.dpDiv=d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible"></div>')}function E(a,b){d.extend(a,b);for(var c in b){if(b[c]==null||b[c]==G){a[c]=b[c]}}return a}d.extend(d.ui,{datepicker:{version:"1.8.6"}});var y=(new Date).getTime();d.extend(K.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){E(this._defaults,a||{});return this},_attachDatepicker:function(a,b){var c=null;for(var e in this._defaults){var f=a.getAttribute("date:"+e);if(f){c=c||{};try{c[e]=eval(f)}catch(h){c[e]=f}}}e=a.nodeName.toLowerCase();f=e=="div"||e=="span";if(!a.id){this.uuid+=1;a.id="dp"+this.uuid}var i=this._newInst(d(a),f);i.settings=d.extend({},b||{},c||{});if(e=="input"){this._connectDatepicker(a,i)}else{f&&this._inlineDatepicker(a,i)}},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:!b?this.dpDiv:d('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}},_connectDatepicker:function(a,b){var c=d(a);b.append=d([]);b.trigger=d([]);if(!c.hasClass(this.markerClassName)){this._attachments(c,b);c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,f,h){b.settings[f]=h}).bind("getData.datepicker",function(e,f){return this._get(b,f)});this._autoSize(b);d.data(a,"datepicker",b)}},_attachments:function(a,b){var c=this._get(b,"appendText"),e=this._get(b,"isRTL");b.append&&b.append.remove();if(c){b.append=d('<span class="'+this._appendClass+'">'+c+"</span>");a[e?"before":"after"](b.append)}a.unbind("focus",this._showDatepicker);b.trigger&&b.trigger.remove();c=this._get(b,"showOn");if(c=="focus"||c=="both"){a.focus(this._showDatepicker)}if(c=="button"||c=="both"){c=this._get(b,"buttonText");var f=this._get(b,"buttonImage");b.trigger=d(this._get(b,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:f,alt:c,title:c}):d('<button type="button"></button>').addClass(this._triggerClass).html(f==""?c:d("<img/>").attr({src:f,alt:c,title:c})));a[e?"before":"after"](b.trigger);b.trigger.click(function(){d.datepicker._datepickerShowing&&d.datepicker._lastInput==a[0]?d.datepicker._hideDatepicker():d.datepicker._showDatepicker(a[0]);return false})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var e=function(f){for(var h=0,i=0,g=0;g<f.length;g++){if(f[g].length>h){h=f[g].length;i=g}}return i};b.setMonth(e(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(e(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=d(a);if(!c.hasClass(this.markerClassName)){c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(e,f,h){b.settings[f]=h}).bind("getData.datepicker",function(e,f){return this._get(b,f)});d.data(a,"datepicker",b);this._setDate(b,this._getDefaultDate(b),true);this._updateDatepicker(b);this._updateAlternate(b)}},_dialogDatepicker:function(a,b,c,e,f){a=this._dialogInst;if(!a){this.uuid+=1;this._dialogInput=d('<input type="text" id="'+("dp"+this.uuid)+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');this._dialogInput.keydown(this._doKeyDown);d("body").append(this._dialogInput);a=this._dialogInst=this._newInst(this._dialogInput,false);a.settings={};d.data(this._dialogInput[0],"datepicker",a)}E(a.settings,e||{});b=b&&b.constructor==Date?this._formatDate(a,b):b;this._dialogInput.val(b);this._pos=f?f.length?f:[f.pageX,f.pageY]:null;if(!this._pos){this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");a.settings.onSelect=c;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);d.blockUI&&d.blockUI(this.dpDiv);d.data(this._dialogInput[0],"datepicker",a);return this},_destroyDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();d.removeData(a,"datepicker");if(e=="input"){c.append.remove();c.trigger.remove();b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else{if(e=="div"||e=="span"){b.removeClass(this.markerClassName).empty()}}}},_enableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if(e=="input"){a.disabled=false;c.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(e=="div"||e=="span"){b.children("."+this._inlineClass).children().removeClass("ui-state-disabled")}}this._disabledInputs=d.map(this._disabledInputs,function(f){return f==a?null:f})}},_disableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if(e=="input"){a.disabled=true;c.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(e=="div"||e=="span"){b.children("."+this._inlineClass).children().addClass("ui-state-disabled")}}this._disabledInputs=d.map(this._disabledInputs,function(f){return f==a?null:f});this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a){return false}for(var b=0;b<this._disabledInputs.length;b++){if(this._disabledInputs[b]==a){return true}}return false},_getInst:function(a){try{return d.data(a,"datepicker")}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var e=this._getInst(a);if(arguments.length==2&&typeof b=="string"){return b=="defaults"?d.extend({},d.datepicker._defaults):e?b=="all"?d.extend({},e.settings):this._get(e,b):null}var f=b||{};if(typeof b=="string"){f={};f[b]=c}if(e){this._curInst==e&&this._hideDatepicker();var h=this._getDateDatepicker(a,true);E(e.settings,f);this._attachments(d(a),e);this._autoSize(e);this._setDateDatepicker(a,h);this._updateDatepicker(e)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){if(a=this._getInst(a)){this._setDate(a,b);this._updateDatepicker(a);this._updateAlternate(a)}},_getDateDatepicker:function(a,b){(a=this._getInst(a))&&!a.inline&&this._setDateFromField(a,b);return a?this._getDate(a):null},_doKeyDown:function(a){var b=d.datepicker._getInst(a.target),c=true,e=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=true;if(d.datepicker._datepickerShowing){switch(a.keyCode){case 9:d.datepicker._hideDatepicker();c=false;break;case 13:c=d("td."+d.datepicker._dayOverClass,b.dpDiv).add(d("td."+d.datepicker._currentClass,b.dpDiv));c[0]?d.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,c[0]):d.datepicker._hideDatepicker();return false;case 27:d.datepicker._hideDatepicker();break;case 33:d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 34:d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 35:if(a.ctrlKey||a.metaKey){d.datepicker._clearDate(a.target)}c=a.ctrlKey||a.metaKey;break;case 36:if(a.ctrlKey||a.metaKey){d.datepicker._gotoToday(a.target)}c=a.ctrlKey||a.metaKey;break;case 37:if(a.ctrlKey||a.metaKey){d.datepicker._adjustDate(a.target,e?+1:-1,"D")}c=a.ctrlKey||a.metaKey;if(a.originalEvent.altKey){d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M")}break;case 38:if(a.ctrlKey||a.metaKey){d.datepicker._adjustDate(a.target,-7,"D")}c=a.ctrlKey||a.metaKey;break;case 39:if(a.ctrlKey||a.metaKey){d.datepicker._adjustDate(a.target,e?-1:+1,"D")}c=a.ctrlKey||a.metaKey;if(a.originalEvent.altKey){d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M")}break;case 40:if(a.ctrlKey||a.metaKey){d.datepicker._adjustDate(a.target,+7,"D")}c=a.ctrlKey||a.metaKey;break;default:c=false}}else{if(a.keyCode==36&&a.ctrlKey){d.datepicker._showDatepicker(this)}else{c=false}}if(c){a.preventDefault();a.stopPropagation()}},_doKeyPress:function(a){var b=d.datepicker._getInst(a.target);if(d.datepicker._get(b,"constrainInput")){b=d.datepicker._possibleChars(d.datepicker._get(b,"dateFormat"));var c=String.fromCharCode(a.charCode==G?a.keyCode:a.charCode);return a.ctrlKey||c<" "||!b||b.indexOf(c)>-1}},_doKeyUp:function(a){a=d.datepicker._getInst(a.target);if(a.input.val()!=a.lastVal){try{if(d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,d.datepicker._getFormatConfig(a))){d.datepicker._setDateFromField(a);d.datepicker._updateAlternate(a);d.datepicker._updateDatepicker(a)}}catch(b){d.datepicker.log(b)}}return true},_showDatepicker:function(a){a=a.target||a;if(a.nodeName.toLowerCase()!="input"){a=d("input",a.parentNode)[0]}if(!(d.datepicker._isDisabledDatepicker(a)||d.datepicker._lastInput==a)){var b=d.datepicker._getInst(a);d.datepicker._curInst&&d.datepicker._curInst!=b&&d.datepicker._curInst.dpDiv.stop(true,true);var c=d.datepicker._get(b,"beforeShow");E(b.settings,c?c.apply(a,[a,b]):{});b.lastVal=null;d.datepicker._lastInput=a;d.datepicker._setDateFromField(b);if(d.datepicker._inDialog){a.value=""}if(!d.datepicker._pos){d.datepicker._pos=d.datepicker._findPos(a);d.datepicker._pos[1]+=a.offsetHeight}var e=false;d(a).parents().each(function(){e|=d(this).css("position")=="fixed";return !e});if(e&&d.browser.opera){d.datepicker._pos[0]-=document.documentElement.scrollLeft;d.datepicker._pos[1]-=document.documentElement.scrollTop}c={left:d.datepicker._pos[0],top:d.datepicker._pos[1]};d.datepicker._pos=null;b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});d.datepicker._updateDatepicker(b);c=d.datepicker._checkOffset(b,c,e);b.dpDiv.css({position:d.datepicker._inDialog&&d.blockUI?"static":e?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!b.inline){c=d.datepicker._get(b,"showAnim");var f=d.datepicker._get(b,"duration"),h=function(){d.datepicker._datepickerShowing=true;var i=d.datepicker._getBorders(b.dpDiv);b.dpDiv.find("iframe.ui-datepicker-cover").css({left:-i[0],top:-i[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})};b.dpDiv.zIndex(d(a).zIndex()+1);d.effects&&d.effects[c]?b.dpDiv.show(c,d.datepicker._get(b,"showOptions"),f,h):b.dpDiv[c||"show"](c?f:null,h);if(!c||!f){h()}b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus();d.datepicker._curInst=b}}},_updateDatepicker:function(a){var b=this,c=d.datepicker._getBorders(a.dpDiv);a.dpDiv.empty().append(this._generateHTML(a)).find("iframe.ui-datepicker-cover").css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}).end().find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){d(this).removeClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&d(this).removeClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&d(this).removeClass("ui-datepicker-next-hover")}).bind("mouseover",function(){if(!b._isDisabledDatepicker(a.inline?a.dpDiv.parent()[0]:a.input[0])){d(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");d(this).addClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&d(this).addClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&d(this).addClass("ui-datepicker-next-hover")}}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();c=this._getNumberOfMonths(a);var e=c[1];e>1?a.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",17*e+"em"):a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");a.dpDiv[(c[0]!=1||c[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");a==d.datepicker._curInst&&d.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input.focus()},_getBorders:function(a){var b=function(c){return{thin:1,medium:2,thick:3}[c]||c};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var e=a.dpDiv.outerWidth(),f=a.dpDiv.outerHeight(),h=a.input?a.input.outerWidth():0,i=a.input?a.input.outerHeight():0,g=document.documentElement.clientWidth+d(document).scrollLeft(),k=document.documentElement.clientHeight+d(document).scrollTop();b.left-=this._get(a,"isRTL")?e-h:0;b.left-=c&&b.left==a.input.offset().left?d(document).scrollLeft():0;b.top-=c&&b.top==a.input.offset().top+i?d(document).scrollTop():0;b.left-=Math.min(b.left,b.left+e>g&&g>e?Math.abs(b.left+e-g):0);b.top-=Math.min(b.top,b.top+f>k&&k>f?Math.abs(f+i):0);return b},_findPos:function(a){for(var b=this._get(this._getInst(a),"isRTL");a&&(a.type=="hidden"||a.nodeType!=1);){a=a[b?"previousSibling":"nextSibling"]}a=d(a).offset();return[a.left,a.top]},_hideDatepicker:function(a){var b=this._curInst;if(!(!b||a&&b!=d.data(a,"datepicker"))){if(this._datepickerShowing){a=this._get(b,"showAnim");var c=this._get(b,"duration"),e=function(){d.datepicker._tidyDialog(b);this._curInst=null};d.effects&&d.effects[a]?b.dpDiv.hide(a,d.datepicker._get(b,"showOptions"),c,e):b.dpDiv[a=="slideDown"?"slideUp":a=="fadeIn"?"fadeOut":"hide"](a?c:null,e);a||e();if(a=this._get(b,"onClose")){a.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b])}this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(d.blockUI){d.unblockUI();d("body").append(this.dpDiv)}}this._inDialog=false}}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(d.datepicker._curInst){a=d(a.target);a[0].id!=d.datepicker._mainDivId&&a.parents("#"+d.datepicker._mainDivId).length==0&&!a.hasClass(d.datepicker.markerClassName)&&!a.hasClass(d.datepicker._triggerClass)&&d.datepicker._datepickerShowing&&!(d.datepicker._inDialog&&d.blockUI)&&d.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){a=d(a);var e=this._getInst(a[0]);if(!this._isDisabledDatepicker(a[0])){this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):0),c);this._updateDatepicker(e)}},_gotoToday:function(a){a=d(a);var b=this._getInst(a[0]);if(this._get(b,"gotoCurrent")&&b.currentDay){b.selectedDay=b.currentDay;b.drawMonth=b.selectedMonth=b.currentMonth;b.drawYear=b.selectedYear=b.currentYear}else{var c=new Date;b.selectedDay=c.getDate();b.drawMonth=b.selectedMonth=c.getMonth();b.drawYear=b.selectedYear=c.getFullYear()}this._notifyChange(b);this._adjustDate(a)},_selectMonthYear:function(a,b,c){a=d(a);var e=this._getInst(a[0]);e._selectingMonthYear=false;e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(a)},_clickMonthYear:function(a){var b=this._getInst(d(a)[0]);b.input&&b._selectingMonthYear&&setTimeout(function(){b.input.focus()},0);b._selectingMonthYear=!b._selectingMonthYear},_selectDay:function(a,b,c,e){var f=d(a);if(!(d(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(f[0]))){f=this._getInst(f[0]);f.selectedDay=f.currentDay=d("a",e).html();f.selectedMonth=f.currentMonth=b;f.selectedYear=f.currentYear=c;this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))}},_clearDate:function(a){a=d(a);this._getInst(a[0]);this._selectDate(a,"")},_selectDate:function(a,b){a=this._getInst(d(a)[0]);b=b!=null?b:this._formatDate(a);a.input&&a.input.val(b);this._updateAlternate(a);var c=this._get(a,"onSelect");if(c){c.apply(a.input?a.input[0]:null,[b,a])}else{a.input&&a.input.trigger("change")}if(a.inline){this._updateDatepicker(a)}else{this._hideDatepicker();this._lastInput=a.input[0];typeof a.input[0]!="object"&&a.input.focus();this._lastInput=null}},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),e=this._getDate(a),f=this.formatDate(c,e,this._getFormatConfig(a));d(b).each(function(){d(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[a>0&&a<6,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/86400000)/7)+1},parseDate:function(a,b,c){if(a==null||b==null){throw"Invalid arguments"}b=typeof b=="object"?b.toString():b+"";if(b==""){return null}for(var e=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff,f=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,h=(c?c.dayNames:null)||this._defaults.dayNames,i=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,k=c=-1,l=-1,u=-1,j=false,o=function(p){(p=z+1<a.length&&a.charAt(z+1)==p)&&z++;return p},m=function(p){o(p);p=new RegExp("^\\d{1,"+(p=="@"?14:p=="!"?20:p=="y"?4:p=="o"?3:2)+"}");p=b.substring(s).match(p);if(!p){throw"Missing number at position "+s}s+=p[0].length;return parseInt(p[0],10)},n=function(p,w,H){p=o(p)?H:w;for(w=0;w<p.length;w++){if(b.substr(s,p[w].length).toLowerCase()==p[w].toLowerCase()){s+=p[w].length;return w+1}}throw"Unknown name at position "+s},r=function(){if(b.charAt(s)!=a.charAt(z)){throw"Unexpected literal at position "+s}s++},s=0,z=0;z<a.length;z++){if(j){if(a.charAt(z)=="'"&&!o("'")){j=false}else{r()}}else{switch(a.charAt(z)){case"d":l=m("d");break;case"D":n("D",f,h);break;case"o":u=m("o");break;case"m":k=m("m");break;case"M":k=n("M",i,g);break;case"y":c=m("y");break;case"@":var v=new Date(m("@"));c=v.getFullYear();k=v.getMonth()+1;l=v.getDate();break;case"!":v=new Date((m("!")-this._ticksTo1970)/10000);c=v.getFullYear();k=v.getMonth()+1;l=v.getDate();break;case"'":if(o("'")){r()}else{j=true}break;default:r()}}}if(c==-1){c=(new Date).getFullYear()}else{if(c<100){c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=e?0:-100)}}if(u>-1){k=1;l=u;do{e=this._getDaysInMonth(c,k-1);if(l<=e){break}k++;l-=e}while(1)}v=this._daylightSavingAdjust(new Date(c,k-1,l));if(v.getFullYear()!=c||v.getMonth()+1!=k||v.getDate()!=l){throw"Invalid date"}return v},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*10000000,formatDate:function(a,b,c){if(!b){return""}var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,h=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;c=(c?c.monthNames:null)||this._defaults.monthNames;var i=function(o){(o=j+1<a.length&&a.charAt(j+1)==o)&&j++;return o},g=function(o,m,n){m=""+m;if(i(o)){for(;m.length<n;){m="0"+m}}return m},k=function(o,m,n,r){return i(o)?r[m]:n[m]},l="",u=false;if(b){for(var j=0;j<a.length;j++){if(u){if(a.charAt(j)=="'"&&!i("'")){u=false}else{l+=a.charAt(j)}}else{switch(a.charAt(j)){case"d":l+=g("d",b.getDate(),2);break;case"D":l+=k("D",b.getDay(),e,f);break;case"o":l+=g("o",(b.getTime()-(new Date(b.getFullYear(),0,0)).getTime())/86400000,3);break;case"m":l+=g("m",b.getMonth()+1,2);break;case"M":l+=k("M",b.getMonth(),h,c);break;case"y":l+=i("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":l+=b.getTime();break;case"!":l+=b.getTime()*10000+this._ticksTo1970;break;case"'":if(i("'")){l+="'"}else{u=true}break;default:l+=a.charAt(j)}}}}return l},_possibleChars:function(a){for(var b="",c=false,e=function(h){(h=f+1<a.length&&a.charAt(f+1)==h)&&f++;return h},f=0;f<a.length;f++){if(c){if(a.charAt(f)=="'"&&!e("'")){c=false}else{b+=a.charAt(f)}}else{switch(a.charAt(f)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":if(e("'")){b+="'"}else{c=true}break;default:b+=a.charAt(f)}}}return b},_get:function(a,b){return a.settings[b]!==G?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),e=a.lastVal=a.input?a.input.val():null,f,h;f=h=this._getDefaultDate(a);var i=this._getFormatConfig(a);try{f=this.parseDate(c,e,i)||h}catch(g){this.log(g);e=b?"":e}a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=f.getMonth();a.drawYear=a.selectedYear=f.getFullYear();a.currentDay=e?f.getDate():0;a.currentMonth=e?f.getMonth():0;a.currentYear=e?f.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var e=function(h){var i=new Date;i.setDate(i.getDate()+h);return i},f=function(h){try{return d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),h,d.datepicker._getFormatConfig(a))}catch(i){}var g=(h.toLowerCase().match(/^c/)?d.datepicker._getDate(a):null)||new Date,k=g.getFullYear(),l=g.getMonth();g=g.getDate();for(var u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,j=u.exec(h);j;){switch(j[2]||"d"){case"d":case"D":g+=parseInt(j[1],10);break;case"w":case"W":g+=parseInt(j[1],10)*7;break;case"m":case"M":l+=parseInt(j[1],10);g=Math.min(g,d.datepicker._getDaysInMonth(k,l));break;case"y":case"Y":k+=parseInt(j[1],10);g=Math.min(g,d.datepicker._getDaysInMonth(k,l));break}j=u.exec(h)}return new Date(k,l,g)};if(b=(b=b==null?c:typeof b=="string"?f(b):typeof b=="number"?isNaN(b)?c:e(b):b)&&b.toString()=="Invalid Date"?c:b){b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0)}return this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){if(!a){return null}a.setHours(a.getHours()>12?a.getHours()+2:0);return a},_setDate:function(a,b,c){var e=!b,f=a.selectedMonth,h=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();if((f!=a.selectedMonth||h!=a.selectedYear)&&!c){this._notifyChange(a)}this._adjustInstDate(a);if(a.input){a.input.val(e?"":this._formatDate(a))}},_getDate:function(a){return !a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),e=this._get(a,"showButtonPanel"),f=this._get(a,"hideIfNoPrevNext"),h=this._get(a,"navigationAsDateFormat"),i=this._getNumberOfMonths(a),g=this._get(a,"showCurrentAtPos"),k=this._get(a,"stepMonths"),l=i[0]!=1||i[1]!=1,u=this._daylightSavingAdjust(!a.currentDay?new Date(9999,9,9):new Date(a.currentYear,a.currentMonth,a.currentDay)),j=this._getMinMaxDate(a,"min"),o=this._getMinMaxDate(a,"max");g=a.drawMonth-g;var m=a.drawYear;if(g<0){g+=12;m--}if(o){var n=this._daylightSavingAdjust(new Date(o.getFullYear(),o.getMonth()-i[0]*i[1]+1,o.getDate()));for(n=j&&n<j?j:n;this._daylightSavingAdjust(new Date(m,g,1))>n;){g--;if(g<0){g=11;m--}}}a.drawMonth=g;a.drawYear=m;n=this._get(a,"prevText");n=!h?n:this.formatDate(n,this._daylightSavingAdjust(new Date(m,g-k,1)),this._getFormatConfig(a));n=this._canAdjustMonth(a,-1,m,g)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._adjustDate('#"+a.id+"', -"+k+", 'M');\" title=\""+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>";var r=this._get(a,"nextText");r=!h?r:this.formatDate(r,this._daylightSavingAdjust(new Date(m,g+k,1)),this._getFormatConfig(a));f=this._canAdjustMonth(a,+1,m,g)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._adjustDate('#"+a.id+"', +"+k+", 'M');\" title=\""+r+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+r+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+r+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+r+"</span></a>";k=this._get(a,"currentText");r=this._get(a,"gotoCurrent")&&a.currentDay?u:b;k=!h?k:this.formatDate(k,r,this._getFormatConfig(a));h=!a.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+y+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>":"";e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?h:"")+(this._isInRange(a,r)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._gotoToday('#"+a.id+"');\">"+k+"</button>":"")+(c?"":h)+"</div>":"";h=parseInt(this._get(a,"firstDay"),10);h=isNaN(h)?0:h;k=this._get(a,"showWeek");r=this._get(a,"dayNames");this._get(a,"dayNamesShort");var s=this._get(a,"dayNamesMin"),z=this._get(a,"monthNames"),v=this._get(a,"monthNamesShort"),p=this._get(a,"beforeShowDay"),w=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths");this._get(a,"calculateWeek");for(var L=this._getDefaultDate(a),I="",C=0;C<i[0];C++){for(var M="",D=0;D<i[1];D++){var N=this._daylightSavingAdjust(new Date(m,g,a.selectedDay)),t=" ui-corner-all",x="";if(l){x+='<div class="ui-datepicker-group';if(i[1]>1){switch(D){case 0:x+=" ui-datepicker-group-first";t=" ui-corner-"+(c?"right":"left");break;case i[1]-1:x+=" ui-datepicker-group-last";t=" ui-corner-"+(c?"left":"right");break;default:x+=" ui-datepicker-group-middle";t="";break}}x+='">'}x+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+t+'">'+(/all|left/.test(t)&&C==0?c?f:n:"")+(/all|right/.test(t)&&C==0?c?n:f:"")+this._generateMonthYearHeader(a,g,m,j,o,C>0||D>0,z,v)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var A=k?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(t=0;t<7;t++){var q=(t+h)%7;A+="<th"+((t+h+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+r[q]+'">'+s[q]+"</span></th>"}x+=A+"</tr></thead><tbody>";A=this._getDaysInMonth(m,g);if(m==a.selectedYear&&g==a.selectedMonth){a.selectedDay=Math.min(a.selectedDay,A)}t=(this._getFirstDayOfMonth(m,g)-h+7)%7;A=l?6:Math.ceil((t+A)/7);q=this._daylightSavingAdjust(new Date(m,g,1-t));for(var O=0;O<A;O++){x+="<tr>";var P=!k?"":'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(q)+"</td>";for(t=0;t<7;t++){var F=p?p.apply(a.input?a.input[0]:null,[q]):[true,""],B=q.getMonth()!=g,J=B&&!H||!F[0]||j&&q<j||o&&q>o;P+='<td class="'+((t+h+6)%7>=5?" ui-datepicker-week-end":"")+(B?" ui-datepicker-other-month":"")+(q.getTime()==N.getTime()&&g==a.selectedMonth&&a._keyEvent||L.getTime()==q.getTime()&&L.getTime()==N.getTime()?" "+this._dayOverClass:"")+(J?" "+this._unselectableClass+" ui-state-disabled":"")+(B&&!w?"":" "+F[1]+(q.getTime()==u.getTime()?" "+this._currentClass:"")+(q.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!B||w)&&F[2]?' title="'+F[2]+'"':"")+(J?"":' onclick="DP_jQuery_'+y+".datepicker._selectDay('#"+a.id+"',"+q.getMonth()+","+q.getFullYear()+', this);return false;"')+">"+(B&&!w?"&#xa0;":J?'<span class="ui-state-default">'+q.getDate()+"</span>":'<a class="ui-state-default'+(q.getTime()==b.getTime()?" ui-state-highlight":"")+(q.getTime()==u.getTime()?" ui-state-active":"")+(B?" ui-priority-secondary":"")+'" href="#">'+q.getDate()+"</a>")+"</td>";q.setDate(q.getDate()+1);q=this._daylightSavingAdjust(q)}x+=P+"</tr>"}g++;if(g>11){g=0;m++}x+="</tbody></table>"+(l?"</div>"+(i[0]>0&&D==i[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");M+=x}I+=M}I+=e+(d.browser.msie&&parseInt(d.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");a._keyEvent=false;return I},_generateMonthYearHeader:function(a,b,c,e,f,h,i,g){var k=this._get(a,"changeMonth"),l=this._get(a,"changeYear"),u=this._get(a,"showMonthAfterYear"),j='<div class="ui-datepicker-title">',o="";if(h||!k){o+='<span class="ui-datepicker-month">'+i[b]+"</span>"}else{i=e&&e.getFullYear()==c;var m=f&&f.getFullYear()==c;o+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+a.id+"');\">";for(var n=0;n<12;n++){if((!i||n>=e.getMonth())&&(!m||n<=f.getMonth())){o+='<option value="'+n+'"'+(n==b?' selected="selected"':"")+">"+g[n]+"</option>"}}o+="</select>"}u||(j+=o+(h||!(k&&l)?"&#xa0;":""));if(h||!l){j+='<span class="ui-datepicker-year">'+c+"</span>"}else{g=this._get(a,"yearRange").split(":");var r=(new Date).getFullYear();i=function(s){s=s.match(/c[+-].*/)?c+parseInt(s.substring(1),10):s.match(/[+-].*/)?r+parseInt(s,10):parseInt(s,10);return isNaN(s)?r:s};b=i(g[0]);g=Math.max(b,i(g[1]||""));b=e?Math.max(b,e.getFullYear()):b;g=f?Math.min(g,f.getFullYear()):g;for(j+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+a.id+"');\">";b<=g;b++){j+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>"}j+="</select>"}j+=this._get(a,"yearSuffix");if(u){j+=(h||!(k&&l)?"&#xa0;":"")+o}j+="</div>";return j},_adjustInstDate:function(a,b,c){var e=a.drawYear+(c=="Y"?b:0),f=a.drawMonth+(c=="M"?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(e,f))+(c=="D"?b:0);e=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(e,f,b)));a.selectedDay=e.getDate();a.drawMonth=a.selectedMonth=e.getMonth();a.drawYear=a.selectedYear=e.getFullYear();if(c=="M"||c=="Y"){this._notifyChange(a)}},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");b=c&&b<c?c:b;return b=a&&b>a?a:b},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");if(b){b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])}},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return a==null?[1,1]:typeof a=="number"?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,e){var f=this._getNumberOfMonths(a);c=this._daylightSavingAdjust(new Date(c,e+(b<0?b:f[0]*f[1]),1));b<0&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!a||b.getTime()<=a.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,e){if(!b){a.currentDay=a.selectedDay;a.currentMonth=a.selectedMonth;a.currentYear=a.selectedYear}b=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(e,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});d.fn.datepicker=function(a){if(!d.datepicker.initialized){d(document).mousedown(d.datepicker._checkExternalClick).find("body").append(d.datepicker.dpDiv);d.datepicker.initialized=true}var b=Array.prototype.slice.call(arguments,1);if(typeof a=="string"&&(a=="isDisabled"||a=="getDate"||a=="widget")){return d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b))}if(a=="option"&&arguments.length==2&&typeof arguments[1]=="string"){return d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b))}return this.each(function(){typeof a=="string"?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this].concat(b)):d.datepicker._attachDatepicker(this,a)})};d.datepicker=new K;d.datepicker.initialized=false;d.datepicker.uuid=(new Date).getTime();d.datepicker.version="1.8.6";window["DP_jQuery_"+y]=d})(jQuery);
